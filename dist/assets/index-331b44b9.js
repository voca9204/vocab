var YT=Object.defineProperty;var XT=(t,e,n)=>e in t?YT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var zg=(t,e,n)=>(XT(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function B_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var W_={exports:{}},hu={},q_={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Da=Symbol.for("react.element"),JT=Symbol.for("react.portal"),ZT=Symbol.for("react.fragment"),eS=Symbol.for("react.strict_mode"),tS=Symbol.for("react.profiler"),nS=Symbol.for("react.provider"),rS=Symbol.for("react.context"),sS=Symbol.for("react.forward_ref"),iS=Symbol.for("react.suspense"),oS=Symbol.for("react.memo"),aS=Symbol.for("react.lazy"),Bg=Symbol.iterator;function lS(t){return t===null||typeof t!="object"?null:(t=Bg&&t[Bg]||t["@@iterator"],typeof t=="function"?t:null)}var H_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G_=Object.assign,K_={};function qi(t,e,n){this.props=t,this.context=e,this.refs=K_,this.updater=n||H_}qi.prototype.isReactComponent={};qi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Q_(){}Q_.prototype=qi.prototype;function Ff(t,e,n){this.props=t,this.context=e,this.refs=K_,this.updater=n||H_}var Uf=Ff.prototype=new Q_;Uf.constructor=Ff;G_(Uf,qi.prototype);Uf.isPureReactComponent=!0;var Wg=Array.isArray,Y_=Object.prototype.hasOwnProperty,$f={current:null},X_={key:!0,ref:!0,__self:!0,__source:!0};function J_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Y_.call(e,r)&&!X_.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Da,type:t,key:i,ref:o,props:s,_owner:$f.current}}function cS(t,e){return{$$typeof:Da,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Da}function uS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qg=/\/+/g;function xd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uS(""+t.key):e.toString(36)}function Wl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Da:case JT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+xd(o,0):r,Wg(s)?(n="",t!=null&&(n=t.replace(qg,"$&/")+"/"),Wl(s,e,n,"",function(d){return d})):s!=null&&(zf(s)&&(s=cS(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(qg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Wg(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+xd(i,l);o+=Wl(i,e,n,u,s)}else if(u=lS(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+xd(i,l++),o+=Wl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function _l(t,e,n){if(t==null)return t;var r=[],s=0;return Wl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function dS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var St={current:null},ql={transition:null},hS={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:ql,ReactCurrentOwner:$f};function Z_(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:_l,forEach:function(t,e,n){_l(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return _l(t,function(){e++}),e},toArray:function(t){return _l(t,function(e){return e})||[]},only:function(t){if(!zf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=qi;de.Fragment=ZT;de.Profiler=tS;de.PureComponent=Ff;de.StrictMode=eS;de.Suspense=iS;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hS;de.act=Z_;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=G_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=$f.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Y_.call(e,u)&&!X_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Da,type:t.type,key:s,ref:i,props:r,_owner:o}};de.createContext=function(t){return t={$$typeof:rS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:nS,_context:t},t.Consumer=t};de.createElement=J_;de.createFactory=function(t){var e=J_.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:sS,render:t}};de.isValidElement=zf;de.lazy=function(t){return{$$typeof:aS,_payload:{_status:-1,_result:t},_init:dS}};de.memo=function(t,e){return{$$typeof:oS,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=ql.transition;ql.transition={};try{t()}finally{ql.transition=e}};de.unstable_act=Z_;de.useCallback=function(t,e){return St.current.useCallback(t,e)};de.useContext=function(t){return St.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return St.current.useDeferredValue(t)};de.useEffect=function(t,e){return St.current.useEffect(t,e)};de.useId=function(){return St.current.useId()};de.useImperativeHandle=function(t,e,n){return St.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return St.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return St.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return St.current.useMemo(t,e)};de.useReducer=function(t,e,n){return St.current.useReducer(t,e,n)};de.useRef=function(t){return St.current.useRef(t)};de.useState=function(t){return St.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return St.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return St.current.useTransition()};de.version="18.3.1";q_.exports=de;var P=q_.exports;const pn=B_(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fS=P,pS=Symbol.for("react.element"),mS=Symbol.for("react.fragment"),gS=Object.prototype.hasOwnProperty,yS=fS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vS={key:!0,ref:!0,__self:!0,__source:!0};function e0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)gS.call(e,r)&&!vS.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:pS,type:t,key:i,ref:o,props:s,_owner:yS.current}}hu.Fragment=mS;hu.jsx=e0;hu.jsxs=e0;W_.exports=hu;var a=W_.exports,ph={},t0={exports:{}},Wt={},n0={exports:{}},r0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,M){var G=U.length;U.push(M);e:for(;0<G;){var ie=G-1>>>1,me=U[ie];if(0<s(me,M))U[ie]=M,U[G]=me,G=ie;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var M=U[0],G=U.pop();if(G!==M){U[0]=G;e:for(var ie=0,me=U.length,Ee=me>>>1;ie<Ee;){var Ct=2*(ie+1)-1,Ke=U[Ct],Ht=Ct+1,Lt=U[Ht];if(0>s(Ke,G))Ht<me&&0>s(Lt,Ke)?(U[ie]=Lt,U[Ht]=G,ie=Ht):(U[ie]=Ke,U[Ct]=G,ie=Ct);else if(Ht<me&&0>s(Lt,G))U[ie]=Lt,U[Ht]=G,ie=Ht;else break e}}return M}function s(U,M){var G=U.sortIndex-M.sortIndex;return G!==0?G:U.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,m=null,p=3,_=!1,I=!1,A=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(U){for(var M=n(d);M!==null;){if(M.callback===null)r(d);else if(M.startTime<=U)r(d),M.sortIndex=M.expirationTime,e(u,M);else break;M=n(d)}}function k(U){if(A=!1,x(U),!I)if(n(u)!==null)I=!0,H(D);else{var M=n(d);M!==null&&W(k,M.startTime-U)}}function D(U,M){I=!1,A&&(A=!1,w(y),y=-1),_=!0;var G=p;try{for(x(M),m=n(u);m!==null&&(!(m.expirationTime>M)||U&&!j());){var ie=m.callback;if(typeof ie=="function"){m.callback=null,p=m.priorityLevel;var me=ie(m.expirationTime<=M);M=t.unstable_now(),typeof me=="function"?m.callback=me:m===n(u)&&r(u),x(M)}else r(u);m=n(u)}if(m!==null)var Ee=!0;else{var Ct=n(d);Ct!==null&&W(k,Ct.startTime-M),Ee=!1}return Ee}finally{m=null,p=G,_=!1}}var V=!1,E=null,y=-1,T=5,R=-1;function j(){return!(t.unstable_now()-R<T)}function O(){if(E!==null){var U=t.unstable_now();R=U;var M=!0;try{M=E(!0,U)}finally{M?N():(V=!1,E=null)}}else V=!1}var N;if(typeof v=="function")N=function(){v(O)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,z=ee.port2;ee.port1.onmessage=O,N=function(){z.postMessage(null)}}else N=function(){b(O,0)};function H(U){E=U,V||(V=!0,N())}function W(U,M){y=b(function(){U(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){I||_||(I=!0,H(D))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var M=3;break;default:M=p}var G=p;p=M;try{return U()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,M){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var G=p;p=U;try{return M()}finally{p=G}},t.unstable_scheduleCallback=function(U,M,G){var ie=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ie+G:ie):G=ie,U){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=G+me,U={id:h++,callback:M,priorityLevel:U,startTime:G,expirationTime:me,sortIndex:-1},G>ie?(U.sortIndex=G,e(d,U),n(u)===null&&U===n(d)&&(A?(w(y),y=-1):A=!0,W(k,G-ie))):(U.sortIndex=me,e(u,U),I||_||(I=!0,H(D))),U},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(U){var M=p;return function(){var G=p;p=M;try{return U.apply(this,arguments)}finally{p=G}}}})(r0);n0.exports=r0;var _S=n0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wS=P,Bt=_S;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s0=new Set,aa={};function Ps(t,e){Ai(t,e),Ai(t+"Capture",e)}function Ai(t,e){for(aa[t]=e,t=0;t<e.length;t++)s0.add(e[t])}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mh=Object.prototype.hasOwnProperty,ES=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hg={},Gg={};function xS(t){return mh.call(Gg,t)?!0:mh.call(Hg,t)?!1:ES.test(t)?Gg[t]=!0:(Hg[t]=!0,!1)}function TS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SS(t,e,n,r){if(e===null||typeof e>"u"||TS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var it={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){it[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];it[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){it[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){it[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){it[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){it[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){it[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){it[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){it[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bf=/[\-:]([a-z])/g;function Wf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bf,Wf);it[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bf,Wf);it[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bf,Wf);it[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){it[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});it.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){it[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function qf(t,e,n,r){var s=it.hasOwnProperty(e)?it[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SS(e,n,s,r)&&(n=null),r||s===null?xS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ur=wS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wl=Symbol.for("react.element"),ni=Symbol.for("react.portal"),ri=Symbol.for("react.fragment"),Hf=Symbol.for("react.strict_mode"),gh=Symbol.for("react.profiler"),i0=Symbol.for("react.provider"),o0=Symbol.for("react.context"),Gf=Symbol.for("react.forward_ref"),yh=Symbol.for("react.suspense"),vh=Symbol.for("react.suspense_list"),Kf=Symbol.for("react.memo"),_r=Symbol.for("react.lazy"),a0=Symbol.for("react.offscreen"),Kg=Symbol.iterator;function To(t){return t===null||typeof t!="object"?null:(t=Kg&&t[Kg]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,Td;function Oo(t){if(Td===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Td=e&&e[1]||""}return`
`+Td+t}var Sd=!1;function Id(t,e){if(!t||Sd)return"";Sd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Sd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Oo(t):""}function IS(t){switch(t.tag){case 5:return Oo(t.type);case 16:return Oo("Lazy");case 13:return Oo("Suspense");case 19:return Oo("SuspenseList");case 0:case 2:case 15:return t=Id(t.type,!1),t;case 11:return t=Id(t.type.render,!1),t;case 1:return t=Id(t.type,!0),t;default:return""}}function _h(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ri:return"Fragment";case ni:return"Portal";case gh:return"Profiler";case Hf:return"StrictMode";case yh:return"Suspense";case vh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case o0:return(t.displayName||"Context")+".Consumer";case i0:return(t._context.displayName||"Context")+".Provider";case Gf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kf:return e=t.displayName||null,e!==null?e:_h(t.type)||"Memo";case _r:e=t._payload,t=t._init;try{return _h(t(e))}catch{}}return null}function CS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _h(e);case 8:return e===Hf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function l0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RS(t){var e=l0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function El(t){t._valueTracker||(t._valueTracker=RS(t))}function c0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=l0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function wc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wh(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Qg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=zr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function u0(t,e){e=e.checked,e!=null&&qf(t,"checked",e,!1)}function Eh(t,e){u0(t,e);var n=zr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xh(t,e.type,n):e.hasOwnProperty("defaultValue")&&xh(t,e.type,zr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Yg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xh(t,e,n){(e!=="number"||wc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Do=Array.isArray;function gi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+zr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Th(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(Do(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:zr(n)}}function d0(t,e){var n=zr(e.value),r=zr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Jg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function h0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?h0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xl,f0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xl=xl||document.createElement("div"),xl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function la(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Go={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AS=["Webkit","ms","Moz","O"];Object.keys(Go).forEach(function(t){AS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Go[e]=Go[t]})});function p0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Go.hasOwnProperty(t)&&Go[t]?(""+e).trim():e+"px"}function m0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=p0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var kS=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ih(t,e){if(e){if(kS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function Ch(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rh=null;function Qf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ah=null,yi=null,vi=null;function Zg(t){if(t=Ma(t)){if(typeof Ah!="function")throw Error(q(280));var e=t.stateNode;e&&(e=yu(e),Ah(t.stateNode,t.type,e))}}function g0(t){yi?vi?vi.push(t):vi=[t]:yi=t}function y0(){if(yi){var t=yi,e=vi;if(vi=yi=null,Zg(t),e)for(t=0;t<e.length;t++)Zg(e[t])}}function v0(t,e){return t(e)}function _0(){}var Cd=!1;function w0(t,e,n){if(Cd)return t(e,n);Cd=!0;try{return v0(t,e,n)}finally{Cd=!1,(yi!==null||vi!==null)&&(_0(),y0())}}function ca(t,e){var n=t.stateNode;if(n===null)return null;var r=yu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var kh=!1;if(tr)try{var So={};Object.defineProperty(So,"passive",{get:function(){kh=!0}}),window.addEventListener("test",So,So),window.removeEventListener("test",So,So)}catch{kh=!1}function NS(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Ko=!1,Ec=null,xc=!1,Nh=null,bS={onError:function(t){Ko=!0,Ec=t}};function PS(t,e,n,r,s,i,o,l,u){Ko=!1,Ec=null,NS.apply(bS,arguments)}function jS(t,e,n,r,s,i,o,l,u){if(PS.apply(this,arguments),Ko){if(Ko){var d=Ec;Ko=!1,Ec=null}else throw Error(q(198));xc||(xc=!0,Nh=d)}}function js(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function E0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ey(t){if(js(t)!==t)throw Error(q(188))}function OS(t){var e=t.alternate;if(!e){if(e=js(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ey(s),t;if(i===r)return ey(s),e;i=i.sibling}throw Error(q(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function x0(t){return t=OS(t),t!==null?T0(t):null}function T0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=T0(t);if(e!==null)return e;t=t.sibling}return null}var S0=Bt.unstable_scheduleCallback,ty=Bt.unstable_cancelCallback,DS=Bt.unstable_shouldYield,LS=Bt.unstable_requestPaint,Ue=Bt.unstable_now,VS=Bt.unstable_getCurrentPriorityLevel,Yf=Bt.unstable_ImmediatePriority,I0=Bt.unstable_UserBlockingPriority,Tc=Bt.unstable_NormalPriority,MS=Bt.unstable_LowPriority,C0=Bt.unstable_IdlePriority,fu=null,kn=null;function FS(t){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(fu,t,void 0,(t.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:zS,US=Math.log,$S=Math.LN2;function zS(t){return t>>>=0,t===0?32:31-(US(t)/$S|0)|0}var Tl=64,Sl=4194304;function Lo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Lo(l):(i&=o,i!==0&&(r=Lo(i)))}else o=n&~s,o!==0?r=Lo(o):i!==0&&(r=Lo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mn(e),s=1<<n,r|=t[n],e&=~s;return r}function BS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-mn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=BS(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function bh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function R0(){var t=Tl;return Tl<<=1,!(Tl&4194240)&&(Tl=64),t}function Rd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function La(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mn(e),t[e]=n}function qS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-mn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Xf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var we=0;function A0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var k0,Jf,N0,b0,P0,Ph=!1,Il=[],Nr=null,br=null,Pr=null,ua=new Map,da=new Map,Er=[],HS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ny(t,e){switch(t){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":ua.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":da.delete(e.pointerId)}}function Io(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ma(e),e!==null&&Jf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function GS(t,e,n,r,s){switch(e){case"focusin":return Nr=Io(Nr,t,e,n,r,s),!0;case"dragenter":return br=Io(br,t,e,n,r,s),!0;case"mouseover":return Pr=Io(Pr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ua.set(i,Io(ua.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,da.set(i,Io(da.get(i)||null,t,e,n,r,s)),!0}return!1}function j0(t){var e=ds(t.target);if(e!==null){var n=js(e);if(n!==null){if(e=n.tag,e===13){if(e=E0(n),e!==null){t.blockedOn=e,P0(t.priority,function(){N0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Rh=r,n.target.dispatchEvent(r),Rh=null}else return e=Ma(n),e!==null&&Jf(e),t.blockedOn=n,!1;e.shift()}return!0}function ry(t,e,n){Hl(t)&&n.delete(e)}function KS(){Ph=!1,Nr!==null&&Hl(Nr)&&(Nr=null),br!==null&&Hl(br)&&(br=null),Pr!==null&&Hl(Pr)&&(Pr=null),ua.forEach(ry),da.forEach(ry)}function Co(t,e){t.blockedOn===e&&(t.blockedOn=null,Ph||(Ph=!0,Bt.unstable_scheduleCallback(Bt.unstable_NormalPriority,KS)))}function ha(t){function e(s){return Co(s,t)}if(0<Il.length){Co(Il[0],t);for(var n=1;n<Il.length;n++){var r=Il[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Nr!==null&&Co(Nr,t),br!==null&&Co(br,t),Pr!==null&&Co(Pr,t),ua.forEach(e),da.forEach(e),n=0;n<Er.length;n++)r=Er[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Er.length&&(n=Er[0],n.blockedOn===null);)j0(n),n.blockedOn===null&&Er.shift()}var _i=ur.ReactCurrentBatchConfig,Ic=!0;function QS(t,e,n,r){var s=we,i=_i.transition;_i.transition=null;try{we=1,Zf(t,e,n,r)}finally{we=s,_i.transition=i}}function YS(t,e,n,r){var s=we,i=_i.transition;_i.transition=null;try{we=4,Zf(t,e,n,r)}finally{we=s,_i.transition=i}}function Zf(t,e,n,r){if(Ic){var s=jh(t,e,n,r);if(s===null)Vd(t,e,r,Cc,n),ny(t,r);else if(GS(s,t,e,n,r))r.stopPropagation();else if(ny(t,r),e&4&&-1<HS.indexOf(t)){for(;s!==null;){var i=Ma(s);if(i!==null&&k0(i),i=jh(t,e,n,r),i===null&&Vd(t,e,r,Cc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Vd(t,e,r,null,n)}}var Cc=null;function jh(t,e,n,r){if(Cc=null,t=Qf(r),t=ds(t),t!==null)if(e=js(t),e===null)t=null;else if(n=e.tag,n===13){if(t=E0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cc=t,null}function O0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VS()){case Yf:return 1;case I0:return 4;case Tc:case MS:return 16;case C0:return 536870912;default:return 16}default:return 16}}var Rr=null,ep=null,Gl=null;function D0(){if(Gl)return Gl;var t,e=ep,n=e.length,r,s="value"in Rr?Rr.value:Rr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Gl=s.slice(t,1<r?1-r:void 0)}function Kl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cl(){return!0}function sy(){return!1}function qt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Cl:sy,this.isPropagationStopped=sy,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),e}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tp=qt(Hi),Va=De({},Hi,{view:0,detail:0}),XS=qt(Va),Ad,kd,Ro,pu=De({},Va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:np,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ro&&(Ro&&t.type==="mousemove"?(Ad=t.screenX-Ro.screenX,kd=t.screenY-Ro.screenY):kd=Ad=0,Ro=t),Ad)},movementY:function(t){return"movementY"in t?t.movementY:kd}}),iy=qt(pu),JS=De({},pu,{dataTransfer:0}),ZS=qt(JS),eI=De({},Va,{relatedTarget:0}),Nd=qt(eI),tI=De({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),nI=qt(tI),rI=De({},Hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sI=qt(rI),iI=De({},Hi,{data:0}),oy=qt(iI),oI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lI[t])?!!e[t]:!1}function np(){return cI}var uI=De({},Va,{key:function(t){if(t.key){var e=oI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Kl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?aI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:np,charCode:function(t){return t.type==="keypress"?Kl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dI=qt(uI),hI=De({},pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ay=qt(hI),fI=De({},Va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:np}),pI=qt(fI),mI=De({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),gI=qt(mI),yI=De({},pu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vI=qt(yI),_I=[9,13,27,32],rp=tr&&"CompositionEvent"in window,Qo=null;tr&&"documentMode"in document&&(Qo=document.documentMode);var wI=tr&&"TextEvent"in window&&!Qo,L0=tr&&(!rp||Qo&&8<Qo&&11>=Qo),ly=String.fromCharCode(32),cy=!1;function V0(t,e){switch(t){case"keyup":return _I.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function M0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var si=!1;function EI(t,e){switch(t){case"compositionend":return M0(e);case"keypress":return e.which!==32?null:(cy=!0,ly);case"textInput":return t=e.data,t===ly&&cy?null:t;default:return null}}function xI(t,e){if(si)return t==="compositionend"||!rp&&V0(t,e)?(t=D0(),Gl=ep=Rr=null,si=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return L0&&e.locale!=="ko"?null:e.data;default:return null}}var TI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TI[t.type]:e==="textarea"}function F0(t,e,n,r){g0(r),e=Rc(e,"onChange"),0<e.length&&(n=new tp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yo=null,fa=null;function SI(t){Y0(t,0)}function mu(t){var e=ai(t);if(c0(e))return t}function II(t,e){if(t==="change")return e}var U0=!1;if(tr){var bd;if(tr){var Pd="oninput"in document;if(!Pd){var dy=document.createElement("div");dy.setAttribute("oninput","return;"),Pd=typeof dy.oninput=="function"}bd=Pd}else bd=!1;U0=bd&&(!document.documentMode||9<document.documentMode)}function hy(){Yo&&(Yo.detachEvent("onpropertychange",$0),fa=Yo=null)}function $0(t){if(t.propertyName==="value"&&mu(fa)){var e=[];F0(e,fa,t,Qf(t)),w0(SI,e)}}function CI(t,e,n){t==="focusin"?(hy(),Yo=e,fa=n,Yo.attachEvent("onpropertychange",$0)):t==="focusout"&&hy()}function RI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mu(fa)}function AI(t,e){if(t==="click")return mu(e)}function kI(t,e){if(t==="input"||t==="change")return mu(e)}function NI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vn=typeof Object.is=="function"?Object.is:NI;function pa(t,e){if(vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!mh.call(e,s)||!vn(t[s],e[s]))return!1}return!0}function fy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function py(t,e){var n=fy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fy(n)}}function z0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?z0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function B0(){for(var t=window,e=wc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wc(t.document)}return e}function sp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bI(t){var e=B0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&z0(n.ownerDocument.documentElement,n)){if(r!==null&&sp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=py(n,i);var o=py(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PI=tr&&"documentMode"in document&&11>=document.documentMode,ii=null,Oh=null,Xo=null,Dh=!1;function my(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dh||ii==null||ii!==wc(r)||(r=ii,"selectionStart"in r&&sp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xo&&pa(Xo,r)||(Xo=r,r=Rc(Oh,"onSelect"),0<r.length&&(e=new tp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ii)))}function Rl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var oi={animationend:Rl("Animation","AnimationEnd"),animationiteration:Rl("Animation","AnimationIteration"),animationstart:Rl("Animation","AnimationStart"),transitionend:Rl("Transition","TransitionEnd")},jd={},W0={};tr&&(W0=document.createElement("div").style,"AnimationEvent"in window||(delete oi.animationend.animation,delete oi.animationiteration.animation,delete oi.animationstart.animation),"TransitionEvent"in window||delete oi.transitionend.transition);function gu(t){if(jd[t])return jd[t];if(!oi[t])return t;var e=oi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in W0)return jd[t]=e[n];return t}var q0=gu("animationend"),H0=gu("animationiteration"),G0=gu("animationstart"),K0=gu("transitionend"),Q0=new Map,gy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xr(t,e){Q0.set(t,e),Ps(e,[t])}for(var Od=0;Od<gy.length;Od++){var Dd=gy[Od],jI=Dd.toLowerCase(),OI=Dd[0].toUpperCase()+Dd.slice(1);Xr(jI,"on"+OI)}Xr(q0,"onAnimationEnd");Xr(H0,"onAnimationIteration");Xr(G0,"onAnimationStart");Xr("dblclick","onDoubleClick");Xr("focusin","onFocus");Xr("focusout","onBlur");Xr(K0,"onTransitionEnd");Ai("onMouseEnter",["mouseout","mouseover"]);Ai("onMouseLeave",["mouseout","mouseover"]);Ai("onPointerEnter",["pointerout","pointerover"]);Ai("onPointerLeave",["pointerout","pointerover"]);Ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ps("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vo));function yy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jS(r,e,void 0,t),t.currentTarget=null}function Y0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;yy(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;yy(s,l,d),i=u}}}if(xc)throw t=Nh,xc=!1,Nh=null,t}function Ae(t,e){var n=e[Uh];n===void 0&&(n=e[Uh]=new Set);var r=t+"__bubble";n.has(r)||(X0(e,t,2,!1),n.add(r))}function Ld(t,e,n){var r=0;e&&(r|=4),X0(n,t,r,e)}var Al="_reactListening"+Math.random().toString(36).slice(2);function ma(t){if(!t[Al]){t[Al]=!0,s0.forEach(function(n){n!=="selectionchange"&&(DI.has(n)||Ld(n,!1,t),Ld(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Al]||(e[Al]=!0,Ld("selectionchange",!1,e))}}function X0(t,e,n,r){switch(O0(e)){case 1:var s=QS;break;case 4:s=YS;break;default:s=Zf}n=s.bind(null,e,n,t),s=void 0,!kh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Vd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ds(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}w0(function(){var d=i,h=Qf(n),m=[];e:{var p=Q0.get(t);if(p!==void 0){var _=tp,I=t;switch(t){case"keypress":if(Kl(n)===0)break e;case"keydown":case"keyup":_=dI;break;case"focusin":I="focus",_=Nd;break;case"focusout":I="blur",_=Nd;break;case"beforeblur":case"afterblur":_=Nd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=iy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=ZS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=pI;break;case q0:case H0:case G0:_=nI;break;case K0:_=gI;break;case"scroll":_=XS;break;case"wheel":_=vI;break;case"copy":case"cut":case"paste":_=sI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=ay}var A=(e&4)!==0,b=!A&&t==="scroll",w=A?p!==null?p+"Capture":null:p;A=[];for(var v=d,x;v!==null;){x=v;var k=x.stateNode;if(x.tag===5&&k!==null&&(x=k,w!==null&&(k=ca(v,w),k!=null&&A.push(ga(v,k,x)))),b)break;v=v.return}0<A.length&&(p=new _(p,I,null,n,h),m.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",p&&n!==Rh&&(I=n.relatedTarget||n.fromElement)&&(ds(I)||I[nr]))break e;if((_||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,_?(I=n.relatedTarget||n.toElement,_=d,I=I?ds(I):null,I!==null&&(b=js(I),I!==b||I.tag!==5&&I.tag!==6)&&(I=null)):(_=null,I=d),_!==I)){if(A=iy,k="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(A=ay,k="onPointerLeave",w="onPointerEnter",v="pointer"),b=_==null?p:ai(_),x=I==null?p:ai(I),p=new A(k,v+"leave",_,n,h),p.target=b,p.relatedTarget=x,k=null,ds(h)===d&&(A=new A(w,v+"enter",I,n,h),A.target=x,A.relatedTarget=b,k=A),b=k,_&&I)t:{for(A=_,w=I,v=0,x=A;x;x=Qs(x))v++;for(x=0,k=w;k;k=Qs(k))x++;for(;0<v-x;)A=Qs(A),v--;for(;0<x-v;)w=Qs(w),x--;for(;v--;){if(A===w||w!==null&&A===w.alternate)break t;A=Qs(A),w=Qs(w)}A=null}else A=null;_!==null&&vy(m,p,_,A,!1),I!==null&&b!==null&&vy(m,b,I,A,!0)}}e:{if(p=d?ai(d):window,_=p.nodeName&&p.nodeName.toLowerCase(),_==="select"||_==="input"&&p.type==="file")var D=II;else if(uy(p))if(U0)D=kI;else{D=RI;var V=CI}else(_=p.nodeName)&&_.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=AI);if(D&&(D=D(t,d))){F0(m,D,n,h);break e}V&&V(t,p,d),t==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&xh(p,"number",p.value)}switch(V=d?ai(d):window,t){case"focusin":(uy(V)||V.contentEditable==="true")&&(ii=V,Oh=d,Xo=null);break;case"focusout":Xo=Oh=ii=null;break;case"mousedown":Dh=!0;break;case"contextmenu":case"mouseup":case"dragend":Dh=!1,my(m,n,h);break;case"selectionchange":if(PI)break;case"keydown":case"keyup":my(m,n,h)}var E;if(rp)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else si?V0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(L0&&n.locale!=="ko"&&(si||y!=="onCompositionStart"?y==="onCompositionEnd"&&si&&(E=D0()):(Rr=h,ep="value"in Rr?Rr.value:Rr.textContent,si=!0)),V=Rc(d,y),0<V.length&&(y=new oy(y,t,null,n,h),m.push({event:y,listeners:V}),E?y.data=E:(E=M0(n),E!==null&&(y.data=E)))),(E=wI?EI(t,n):xI(t,n))&&(d=Rc(d,"onBeforeInput"),0<d.length&&(h=new oy("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=E))}Y0(m,e)})}function ga(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Rc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ca(t,n),i!=null&&r.unshift(ga(t,i,s)),i=ca(t,e),i!=null&&r.push(ga(t,i,s))),t=t.return}return r}function Qs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=ca(n,i),u!=null&&o.unshift(ga(n,u,l))):s||(u=ca(n,i),u!=null&&o.push(ga(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var LI=/\r\n?/g,VI=/\u0000|\uFFFD/g;function _y(t){return(typeof t=="string"?t:""+t).replace(LI,`
`).replace(VI,"")}function kl(t,e,n){if(e=_y(e),_y(t)!==e&&n)throw Error(q(425))}function Ac(){}var Lh=null,Vh=null;function Mh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fh=typeof setTimeout=="function"?setTimeout:void 0,MI=typeof clearTimeout=="function"?clearTimeout:void 0,wy=typeof Promise=="function"?Promise:void 0,FI=typeof queueMicrotask=="function"?queueMicrotask:typeof wy<"u"?function(t){return wy.resolve(null).then(t).catch(UI)}:Fh;function UI(t){setTimeout(function(){throw t})}function Md(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ha(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ha(e)}function jr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ey(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gi=Math.random().toString(36).slice(2),An="__reactFiber$"+Gi,ya="__reactProps$"+Gi,nr="__reactContainer$"+Gi,Uh="__reactEvents$"+Gi,$I="__reactListeners$"+Gi,zI="__reactHandles$"+Gi;function ds(t){var e=t[An];if(e)return e;for(var n=t.parentNode;n;){if(e=n[nr]||n[An]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ey(t);t!==null;){if(n=t[An])return n;t=Ey(t)}return e}t=n,n=t.parentNode}return null}function Ma(t){return t=t[An]||t[nr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ai(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function yu(t){return t[ya]||null}var $h=[],li=-1;function Jr(t){return{current:t}}function ke(t){0>li||(t.current=$h[li],$h[li]=null,li--)}function Ce(t,e){li++,$h[li]=t.current,t.current=e}var Br={},vt=Jr(Br),Pt=Jr(!1),ws=Br;function ki(t,e){var n=t.type.contextTypes;if(!n)return Br;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function jt(t){return t=t.childContextTypes,t!=null}function kc(){ke(Pt),ke(vt)}function xy(t,e,n){if(vt.current!==Br)throw Error(q(168));Ce(vt,e),Ce(Pt,n)}function J0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(q(108,CS(t)||"Unknown",s));return De({},n,r)}function Nc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Br,ws=vt.current,Ce(vt,t),Ce(Pt,Pt.current),!0}function Ty(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=J0(t,e,ws),r.__reactInternalMemoizedMergedChildContext=t,ke(Pt),ke(vt),Ce(vt,t)):ke(Pt),Ce(Pt,n)}var Wn=null,vu=!1,Fd=!1;function Z0(t){Wn===null?Wn=[t]:Wn.push(t)}function BI(t){vu=!0,Z0(t)}function Zr(){if(!Fd&&Wn!==null){Fd=!0;var t=0,e=we;try{var n=Wn;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Wn=null,vu=!1}catch(s){throw Wn!==null&&(Wn=Wn.slice(t+1)),S0(Yf,Zr),s}finally{we=e,Fd=!1}}return null}var ci=[],ui=0,bc=null,Pc=0,Kt=[],Qt=0,Es=null,Gn=1,Kn="";function ls(t,e){ci[ui++]=Pc,ci[ui++]=bc,bc=t,Pc=e}function ew(t,e,n){Kt[Qt++]=Gn,Kt[Qt++]=Kn,Kt[Qt++]=Es,Es=t;var r=Gn;t=Kn;var s=32-mn(r)-1;r&=~(1<<s),n+=1;var i=32-mn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Gn=1<<32-mn(e)+s|n<<s|r,Kn=i+t}else Gn=1<<i|n<<s|r,Kn=t}function ip(t){t.return!==null&&(ls(t,1),ew(t,1,0))}function op(t){for(;t===bc;)bc=ci[--ui],ci[ui]=null,Pc=ci[--ui],ci[ui]=null;for(;t===Es;)Es=Kt[--Qt],Kt[Qt]=null,Kn=Kt[--Qt],Kt[Qt]=null,Gn=Kt[--Qt],Kt[Qt]=null}var zt=null,Ut=null,be=!1,cn=null;function tw(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Sy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zt=t,Ut=jr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zt=t,Ut=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Es!==null?{id:Gn,overflow:Kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zt=t,Ut=null,!0):!1;default:return!1}}function zh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Bh(t){if(be){var e=Ut;if(e){var n=e;if(!Sy(t,e)){if(zh(t))throw Error(q(418));e=jr(n.nextSibling);var r=zt;e&&Sy(t,e)?tw(r,n):(t.flags=t.flags&-4097|2,be=!1,zt=t)}}else{if(zh(t))throw Error(q(418));t.flags=t.flags&-4097|2,be=!1,zt=t}}}function Iy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zt=t}function Nl(t){if(t!==zt)return!1;if(!be)return Iy(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mh(t.type,t.memoizedProps)),e&&(e=Ut)){if(zh(t))throw nw(),Error(q(418));for(;e;)tw(t,e),e=jr(e.nextSibling)}if(Iy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ut=jr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ut=null}}else Ut=zt?jr(t.stateNode.nextSibling):null;return!0}function nw(){for(var t=Ut;t;)t=jr(t.nextSibling)}function Ni(){Ut=zt=null,be=!1}function ap(t){cn===null?cn=[t]:cn.push(t)}var WI=ur.ReactCurrentBatchConfig;function Ao(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function bl(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cy(t){var e=t._init;return e(t._payload)}function rw(t){function e(w,v){if(t){var x=w.deletions;x===null?(w.deletions=[v],w.flags|=16):x.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=Vr(w,v),w.index=0,w.sibling=null,w}function i(w,v,x){return w.index=x,t?(x=w.alternate,x!==null?(x=x.index,x<v?(w.flags|=2,v):x):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,v,x,k){return v===null||v.tag!==6?(v=Hd(x,w.mode,k),v.return=w,v):(v=s(v,x),v.return=w,v)}function u(w,v,x,k){var D=x.type;return D===ri?h(w,v,x.props.children,k,x.key):v!==null&&(v.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===_r&&Cy(D)===v.type)?(k=s(v,x.props),k.ref=Ao(w,v,x),k.return=w,k):(k=tc(x.type,x.key,x.props,null,w.mode,k),k.ref=Ao(w,v,x),k.return=w,k)}function d(w,v,x,k){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=Gd(x,w.mode,k),v.return=w,v):(v=s(v,x.children||[]),v.return=w,v)}function h(w,v,x,k,D){return v===null||v.tag!==7?(v=ys(x,w.mode,k,D),v.return=w,v):(v=s(v,x),v.return=w,v)}function m(w,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Hd(""+v,w.mode,x),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case wl:return x=tc(v.type,v.key,v.props,null,w.mode,x),x.ref=Ao(w,null,v),x.return=w,x;case ni:return v=Gd(v,w.mode,x),v.return=w,v;case _r:var k=v._init;return m(w,k(v._payload),x)}if(Do(v)||To(v))return v=ys(v,w.mode,x,null),v.return=w,v;bl(w,v)}return null}function p(w,v,x,k){var D=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return D!==null?null:l(w,v,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case wl:return x.key===D?u(w,v,x,k):null;case ni:return x.key===D?d(w,v,x,k):null;case _r:return D=x._init,p(w,v,D(x._payload),k)}if(Do(x)||To(x))return D!==null?null:h(w,v,x,k,null);bl(w,x)}return null}function _(w,v,x,k,D){if(typeof k=="string"&&k!==""||typeof k=="number")return w=w.get(x)||null,l(v,w,""+k,D);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case wl:return w=w.get(k.key===null?x:k.key)||null,u(v,w,k,D);case ni:return w=w.get(k.key===null?x:k.key)||null,d(v,w,k,D);case _r:var V=k._init;return _(w,v,x,V(k._payload),D)}if(Do(k)||To(k))return w=w.get(x)||null,h(v,w,k,D,null);bl(v,k)}return null}function I(w,v,x,k){for(var D=null,V=null,E=v,y=v=0,T=null;E!==null&&y<x.length;y++){E.index>y?(T=E,E=null):T=E.sibling;var R=p(w,E,x[y],k);if(R===null){E===null&&(E=T);break}t&&E&&R.alternate===null&&e(w,E),v=i(R,v,y),V===null?D=R:V.sibling=R,V=R,E=T}if(y===x.length)return n(w,E),be&&ls(w,y),D;if(E===null){for(;y<x.length;y++)E=m(w,x[y],k),E!==null&&(v=i(E,v,y),V===null?D=E:V.sibling=E,V=E);return be&&ls(w,y),D}for(E=r(w,E);y<x.length;y++)T=_(E,w,y,x[y],k),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?y:T.key),v=i(T,v,y),V===null?D=T:V.sibling=T,V=T);return t&&E.forEach(function(j){return e(w,j)}),be&&ls(w,y),D}function A(w,v,x,k){var D=To(x);if(typeof D!="function")throw Error(q(150));if(x=D.call(x),x==null)throw Error(q(151));for(var V=D=null,E=v,y=v=0,T=null,R=x.next();E!==null&&!R.done;y++,R=x.next()){E.index>y?(T=E,E=null):T=E.sibling;var j=p(w,E,R.value,k);if(j===null){E===null&&(E=T);break}t&&E&&j.alternate===null&&e(w,E),v=i(j,v,y),V===null?D=j:V.sibling=j,V=j,E=T}if(R.done)return n(w,E),be&&ls(w,y),D;if(E===null){for(;!R.done;y++,R=x.next())R=m(w,R.value,k),R!==null&&(v=i(R,v,y),V===null?D=R:V.sibling=R,V=R);return be&&ls(w,y),D}for(E=r(w,E);!R.done;y++,R=x.next())R=_(E,w,y,R.value,k),R!==null&&(t&&R.alternate!==null&&E.delete(R.key===null?y:R.key),v=i(R,v,y),V===null?D=R:V.sibling=R,V=R);return t&&E.forEach(function(O){return e(w,O)}),be&&ls(w,y),D}function b(w,v,x,k){if(typeof x=="object"&&x!==null&&x.type===ri&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case wl:e:{for(var D=x.key,V=v;V!==null;){if(V.key===D){if(D=x.type,D===ri){if(V.tag===7){n(w,V.sibling),v=s(V,x.props.children),v.return=w,w=v;break e}}else if(V.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===_r&&Cy(D)===V.type){n(w,V.sibling),v=s(V,x.props),v.ref=Ao(w,V,x),v.return=w,w=v;break e}n(w,V);break}else e(w,V);V=V.sibling}x.type===ri?(v=ys(x.props.children,w.mode,k,x.key),v.return=w,w=v):(k=tc(x.type,x.key,x.props,null,w.mode,k),k.ref=Ao(w,v,x),k.return=w,w=k)}return o(w);case ni:e:{for(V=x.key;v!==null;){if(v.key===V)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(w,v.sibling),v=s(v,x.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=Gd(x,w.mode,k),v.return=w,w=v}return o(w);case _r:return V=x._init,b(w,v,V(x._payload),k)}if(Do(x))return I(w,v,x,k);if(To(x))return A(w,v,x,k);bl(w,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(w,v.sibling),v=s(v,x),v.return=w,w=v):(n(w,v),v=Hd(x,w.mode,k),v.return=w,w=v),o(w)):n(w,v)}return b}var bi=rw(!0),sw=rw(!1),jc=Jr(null),Oc=null,di=null,lp=null;function cp(){lp=di=Oc=null}function up(t){var e=jc.current;ke(jc),t._currentValue=e}function Wh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wi(t,e){Oc=t,lp=di=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bt=!0),t.firstContext=null)}function Zt(t){var e=t._currentValue;if(lp!==t)if(t={context:t,memoizedValue:e,next:null},di===null){if(Oc===null)throw Error(q(308));di=t,Oc.dependencies={lanes:0,firstContext:t}}else di=di.next=t;return e}var hs=null;function dp(t){hs===null?hs=[t]:hs.push(t)}function iw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,dp(e)):(n.next=s.next,s.next=n),e.interleaved=n,rr(t,r)}function rr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wr=!1;function hp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ow(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Or(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,rr(t,n)}return s=r.interleaved,s===null?(e.next=e,dp(r)):(e.next=s.next,s.next=e),r.interleaved=e,rr(t,n)}function Ql(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xf(t,n)}}function Ry(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dc(t,e,n,r){var s=t.updateQueue;wr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,h=d=u=null,l=i;do{var p=l.lane,_=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var I=t,A=l;switch(p=e,_=n,A.tag){case 1:if(I=A.payload,typeof I=="function"){m=I.call(_,m,p);break e}m=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=A.payload,p=typeof I=="function"?I.call(_,m,p):I,p==null)break e;m=De({},m,p);break e;case 2:wr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else _={eventTime:_,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=_,u=m):h=h.next=_,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(1);if(h===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ts|=o,t.lanes=o,t.memoizedState=m}}function Ay(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(q(191,s));s.call(r)}}}var Fa={},Nn=Jr(Fa),va=Jr(Fa),_a=Jr(Fa);function fs(t){if(t===Fa)throw Error(q(174));return t}function fp(t,e){switch(Ce(_a,e),Ce(va,t),Ce(Nn,Fa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Sh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Sh(e,t)}ke(Nn),Ce(Nn,e)}function Pi(){ke(Nn),ke(va),ke(_a)}function aw(t){fs(_a.current);var e=fs(Nn.current),n=Sh(e,t.type);e!==n&&(Ce(va,t),Ce(Nn,n))}function pp(t){va.current===t&&(ke(Nn),ke(va))}var je=Jr(0);function Lc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ud=[];function mp(){for(var t=0;t<Ud.length;t++)Ud[t]._workInProgressVersionPrimary=null;Ud.length=0}var Yl=ur.ReactCurrentDispatcher,$d=ur.ReactCurrentBatchConfig,xs=0,Oe=null,We=null,Xe=null,Vc=!1,Jo=!1,wa=0,qI=0;function dt(){throw Error(q(321))}function gp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vn(t[n],e[n]))return!1;return!0}function yp(t,e,n,r,s,i){if(xs=i,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yl.current=t===null||t.memoizedState===null?QI:YI,t=n(r,s),Jo){i=0;do{if(Jo=!1,wa=0,25<=i)throw Error(q(301));i+=1,Xe=We=null,e.updateQueue=null,Yl.current=XI,t=n(r,s)}while(Jo)}if(Yl.current=Mc,e=We!==null&&We.next!==null,xs=0,Xe=We=Oe=null,Vc=!1,e)throw Error(q(300));return t}function vp(){var t=wa!==0;return wa=0,t}function Cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Oe.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function en(){if(We===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Xe===null?Oe.memoizedState:Xe.next;if(e!==null)Xe=e,We=t;else{if(t===null)throw Error(q(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Xe===null?Oe.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Ea(t,e){return typeof e=="function"?e(t):e}function zd(t){var e=en(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=We,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var h=d.lane;if((xs&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Oe.lanes|=h,Ts|=h}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,vn(r,e.memoizedState)||(bt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Oe.lanes|=i,Ts|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Bd(t){var e=en(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);vn(i,e.memoizedState)||(bt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function lw(){}function cw(t,e){var n=Oe,r=en(),s=e(),i=!vn(r.memoizedState,s);if(i&&(r.memoizedState=s,bt=!0),r=r.queue,_p(hw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,xa(9,dw.bind(null,n,r,s,e),void 0,null),Ze===null)throw Error(q(349));xs&30||uw(n,e,s)}return s}function uw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function dw(t,e,n,r){e.value=n,e.getSnapshot=r,fw(e)&&pw(t)}function hw(t,e,n){return n(function(){fw(e)&&pw(t)})}function fw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vn(t,n)}catch{return!0}}function pw(t){var e=rr(t,1);e!==null&&gn(e,t,1,-1)}function ky(t){var e=Cn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:t},e.queue=t,t=t.dispatch=KI.bind(null,Oe,t),[e.memoizedState,t]}function xa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function mw(){return en().memoizedState}function Xl(t,e,n,r){var s=Cn();Oe.flags|=t,s.memoizedState=xa(1|e,n,void 0,r===void 0?null:r)}function _u(t,e,n,r){var s=en();r=r===void 0?null:r;var i=void 0;if(We!==null){var o=We.memoizedState;if(i=o.destroy,r!==null&&gp(r,o.deps)){s.memoizedState=xa(e,n,i,r);return}}Oe.flags|=t,s.memoizedState=xa(1|e,n,i,r)}function Ny(t,e){return Xl(8390656,8,t,e)}function _p(t,e){return _u(2048,8,t,e)}function gw(t,e){return _u(4,2,t,e)}function yw(t,e){return _u(4,4,t,e)}function vw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _w(t,e,n){return n=n!=null?n.concat([t]):null,_u(4,4,vw.bind(null,e,t),n)}function wp(){}function ww(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ew(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function xw(t,e,n){return xs&21?(vn(n,e)||(n=R0(),Oe.lanes|=n,Ts|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bt=!0),t.memoizedState=n)}function HI(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=$d.transition;$d.transition={};try{t(!1),e()}finally{we=n,$d.transition=r}}function Tw(){return en().memoizedState}function GI(t,e,n){var r=Lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Sw(t))Iw(e,n);else if(n=iw(t,e,n,r),n!==null){var s=xt();gn(n,t,r,s),Cw(n,e,r)}}function KI(t,e,n){var r=Lr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Sw(t))Iw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,vn(l,o)){var u=e.interleaved;u===null?(s.next=s,dp(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=iw(t,e,s,r),n!==null&&(s=xt(),gn(n,t,r,s),Cw(n,e,r))}}function Sw(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function Iw(t,e){Jo=Vc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Cw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xf(t,n)}}var Mc={readContext:Zt,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},QI={readContext:Zt,useCallback:function(t,e){return Cn().memoizedState=[t,e===void 0?null:e],t},useContext:Zt,useEffect:Ny,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xl(4194308,4,vw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xl(4,2,t,e)},useMemo:function(t,e){var n=Cn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Cn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=GI.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=Cn();return t={current:t},e.memoizedState=t},useState:ky,useDebugValue:wp,useDeferredValue:function(t){return Cn().memoizedState=t},useTransition:function(){var t=ky(!1),e=t[0];return t=HI.bind(null,t[1]),Cn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,s=Cn();if(be){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),Ze===null)throw Error(q(349));xs&30||uw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ny(hw.bind(null,r,i,t),[t]),r.flags|=2048,xa(9,dw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Cn(),e=Ze.identifierPrefix;if(be){var n=Kn,r=Gn;n=(r&~(1<<32-mn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=wa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},YI={readContext:Zt,useCallback:ww,useContext:Zt,useEffect:_p,useImperativeHandle:_w,useInsertionEffect:gw,useLayoutEffect:yw,useMemo:Ew,useReducer:zd,useRef:mw,useState:function(){return zd(Ea)},useDebugValue:wp,useDeferredValue:function(t){var e=en();return xw(e,We.memoizedState,t)},useTransition:function(){var t=zd(Ea)[0],e=en().memoizedState;return[t,e]},useMutableSource:lw,useSyncExternalStore:cw,useId:Tw,unstable_isNewReconciler:!1},XI={readContext:Zt,useCallback:ww,useContext:Zt,useEffect:_p,useImperativeHandle:_w,useInsertionEffect:gw,useLayoutEffect:yw,useMemo:Ew,useReducer:Bd,useRef:mw,useState:function(){return Bd(Ea)},useDebugValue:wp,useDeferredValue:function(t){var e=en();return We===null?e.memoizedState=t:xw(e,We.memoizedState,t)},useTransition:function(){var t=Bd(Ea)[0],e=en().memoizedState;return[t,e]},useMutableSource:lw,useSyncExternalStore:cw,useId:Tw,unstable_isNewReconciler:!1};function on(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wu={isMounted:function(t){return(t=t._reactInternals)?js(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xt(),s=Lr(t),i=Xn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Or(t,i,s),e!==null&&(gn(e,t,s,r),Ql(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xt(),s=Lr(t),i=Xn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Or(t,i,s),e!==null&&(gn(e,t,s,r),Ql(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xt(),r=Lr(t),s=Xn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Or(t,s,r),e!==null&&(gn(e,t,r,n),Ql(e,t,r))}};function by(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!pa(n,r)||!pa(s,i):!0}function Rw(t,e,n){var r=!1,s=Br,i=e.contextType;return typeof i=="object"&&i!==null?i=Zt(i):(s=jt(e)?ws:vt.current,r=e.contextTypes,i=(r=r!=null)?ki(t,s):Br),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Py(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wu.enqueueReplaceState(e,e.state,null)}function Hh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},hp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Zt(i):(i=jt(e)?ws:vt.current,s.context=ki(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(qh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&wu.enqueueReplaceState(s,s.state,null),Dc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ji(t,e){try{var n="",r=e;do n+=IS(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Wd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Gh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var JI=typeof WeakMap=="function"?WeakMap:Map;function Aw(t,e,n){n=Xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Uc||(Uc=!0,rf=r),Gh(t,e)},n}function kw(t,e,n){n=Xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Gh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Gh(t,e),typeof r!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function jy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new JI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=hC.bind(null,t,e,n),e.then(t,t))}function Oy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Dy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xn(-1,1),e.tag=2,Or(n,e,1))),n.lanes|=1),t)}var ZI=ur.ReactCurrentOwner,bt=!1;function Et(t,e,n,r){e.child=t===null?sw(e,null,n,r):bi(e,t.child,n,r)}function Ly(t,e,n,r,s){n=n.render;var i=e.ref;return wi(e,s),r=yp(t,e,n,r,i,s),n=vp(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,sr(t,e,s)):(be&&n&&ip(e),e.flags|=1,Et(t,e,r,s),e.child)}function Vy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ap(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Nw(t,e,i,r,s)):(t=tc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:pa,n(o,r)&&t.ref===e.ref)return sr(t,e,s)}return e.flags|=1,t=Vr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Nw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(pa(i,r)&&t.ref===e.ref)if(bt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(bt=!0);else return e.lanes=t.lanes,sr(t,e,s)}return Kh(t,e,n,r,s)}function bw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(fi,Ft),Ft|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(fi,Ft),Ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ce(fi,Ft),Ft|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ce(fi,Ft),Ft|=r;return Et(t,e,s,n),e.child}function Pw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Kh(t,e,n,r,s){var i=jt(n)?ws:vt.current;return i=ki(e,i),wi(e,s),n=yp(t,e,n,r,i,s),r=vp(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,sr(t,e,s)):(be&&r&&ip(e),e.flags|=1,Et(t,e,n,s),e.child)}function My(t,e,n,r,s){if(jt(n)){var i=!0;Nc(e)}else i=!1;if(wi(e,s),e.stateNode===null)Jl(t,e),Rw(e,n,r),Hh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Zt(d):(d=jt(n)?ws:vt.current,d=ki(e,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Py(e,o,r,d),wr=!1;var p=e.memoizedState;o.state=p,Dc(e,r,o,s),u=e.memoizedState,l!==r||p!==u||Pt.current||wr?(typeof h=="function"&&(qh(e,n,h,r),u=e.memoizedState),(l=wr||by(e,n,l,r,p,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ow(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:on(e.type,l),o.props=d,m=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Zt(u):(u=jt(n)?ws:vt.current,u=ki(e,u));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||p!==u)&&Py(e,o,r,u),wr=!1,p=e.memoizedState,o.state=p,Dc(e,r,o,s);var I=e.memoizedState;l!==m||p!==I||Pt.current||wr?(typeof _=="function"&&(qh(e,n,_,r),I=e.memoizedState),(d=wr||by(e,n,d,r,p,I,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Qh(t,e,n,r,i,s)}function Qh(t,e,n,r,s,i){Pw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Ty(e,n,!1),sr(t,e,i);r=e.stateNode,ZI.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=bi(e,t.child,null,i),e.child=bi(e,null,l,i)):Et(t,e,l,i),e.memoizedState=r.state,s&&Ty(e,n,!0),e.child}function jw(t){var e=t.stateNode;e.pendingContext?xy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&xy(t,e.context,!1),fp(t,e.containerInfo)}function Fy(t,e,n,r,s){return Ni(),ap(s),e.flags|=256,Et(t,e,n,r),e.child}var Yh={dehydrated:null,treeContext:null,retryLane:0};function Xh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ow(t,e,n){var r=e.pendingProps,s=je.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ce(je,s&1),t===null)return Bh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Tu(o,r,0,null),t=ys(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Xh(n),e.memoizedState=Yh,t):Ep(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return eC(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Vr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Vr(l,i):(i=ys(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Xh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Yh,r}return i=t.child,t=i.sibling,r=Vr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ep(t,e){return e=Tu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pl(t,e,n,r){return r!==null&&ap(r),bi(e,t.child,null,n),t=Ep(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function eC(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Wd(Error(q(422))),Pl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Tu({mode:"visible",children:r.children},s,0,null),i=ys(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&bi(e,t.child,null,o),e.child.memoizedState=Xh(o),e.memoizedState=Yh,i);if(!(e.mode&1))return Pl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(q(419)),r=Wd(i,r,void 0),Pl(t,e,o,r)}if(l=(o&t.childLanes)!==0,bt||l){if(r=Ze,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,rr(t,s),gn(r,t,s,-1))}return Rp(),r=Wd(Error(q(421))),Pl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=fC.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ut=jr(s.nextSibling),zt=e,be=!0,cn=null,t!==null&&(Kt[Qt++]=Gn,Kt[Qt++]=Kn,Kt[Qt++]=Es,Gn=t.id,Kn=t.overflow,Es=e),e=Ep(e,r.children),e.flags|=4096,e)}function Uy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Wh(t.return,e,n)}function qd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Dw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Et(t,e,r.children,n),r=je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Uy(t,n,e);else if(t.tag===19)Uy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(je,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Lc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),qd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Lc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}qd(e,!0,n,null,i);break;case"together":qd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function sr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ts|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=Vr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function tC(t,e,n){switch(e.tag){case 3:jw(e),Ni();break;case 5:aw(e);break;case 1:jt(e.type)&&Nc(e);break;case 4:fp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ce(jc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?Ow(t,e,n):(Ce(je,je.current&1),t=sr(t,e,n),t!==null?t.sibling:null);Ce(je,je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Dw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ce(je,je.current),r)break;return null;case 22:case 23:return e.lanes=0,bw(t,e,n)}return sr(t,e,n)}var Lw,Jh,Vw,Mw;Lw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jh=function(){};Vw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,fs(Nn.current);var i=null;switch(n){case"input":s=wh(t,s),r=wh(t,r),i=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),i=[];break;case"textarea":s=Th(t,s),r=Th(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ac)}Ih(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(aa.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(aa.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ae("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Mw=function(t,e,n,r){n!==r&&(e.flags|=4)};function ko(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function nC(t,e,n){var r=e.pendingProps;switch(op(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(e),null;case 1:return jt(e.type)&&kc(),ht(e),null;case 3:return r=e.stateNode,Pi(),ke(Pt),ke(vt),mp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Nl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cn!==null&&(af(cn),cn=null))),Jh(t,e),ht(e),null;case 5:pp(e);var s=fs(_a.current);if(n=e.type,t!==null&&e.stateNode!=null)Vw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return ht(e),null}if(t=fs(Nn.current),Nl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[An]=e,r[ya]=i,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(s=0;s<Vo.length;s++)Ae(Vo[s],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":Qg(r,i),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ae("invalid",r);break;case"textarea":Xg(r,i),Ae("invalid",r)}Ih(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&kl(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&kl(r.textContent,l,t),s=["children",""+l]):aa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ae("scroll",r)}switch(n){case"input":El(r),Yg(r,i,!0);break;case"textarea":El(r),Jg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ac)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=h0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[An]=e,t[ya]=r,Lw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ch(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),s=r;break;case"iframe":case"object":case"embed":Ae("load",t),s=r;break;case"video":case"audio":for(s=0;s<Vo.length;s++)Ae(Vo[s],t);s=r;break;case"source":Ae("error",t),s=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),s=r;break;case"details":Ae("toggle",t),s=r;break;case"input":Qg(t,r),s=wh(t,r),Ae("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":Xg(t,r),s=Th(t,r),Ae("invalid",t);break;default:s=r}Ih(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?m0(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&f0(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&la(t,u):typeof u=="number"&&la(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(aa.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ae("scroll",t):u!=null&&qf(t,i,u,o))}switch(n){case"input":El(t),Yg(t,r,!1);break;case"textarea":El(t),Jg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+zr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?gi(t,!!r.multiple,i,!1):r.defaultValue!=null&&gi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ac)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ht(e),null;case 6:if(t&&e.stateNode!=null)Mw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=fs(_a.current),fs(Nn.current),Nl(e)){if(r=e.stateNode,n=e.memoizedProps,r[An]=e,(i=r.nodeValue!==n)&&(t=zt,t!==null))switch(t.tag){case 3:kl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[An]=e,e.stateNode=r}return ht(e),null;case 13:if(ke(je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&Ut!==null&&e.mode&1&&!(e.flags&128))nw(),Ni(),e.flags|=98560,i=!1;else if(i=Nl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[An]=e}else Ni(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ht(e),i=!1}else cn!==null&&(af(cn),cn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?qe===0&&(qe=3):Rp())),e.updateQueue!==null&&(e.flags|=4),ht(e),null);case 4:return Pi(),Jh(t,e),t===null&&ma(e.stateNode.containerInfo),ht(e),null;case 10:return up(e.type._context),ht(e),null;case 17:return jt(e.type)&&kc(),ht(e),null;case 19:if(ke(je),i=e.memoizedState,i===null)return ht(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ko(i,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Lc(t),o!==null){for(e.flags|=128,ko(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(je,je.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ue()>Oi&&(e.flags|=128,r=!0,ko(i,!1),e.lanes=4194304)}else{if(!r)if(t=Lc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ko(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!be)return ht(e),null}else 2*Ue()-i.renderingStartTime>Oi&&n!==1073741824&&(e.flags|=128,r=!0,ko(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ue(),e.sibling=null,n=je.current,Ce(je,r?n&1|2:n&1),e):(ht(e),null);case 22:case 23:return Cp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ft&1073741824&&(ht(e),e.subtreeFlags&6&&(e.flags|=8192)):ht(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function rC(t,e){switch(op(e),e.tag){case 1:return jt(e.type)&&kc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pi(),ke(Pt),ke(vt),mp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pp(e),null;case 13:if(ke(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));Ni()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(je),null;case 4:return Pi(),null;case 10:return up(e.type._context),null;case 22:case 23:return Cp(),null;case 24:return null;default:return null}}var jl=!1,gt=!1,sC=typeof WeakSet=="function"?WeakSet:Set,Z=null;function hi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function Zh(t,e,n){try{n()}catch(r){Me(t,e,r)}}var $y=!1;function iC(t,e){if(Lh=Ic,t=B0(),sp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,h=0,m=t,p=null;t:for(;;){for(var _;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(_=m.firstChild)!==null;)p=m,m=_;for(;;){if(m===t)break t;if(p===n&&++d===s&&(l=o),p===i&&++h===r&&(u=o),(_=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vh={focusedElem:t,selectionRange:n},Ic=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var A=I.memoizedProps,b=I.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?A:on(e.type,A),b);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(k){Me(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return I=$y,$y=!1,I}function Zo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Zh(e,n,i)}s=s.next}while(s!==r)}}function Eu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ef(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Fw(t){var e=t.alternate;e!==null&&(t.alternate=null,Fw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[An],delete e[ya],delete e[Uh],delete e[$I],delete e[zI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Uw(t){return t.tag===5||t.tag===3||t.tag===4}function zy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Uw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ac));else if(r!==4&&(t=t.child,t!==null))for(tf(t,e,n),t=t.sibling;t!==null;)tf(t,e,n),t=t.sibling}function nf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(nf(t,e,n),t=t.sibling;t!==null;)nf(t,e,n),t=t.sibling}var tt=null,an=!1;function yr(t,e,n){for(n=n.child;n!==null;)$w(t,e,n),n=n.sibling}function $w(t,e,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(fu,n)}catch{}switch(n.tag){case 5:gt||hi(n,e);case 6:var r=tt,s=an;tt=null,yr(t,e,n),tt=r,an=s,tt!==null&&(an?(t=tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(an?(t=tt,n=n.stateNode,t.nodeType===8?Md(t.parentNode,n):t.nodeType===1&&Md(t,n),ha(t)):Md(tt,n.stateNode));break;case 4:r=tt,s=an,tt=n.stateNode.containerInfo,an=!0,yr(t,e,n),tt=r,an=s;break;case 0:case 11:case 14:case 15:if(!gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Zh(n,e,o),s=s.next}while(s!==r)}yr(t,e,n);break;case 1:if(!gt&&(hi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Me(n,e,l)}yr(t,e,n);break;case 21:yr(t,e,n);break;case 22:n.mode&1?(gt=(r=gt)||n.memoizedState!==null,yr(t,e,n),gt=r):yr(t,e,n);break;default:yr(t,e,n)}}function By(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new sC),e.forEach(function(r){var s=pC.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function rn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:tt=l.stateNode,an=!1;break e;case 3:tt=l.stateNode.containerInfo,an=!0;break e;case 4:tt=l.stateNode.containerInfo,an=!0;break e}l=l.return}if(tt===null)throw Error(q(160));$w(i,o,s),tt=null,an=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Me(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zw(e,t),e=e.sibling}function zw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rn(e,t),Sn(t),r&4){try{Zo(3,t,t.return),Eu(3,t)}catch(A){Me(t,t.return,A)}try{Zo(5,t,t.return)}catch(A){Me(t,t.return,A)}}break;case 1:rn(e,t),Sn(t),r&512&&n!==null&&hi(n,n.return);break;case 5:if(rn(e,t),Sn(t),r&512&&n!==null&&hi(n,n.return),t.flags&32){var s=t.stateNode;try{la(s,"")}catch(A){Me(t,t.return,A)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&u0(s,i),Ch(l,o);var d=Ch(l,i);for(o=0;o<u.length;o+=2){var h=u[o],m=u[o+1];h==="style"?m0(s,m):h==="dangerouslySetInnerHTML"?f0(s,m):h==="children"?la(s,m):qf(s,h,m,d)}switch(l){case"input":Eh(s,i);break;case"textarea":d0(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?gi(s,!!i.multiple,_,!1):p!==!!i.multiple&&(i.defaultValue!=null?gi(s,!!i.multiple,i.defaultValue,!0):gi(s,!!i.multiple,i.multiple?[]:"",!1))}s[ya]=i}catch(A){Me(t,t.return,A)}}break;case 6:if(rn(e,t),Sn(t),r&4){if(t.stateNode===null)throw Error(q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(A){Me(t,t.return,A)}}break;case 3:if(rn(e,t),Sn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ha(e.containerInfo)}catch(A){Me(t,t.return,A)}break;case 4:rn(e,t),Sn(t);break;case 13:rn(e,t),Sn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Sp=Ue())),r&4&&By(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(gt=(d=gt)||h,rn(e,t),gt=d):rn(e,t),Sn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(Z=t,h=t.child;h!==null;){for(m=Z=h;Z!==null;){switch(p=Z,_=p.child,p.tag){case 0:case 11:case 14:case 15:Zo(4,p,p.return);break;case 1:hi(p,p.return);var I=p.stateNode;if(typeof I.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(A){Me(r,n,A)}}break;case 5:hi(p,p.return);break;case 22:if(p.memoizedState!==null){qy(m);continue}}_!==null?(_.return=p,Z=_):qy(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=p0("display",o))}catch(A){Me(t,t.return,A)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(A){Me(t,t.return,A)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:rn(e,t),Sn(t),r&4&&By(t);break;case 21:break;default:rn(e,t),Sn(t)}}function Sn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Uw(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(la(s,""),r.flags&=-33);var i=zy(t);nf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=zy(t);tf(t,l,o);break;default:throw Error(q(161))}}catch(u){Me(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function oC(t,e,n){Z=t,Bw(t)}function Bw(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||jl;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||gt;l=jl;var d=gt;if(jl=o,(gt=u)&&!d)for(Z=s;Z!==null;)o=Z,u=o.child,o.tag===22&&o.memoizedState!==null?Hy(s):u!==null?(u.return=o,Z=u):Hy(s);for(;i!==null;)Z=i,Bw(i),i=i.sibling;Z=s,jl=l,gt=d}Wy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):Wy(t)}}function Wy(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||Eu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!gt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:on(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ay(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ay(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&ha(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}gt||e.flags&512&&ef(e)}catch(p){Me(e,e.return,p)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function qy(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function Hy(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Eu(4,e)}catch(u){Me(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Me(e,s,u)}}var i=e.return;try{ef(e)}catch(u){Me(e,i,u)}break;case 5:var o=e.return;try{ef(e)}catch(u){Me(e,o,u)}}}catch(u){Me(e,e.return,u)}if(e===t){Z=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Z=l;break}Z=e.return}}var aC=Math.ceil,Fc=ur.ReactCurrentDispatcher,xp=ur.ReactCurrentOwner,Jt=ur.ReactCurrentBatchConfig,ge=0,Ze=null,ze=null,st=0,Ft=0,fi=Jr(0),qe=0,Ta=null,Ts=0,xu=0,Tp=0,ea=null,At=null,Sp=0,Oi=1/0,Bn=null,Uc=!1,rf=null,Dr=null,Ol=!1,Ar=null,$c=0,ta=0,sf=null,Zl=-1,ec=0;function xt(){return ge&6?Ue():Zl!==-1?Zl:Zl=Ue()}function Lr(t){return t.mode&1?ge&2&&st!==0?st&-st:WI.transition!==null?(ec===0&&(ec=R0()),ec):(t=we,t!==0||(t=window.event,t=t===void 0?16:O0(t.type)),t):1}function gn(t,e,n,r){if(50<ta)throw ta=0,sf=null,Error(q(185));La(t,n,r),(!(ge&2)||t!==Ze)&&(t===Ze&&(!(ge&2)&&(xu|=n),qe===4&&xr(t,st)),Ot(t,r),n===1&&ge===0&&!(e.mode&1)&&(Oi=Ue()+500,vu&&Zr()))}function Ot(t,e){var n=t.callbackNode;WS(t,e);var r=Sc(t,t===Ze?st:0);if(r===0)n!==null&&ty(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ty(n),e===1)t.tag===0?BI(Gy.bind(null,t)):Z0(Gy.bind(null,t)),FI(function(){!(ge&6)&&Zr()}),n=null;else{switch(A0(r)){case 1:n=Yf;break;case 4:n=I0;break;case 16:n=Tc;break;case 536870912:n=C0;break;default:n=Tc}n=Xw(n,Ww.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ww(t,e){if(Zl=-1,ec=0,ge&6)throw Error(q(327));var n=t.callbackNode;if(Ei()&&t.callbackNode!==n)return null;var r=Sc(t,t===Ze?st:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=zc(t,r);else{e=r;var s=ge;ge|=2;var i=Hw();(Ze!==t||st!==e)&&(Bn=null,Oi=Ue()+500,gs(t,e));do try{uC();break}catch(l){qw(t,l)}while(1);cp(),Fc.current=i,ge=s,ze!==null?e=0:(Ze=null,st=0,e=qe)}if(e!==0){if(e===2&&(s=bh(t),s!==0&&(r=s,e=of(t,s))),e===1)throw n=Ta,gs(t,0),xr(t,r),Ot(t,Ue()),n;if(e===6)xr(t,r);else{if(s=t.current.alternate,!(r&30)&&!lC(s)&&(e=zc(t,r),e===2&&(i=bh(t),i!==0&&(r=i,e=of(t,i))),e===1))throw n=Ta,gs(t,0),xr(t,r),Ot(t,Ue()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:cs(t,At,Bn);break;case 3:if(xr(t,r),(r&130023424)===r&&(e=Sp+500-Ue(),10<e)){if(Sc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){xt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Fh(cs.bind(null,t,At,Bn),e);break}cs(t,At,Bn);break;case 4:if(xr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-mn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*aC(r/1960))-r,10<r){t.timeoutHandle=Fh(cs.bind(null,t,At,Bn),r);break}cs(t,At,Bn);break;case 5:cs(t,At,Bn);break;default:throw Error(q(329))}}}return Ot(t,Ue()),t.callbackNode===n?Ww.bind(null,t):null}function of(t,e){var n=ea;return t.current.memoizedState.isDehydrated&&(gs(t,e).flags|=256),t=zc(t,e),t!==2&&(e=At,At=n,e!==null&&af(e)),t}function af(t){At===null?At=t:At.push.apply(At,t)}function lC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xr(t,e){for(e&=~Tp,e&=~xu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mn(e),r=1<<n;t[n]=-1,e&=~r}}function Gy(t){if(ge&6)throw Error(q(327));Ei();var e=Sc(t,0);if(!(e&1))return Ot(t,Ue()),null;var n=zc(t,e);if(t.tag!==0&&n===2){var r=bh(t);r!==0&&(e=r,n=of(t,r))}if(n===1)throw n=Ta,gs(t,0),xr(t,e),Ot(t,Ue()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cs(t,At,Bn),Ot(t,Ue()),null}function Ip(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(Oi=Ue()+500,vu&&Zr())}}function Ss(t){Ar!==null&&Ar.tag===0&&!(ge&6)&&Ei();var e=ge;ge|=1;var n=Jt.transition,r=we;try{if(Jt.transition=null,we=1,t)return t()}finally{we=r,Jt.transition=n,ge=e,!(ge&6)&&Zr()}}function Cp(){Ft=fi.current,ke(fi)}function gs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,MI(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(op(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kc();break;case 3:Pi(),ke(Pt),ke(vt),mp();break;case 5:pp(r);break;case 4:Pi();break;case 13:ke(je);break;case 19:ke(je);break;case 10:up(r.type._context);break;case 22:case 23:Cp()}n=n.return}if(Ze=t,ze=t=Vr(t.current,null),st=Ft=e,qe=0,Ta=null,Tp=xu=Ts=0,At=ea=null,hs!==null){for(e=0;e<hs.length;e++)if(n=hs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}hs=null}return t}function qw(t,e){do{var n=ze;try{if(cp(),Yl.current=Mc,Vc){for(var r=Oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Vc=!1}if(xs=0,Xe=We=Oe=null,Jo=!1,wa=0,xp.current=null,n===null||n.return===null){qe=1,Ta=e,ze=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=st,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=Oy(o);if(_!==null){_.flags&=-257,Dy(_,o,l,i,e),_.mode&1&&jy(i,d,e),e=_,u=d;var I=e.updateQueue;if(I===null){var A=new Set;A.add(u),e.updateQueue=A}else I.add(u);break e}else{if(!(e&1)){jy(i,d,e),Rp();break e}u=Error(q(426))}}else if(be&&l.mode&1){var b=Oy(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Dy(b,o,l,i,e),ap(ji(u,l));break e}}i=u=ji(u,l),qe!==4&&(qe=2),ea===null?ea=[i]:ea.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=Aw(i,u,e);Ry(i,w);break e;case 1:l=u;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Dr===null||!Dr.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=kw(i,l,e);Ry(i,k);break e}}i=i.return}while(i!==null)}Kw(n)}catch(D){e=D,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(1)}function Hw(){var t=Fc.current;return Fc.current=Mc,t===null?Mc:t}function Rp(){(qe===0||qe===3||qe===2)&&(qe=4),Ze===null||!(Ts&268435455)&&!(xu&268435455)||xr(Ze,st)}function zc(t,e){var n=ge;ge|=2;var r=Hw();(Ze!==t||st!==e)&&(Bn=null,gs(t,e));do try{cC();break}catch(s){qw(t,s)}while(1);if(cp(),ge=n,Fc.current=r,ze!==null)throw Error(q(261));return Ze=null,st=0,qe}function cC(){for(;ze!==null;)Gw(ze)}function uC(){for(;ze!==null&&!DS();)Gw(ze)}function Gw(t){var e=Yw(t.alternate,t,Ft);t.memoizedProps=t.pendingProps,e===null?Kw(t):ze=e,xp.current=null}function Kw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=rC(n,e),n!==null){n.flags&=32767,ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,ze=null;return}}else if(n=nC(n,e,Ft),n!==null){ze=n;return}if(e=e.sibling,e!==null){ze=e;return}ze=e=t}while(e!==null);qe===0&&(qe=5)}function cs(t,e,n){var r=we,s=Jt.transition;try{Jt.transition=null,we=1,dC(t,e,n,r)}finally{Jt.transition=s,we=r}return null}function dC(t,e,n,r){do Ei();while(Ar!==null);if(ge&6)throw Error(q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(qS(t,i),t===Ze&&(ze=Ze=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ol||(Ol=!0,Xw(Tc,function(){return Ei(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Jt.transition,Jt.transition=null;var o=we;we=1;var l=ge;ge|=4,xp.current=null,iC(t,n),zw(n,t),bI(Vh),Ic=!!Lh,Vh=Lh=null,t.current=n,oC(n),LS(),ge=l,we=o,Jt.transition=i}else t.current=n;if(Ol&&(Ol=!1,Ar=t,$c=s),i=t.pendingLanes,i===0&&(Dr=null),FS(n.stateNode),Ot(t,Ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Uc)throw Uc=!1,t=rf,rf=null,t;return $c&1&&t.tag!==0&&Ei(),i=t.pendingLanes,i&1?t===sf?ta++:(ta=0,sf=t):ta=0,Zr(),null}function Ei(){if(Ar!==null){var t=A0($c),e=Jt.transition,n=we;try{if(Jt.transition=null,we=16>t?16:t,Ar===null)var r=!1;else{if(t=Ar,Ar=null,$c=0,ge&6)throw Error(q(331));var s=ge;for(ge|=4,Z=t.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(Z=d;Z!==null;){var h=Z;switch(h.tag){case 0:case 11:case 15:Zo(8,h,i)}var m=h.child;if(m!==null)m.return=h,Z=m;else for(;Z!==null;){h=Z;var p=h.sibling,_=h.return;if(Fw(h),h===d){Z=null;break}if(p!==null){p.return=_,Z=p;break}Z=_}}}var I=i.alternate;if(I!==null){var A=I.child;if(A!==null){I.child=null;do{var b=A.sibling;A.sibling=null,A=b}while(A!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zo(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,Z=w;break e}Z=i.return}}var v=t.current;for(Z=v;Z!==null;){o=Z;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Z=x;else e:for(o=v;Z!==null;){if(l=Z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Eu(9,l)}}catch(D){Me(l,l.return,D)}if(l===o){Z=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,Z=k;break e}Z=l.return}}if(ge=s,Zr(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(fu,t)}catch{}r=!0}return r}finally{we=n,Jt.transition=e}}return!1}function Ky(t,e,n){e=ji(n,e),e=Aw(t,e,1),t=Or(t,e,1),e=xt(),t!==null&&(La(t,1,e),Ot(t,e))}function Me(t,e,n){if(t.tag===3)Ky(t,t,n);else for(;e!==null;){if(e.tag===3){Ky(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Dr===null||!Dr.has(r))){t=ji(n,t),t=kw(e,t,1),e=Or(e,t,1),t=xt(),e!==null&&(La(e,1,t),Ot(e,t));break}}e=e.return}}function hC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xt(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(st&n)===n&&(qe===4||qe===3&&(st&130023424)===st&&500>Ue()-Sp?gs(t,0):Tp|=n),Ot(t,e)}function Qw(t,e){e===0&&(t.mode&1?(e=Sl,Sl<<=1,!(Sl&130023424)&&(Sl=4194304)):e=1);var n=xt();t=rr(t,e),t!==null&&(La(t,e,n),Ot(t,n))}function fC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Qw(t,n)}function pC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),Qw(t,n)}var Yw;Yw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pt.current)bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bt=!1,tC(t,e,n);bt=!!(t.flags&131072)}else bt=!1,be&&e.flags&1048576&&ew(e,Pc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Jl(t,e),t=e.pendingProps;var s=ki(e,vt.current);wi(e,n),s=yp(null,e,r,t,s,n);var i=vp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(r)?(i=!0,Nc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,hp(e),s.updater=wu,e.stateNode=s,s._reactInternals=e,Hh(e,r,t,n),e=Qh(null,e,r,!0,i,n)):(e.tag=0,be&&i&&ip(e),Et(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Jl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=gC(r),t=on(r,t),s){case 0:e=Kh(null,e,r,t,n);break e;case 1:e=My(null,e,r,t,n);break e;case 11:e=Ly(null,e,r,t,n);break e;case 14:e=Vy(null,e,r,on(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:on(r,s),Kh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:on(r,s),My(t,e,r,s,n);case 3:e:{if(jw(e),t===null)throw Error(q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,ow(t,e),Dc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ji(Error(q(423)),e),e=Fy(t,e,r,n,s);break e}else if(r!==s){s=ji(Error(q(424)),e),e=Fy(t,e,r,n,s);break e}else for(Ut=jr(e.stateNode.containerInfo.firstChild),zt=e,be=!0,cn=null,n=sw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ni(),r===s){e=sr(t,e,n);break e}Et(t,e,r,n)}e=e.child}return e;case 5:return aw(e),t===null&&Bh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Mh(r,s)?o=null:i!==null&&Mh(r,i)&&(e.flags|=32),Pw(t,e),Et(t,e,o,n),e.child;case 6:return t===null&&Bh(e),null;case 13:return Ow(t,e,n);case 4:return fp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bi(e,null,r,n):Et(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:on(r,s),Ly(t,e,r,s,n);case 7:return Et(t,e,e.pendingProps,n),e.child;case 8:return Et(t,e,e.pendingProps.children,n),e.child;case 12:return Et(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ce(jc,r._currentValue),r._currentValue=o,i!==null)if(vn(i.value,o)){if(i.children===s.children&&!Pt.current){e=sr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Xn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Wh(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(q(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Wh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Et(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,wi(e,n),s=Zt(s),r=r(s),e.flags|=1,Et(t,e,r,n),e.child;case 14:return r=e.type,s=on(r,e.pendingProps),s=on(r.type,s),Vy(t,e,r,s,n);case 15:return Nw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:on(r,s),Jl(t,e),e.tag=1,jt(r)?(t=!0,Nc(e)):t=!1,wi(e,n),Rw(e,r,s),Hh(e,r,s,n),Qh(null,e,r,!0,t,n);case 19:return Dw(t,e,n);case 22:return bw(t,e,n)}throw Error(q(156,e.tag))};function Xw(t,e){return S0(t,e)}function mC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,r){return new mC(t,e,n,r)}function Ap(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gC(t){if(typeof t=="function")return Ap(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gf)return 11;if(t===Kf)return 14}return 2}function Vr(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function tc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ap(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ri:return ys(n.children,s,i,e);case Hf:o=8,s|=8;break;case gh:return t=Yt(12,n,e,s|2),t.elementType=gh,t.lanes=i,t;case yh:return t=Yt(13,n,e,s),t.elementType=yh,t.lanes=i,t;case vh:return t=Yt(19,n,e,s),t.elementType=vh,t.lanes=i,t;case a0:return Tu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case i0:o=10;break e;case o0:o=9;break e;case Gf:o=11;break e;case Kf:o=14;break e;case _r:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Yt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ys(t,e,n,r){return t=Yt(7,t,r,e),t.lanes=n,t}function Tu(t,e,n,r){return t=Yt(22,t,r,e),t.elementType=a0,t.lanes=n,t.stateNode={isHidden:!1},t}function Hd(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function Gd(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yC(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rd(0),this.expirationTimes=Rd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function kp(t,e,n,r,s,i,o,l,u){return t=new yC(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Yt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hp(i),t}function vC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ni,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Jw(t){if(!t)return Br;t=t._reactInternals;e:{if(js(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(jt(n))return J0(t,n,e)}return e}function Zw(t,e,n,r,s,i,o,l,u){return t=kp(n,r,!0,t,s,i,o,l,u),t.context=Jw(null),n=t.current,r=xt(),s=Lr(n),i=Xn(r,s),i.callback=e??null,Or(n,i,s),t.current.lanes=s,La(t,s,r),Ot(t,r),t}function Su(t,e,n,r){var s=e.current,i=xt(),o=Lr(s);return n=Jw(n),e.context===null?e.context=n:e.pendingContext=n,e=Xn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Or(s,e,o),t!==null&&(gn(t,s,o,i),Ql(t,s,o)),o}function Bc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Np(t,e){Qy(t,e),(t=t.alternate)&&Qy(t,e)}function _C(){return null}var eE=typeof reportError=="function"?reportError:function(t){console.error(t)};function bp(t){this._internalRoot=t}Iu.prototype.render=bp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));Su(t,e,null,null)};Iu.prototype.unmount=bp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ss(function(){Su(null,t,null,null)}),e[nr]=null}};function Iu(t){this._internalRoot=t}Iu.prototype.unstable_scheduleHydration=function(t){if(t){var e=b0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Er.length&&e!==0&&e<Er[n].priority;n++);Er.splice(n,0,t),n===0&&j0(t)}};function Pp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Yy(){}function wC(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Bc(o);i.call(d)}}var o=Zw(e,r,t,0,null,!1,!1,"",Yy);return t._reactRootContainer=o,t[nr]=o.current,ma(t.nodeType===8?t.parentNode:t),Ss(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Bc(u);l.call(d)}}var u=kp(t,0,!1,null,null,!1,!1,"",Yy);return t._reactRootContainer=u,t[nr]=u.current,ma(t.nodeType===8?t.parentNode:t),Ss(function(){Su(e,u,n,r)}),u}function Ru(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Bc(o);l.call(u)}}Su(e,o,t,s)}else o=wC(n,e,t,s,r);return Bc(o)}k0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Lo(e.pendingLanes);n!==0&&(Xf(e,n|1),Ot(e,Ue()),!(ge&6)&&(Oi=Ue()+500,Zr()))}break;case 13:Ss(function(){var r=rr(t,1);if(r!==null){var s=xt();gn(r,t,1,s)}}),Np(t,1)}};Jf=function(t){if(t.tag===13){var e=rr(t,134217728);if(e!==null){var n=xt();gn(e,t,134217728,n)}Np(t,134217728)}};N0=function(t){if(t.tag===13){var e=Lr(t),n=rr(t,e);if(n!==null){var r=xt();gn(n,t,e,r)}Np(t,e)}};b0=function(){return we};P0=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};Ah=function(t,e,n){switch(e){case"input":if(Eh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=yu(r);if(!s)throw Error(q(90));c0(r),Eh(r,s)}}}break;case"textarea":d0(t,n);break;case"select":e=n.value,e!=null&&gi(t,!!n.multiple,e,!1)}};v0=Ip;_0=Ss;var EC={usingClientEntryPoint:!1,Events:[Ma,ai,yu,g0,y0,Ip]},No={findFiberByHostInstance:ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xC={bundleType:No.bundleType,version:No.version,rendererPackageName:No.rendererPackageName,rendererConfig:No.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=x0(t),t===null?null:t.stateNode},findFiberByHostInstance:No.findFiberByHostInstance||_C,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dl.isDisabled&&Dl.supportsFiber)try{fu=Dl.inject(xC),kn=Dl}catch{}}Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EC;Wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pp(e))throw Error(q(200));return vC(t,e,null,n)};Wt.createRoot=function(t,e){if(!Pp(t))throw Error(q(299));var n=!1,r="",s=eE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=kp(t,1,!1,null,null,n,!1,r,s),t[nr]=e.current,ma(t.nodeType===8?t.parentNode:t),new bp(e)};Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=x0(e),t=t===null?null:t.stateNode,t};Wt.flushSync=function(t){return Ss(t)};Wt.hydrate=function(t,e,n){if(!Cu(e))throw Error(q(200));return Ru(null,t,e,!0,n)};Wt.hydrateRoot=function(t,e,n){if(!Pp(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=eE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Zw(e,null,t,1,n??null,s,!1,i,o),t[nr]=e.current,ma(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Iu(e)};Wt.render=function(t,e,n){if(!Cu(e))throw Error(q(200));return Ru(null,t,e,!1,n)};Wt.unmountComponentAtNode=function(t){if(!Cu(t))throw Error(q(40));return t._reactRootContainer?(Ss(function(){Ru(null,null,t,!1,function(){t._reactRootContainer=null,t[nr]=null})}),!0):!1};Wt.unstable_batchedUpdates=Ip;Wt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cu(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return Ru(t,e,n,!1,r)};Wt.version="18.3.1-next-f1338f8080-20240426";function tE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tE)}catch(t){console.error(t)}}tE(),t0.exports=Wt;var TC=t0.exports,Xy=TC;ph.createRoot=Xy.createRoot,ph.hydrateRoot=Xy.hydrateRoot;const SC="modulepreload",IC=function(t){return"/"+t},Jy={},CC=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=IC(i),i in Jy)return;Jy[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!r)for(let h=s.length-1;h>=0;h--){const m=s[h];if(m.href===i&&(!o||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":SC,o||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),o)return new Promise((h,m)=>{d.addEventListener("load",h),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var jp={};Object.defineProperty(jp,"__esModule",{value:!0});jp.parse=jC;jp.serialize=OC;const RC=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,AC=/^[\u0021-\u003A\u003C-\u007E]*$/,kC=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,NC=/^[\u0020-\u003A\u003D-\u007E]*$/,bC=Object.prototype.toString,PC=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function jC(t,e){const n=new PC,r=t.length;if(r<2)return n;const s=(e==null?void 0:e.decode)||DC;let i=0;do{const o=t.indexOf("=",i);if(o===-1)break;const l=t.indexOf(";",i),u=l===-1?r:l;if(o>u){i=t.lastIndexOf(";",o-1)+1;continue}const d=Zy(t,i,o),h=ev(t,o,d),m=t.slice(d,h);if(n[m]===void 0){let p=Zy(t,o+1,u),_=ev(t,u,p);const I=s(t.slice(p,_));n[m]=I}i=u+1}while(i<r);return n}function Zy(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function ev(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function OC(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!RC.test(t))throw new TypeError(`argument name is invalid: ${t}`);const s=r(e);if(!AC.test(s))throw new TypeError(`argument val is invalid: ${e}`);let i=t+"="+s;if(!n)return i;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);i+="; Max-Age="+n.maxAge}if(n.domain){if(!kC.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);i+="; Domain="+n.domain}if(n.path){if(!NC.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);i+="; Path="+n.path}if(n.expires){if(!LC(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);i+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.partitioned&&(i+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return i}function DC(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function LC(t){return bC.call(t)==="[object Date]"}var tv="popstate";function VC(t={}){function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return lf("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Sa(s)}return FC(e,n,null,t)}function Pe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _n(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function MC(){return Math.random().toString(36).substring(2,10)}function nv(t,e){return{usr:t.state,key:t.key,idx:e}}function lf(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ki(e):e,state:n,key:e&&e.key||r||MC()}}function Sa({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ki(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function FC(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l="POP",u=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function m(){l="POP";let b=h(),w=b==null?null:b-d;d=b,u&&u({action:l,location:A.location,delta:w})}function p(b,w){l="PUSH";let v=lf(A.location,b,w);n&&n(v,b),d=h()+1;let x=nv(v,d),k=A.createHref(v);try{o.pushState(x,"",k)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(k)}i&&u&&u({action:l,location:A.location,delta:1})}function _(b,w){l="REPLACE";let v=lf(A.location,b,w);n&&n(v,b),d=h();let x=nv(v,d),k=A.createHref(v);o.replaceState(x,"",k),i&&u&&u({action:l,location:A.location,delta:0})}function I(b){return UC(b)}let A={get action(){return l},get location(){return t(s,o)},listen(b){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(tv,m),u=b,()=>{s.removeEventListener(tv,m),u=null}},createHref(b){return e(s,b)},createURL:I,encodeLocation(b){let w=I(b);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:_,go(b){return o.go(b)}};return A}function UC(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Pe(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Sa(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function nE(t,e,n="/"){return $C(t,e,n,!1)}function $C(t,e,n,r){let s=typeof e=="string"?Ki(e):e,i=ir(s.pathname||"/",n);if(i==null)return null;let o=rE(t);zC(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=ZC(i);l=XC(o[u],d,r)}return l}function rE(t,e=[],n=[],r=""){let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Pe(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let d=Jn([r,u.relativePath]),h=n.concat(u);i.children&&i.children.length>0&&(Pe(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),rE(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:QC(d,i.index),routesMeta:h})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of sE(i.path))s(i,o,u)}),e}function sE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=sE(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function zC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:YC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var BC=/^:[\w-]+$/,WC=3,qC=2,HC=1,GC=10,KC=-2,rv=t=>t==="*";function QC(t,e){let n=t.split("/"),r=n.length;return n.some(rv)&&(r+=KC),e&&(r+=qC),n.filter(s=>!rv(s)).reduce((s,i)=>s+(BC.test(i)?WC:i===""?HC:GC),r)}function YC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function XC(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",m=Wc({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),p=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=Wc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Jn([i,m.pathname]),pathnameBase:rR(Jn([i,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(i=Jn([i,m.pathnameBase]))}return o}function Wc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=JC(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:m},p)=>{if(h==="*"){let I=l[p]||"";o=i.slice(0,i.length-I.length).replace(/(.)\/+$/,"$1")}const _=l[p];return m&&!_?d[h]=void 0:d[h]=(_||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function JC(t,e=!1,n=!0){_n(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function ZC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _n(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ir(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function eR(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ki(t):t;return{pathname:n?n.startsWith("/")?n:tR(n,e):e,search:sR(r),hash:iR(s)}}function tR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Kd(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function nR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Op(t){let e=nR(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Dp(t,e,n,r=!1){let s;typeof t=="string"?s=Ki(t):(s={...t},Pe(!s.pathname||!s.pathname.includes("?"),Kd("?","pathname","search",s)),Pe(!s.pathname||!s.pathname.includes("#"),Kd("#","pathname","hash",s)),Pe(!s.search||!s.search.includes("#"),Kd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;s.pathname=p.join("/")}l=m>=0?e[m]:"/"}let u=eR(s,l),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var Jn=t=>t.join("/").replace(/\/\/+/g,"/"),rR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),sR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,iR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function oR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var iE=["POST","PUT","PATCH","DELETE"];new Set(iE);var aR=["GET",...iE];new Set(aR);var Qi=P.createContext(null);Qi.displayName="DataRouter";var Au=P.createContext(null);Au.displayName="DataRouterState";var oE=P.createContext({isTransitioning:!1});oE.displayName="ViewTransition";var lR=P.createContext(new Map);lR.displayName="Fetchers";var cR=P.createContext(null);cR.displayName="Await";var xn=P.createContext(null);xn.displayName="Navigation";var Ua=P.createContext(null);Ua.displayName="Location";var Ln=P.createContext({outlet:null,matches:[],isDataRoute:!1});Ln.displayName="Route";var Lp=P.createContext(null);Lp.displayName="RouteError";function uR(t,{relative:e}={}){Pe(Yi(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=P.useContext(xn),{hash:s,pathname:i,search:o}=$a(t,{relative:e}),l=i;return n!=="/"&&(l=i==="/"?n:Jn([n,i])),r.createHref({pathname:l,search:o,hash:s})}function Yi(){return P.useContext(Ua)!=null}function Tn(){return Pe(Yi(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Ua).location}var aE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function lE(t){P.useContext(xn).static||P.useLayoutEffect(t)}function Os(){let{isDataRoute:t}=P.useContext(Ln);return t?TR():dR()}function dR(){Pe(Yi(),"useNavigate() may be used only in the context of a <Router> component.");let t=P.useContext(Qi),{basename:e,navigator:n}=P.useContext(xn),{matches:r}=P.useContext(Ln),{pathname:s}=Tn(),i=JSON.stringify(Op(r)),o=P.useRef(!1);return lE(()=>{o.current=!0}),P.useCallback((u,d={})=>{if(_n(o.current,aE),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=Dp(u,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Jn([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,s,t])}P.createContext(null);function $a(t,{relative:e}={}){let{matches:n}=P.useContext(Ln),{pathname:r}=Tn(),s=JSON.stringify(Op(n));return P.useMemo(()=>Dp(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function hR(t,e){return cE(t,e)}function cE(t,e,n,r){var w;Pe(Yi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=P.useContext(xn),{matches:i}=P.useContext(Ln),o=i[i.length-1],l=o?o.params:{},u=o?o.pathname:"/",d=o?o.pathnameBase:"/",h=o&&o.route;{let v=h&&h.path||"";uE(u,!h||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let m=Tn(),p;if(e){let v=typeof e=="string"?Ki(e):e;Pe(d==="/"||((w=v.pathname)==null?void 0:w.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${v.pathname}" was given in the \`location\` prop.`),p=v}else p=m;let _=p.pathname||"/",I=_;if(d!=="/"){let v=d.replace(/^\//,"").split("/");I="/"+_.replace(/^\//,"").split("/").slice(v.length).join("/")}let A=nE(t,{pathname:I});_n(h||A!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),_n(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=yR(A&&A.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Jn([d,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?d:Jn([d,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&b?P.createElement(Ua.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},b):b}function fR(){let t=xR(),e=oR(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:i},"ErrorBoundary")," or"," ",P.createElement("code",{style:i},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:s},n):null,o)}var pR=P.createElement(fR,null),mR=class extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?P.createElement(Ln.Provider,{value:this.props.routeContext},P.createElement(Lp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function gR({routeContext:t,match:e,children:n}){let r=P.useContext(Qi);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Ln.Provider,{value:t},n)}function yR(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,i=n==null?void 0:n.errors;if(i!=null){let u=s.findIndex(d=>d.route.id&&(i==null?void 0:i[d.route.id])!==void 0);Pe(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let o=!1,l=-1;if(n)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:m}=n,p=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!m||m[d.route.id]===void 0);if(d.route.lazy||p){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,d,h)=>{let m,p=!1,_=null,I=null;n&&(m=i&&d.route.id?i[d.route.id]:void 0,_=d.route.errorElement||pR,o&&(l<0&&h===0?(uE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,I=null):l===h&&(p=!0,I=d.route.hydrateFallbackElement||null)));let A=e.concat(s.slice(0,h+1)),b=()=>{let w;return m?w=_:p?w=I:d.route.Component?w=P.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=u,P.createElement(gR,{match:d,routeContext:{outlet:u,matches:A,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?P.createElement(mR,{location:n.location,revalidation:n.revalidation,component:_,error:m,children:b(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):b()},null)}function Vp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vR(t){let e=P.useContext(Qi);return Pe(e,Vp(t)),e}function _R(t){let e=P.useContext(Au);return Pe(e,Vp(t)),e}function wR(t){let e=P.useContext(Ln);return Pe(e,Vp(t)),e}function Mp(t){let e=wR(t),n=e.matches[e.matches.length-1];return Pe(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function ER(){return Mp("useRouteId")}function xR(){var r;let t=P.useContext(Lp),e=_R("useRouteError"),n=Mp("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function TR(){let{router:t}=vR("useNavigate"),e=Mp("useNavigate"),n=P.useRef(!1);return lE(()=>{n.current=!0}),P.useCallback(async(s,i={})=>{_n(n.current,aE),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var sv={};function uE(t,e,n){!e&&!sv[t]&&(sv[t]=!0,_n(!1,n))}P.memo(SR);function SR({routes:t,future:e,state:n}){return cE(t,void 0,n,e)}function IR({to:t,replace:e,state:n,relative:r}){Pe(Yi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=P.useContext(xn);_n(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=P.useContext(Ln),{pathname:o}=Tn(),l=Os(),u=Dp(t,Op(i),o,r==="path"),d=JSON.stringify(u);return P.useEffect(()=>{l(JSON.parse(d),{replace:e,state:n,relative:r})},[l,d,r,e,n]),null}function Gt(t){Pe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function CR({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){Pe(!Yi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=P.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=Ki(n));let{pathname:u="/",search:d="",hash:h="",state:m=null,key:p="default"}=n,_=P.useMemo(()=>{let I=ir(u,o);return I==null?null:{location:{pathname:I,search:d,hash:h,state:m,key:p},navigationType:r}},[o,u,d,h,m,p,r]);return _n(_!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:P.createElement(xn.Provider,{value:l},P.createElement(Ua.Provider,{children:e,value:_}))}function RR({children:t,location:e}){return hR(cf(t),e)}function cf(t,e=[]){let n=[];return P.Children.forEach(t,(r,s)=>{if(!P.isValidElement(r))return;let i=[...e,s];if(r.type===P.Fragment){n.push.apply(n,cf(r.props.children,i));return}Pe(r.type===Gt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pe(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=cf(r.props.children,i)),n.push(o)}),n}var nc="get",rc="application/x-www-form-urlencoded";function ku(t){return t!=null&&typeof t.tagName=="string"}function AR(t){return ku(t)&&t.tagName.toLowerCase()==="button"}function kR(t){return ku(t)&&t.tagName.toLowerCase()==="form"}function NR(t){return ku(t)&&t.tagName.toLowerCase()==="input"}function bR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function PR(t,e){return t.button===0&&(!e||e==="_self")&&!bR(t)}var Ll=null;function jR(){if(Ll===null)try{new FormData(document.createElement("form"),0),Ll=!1}catch{Ll=!0}return Ll}var OR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qd(t){return t!=null&&!OR.has(t)?(_n(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rc}"`),null):t}function DR(t,e){let n,r,s,i,o;if(kR(t)){let l=t.getAttribute("action");r=l?ir(l,e):null,n=t.getAttribute("method")||nc,s=Qd(t.getAttribute("enctype"))||rc,i=new FormData(t)}else if(AR(t)||NR(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(r=u?ir(u,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||nc,s=Qd(t.getAttribute("formenctype"))||Qd(l.getAttribute("enctype"))||rc,i=new FormData(l,t),!jR()){let{name:d,type:h,value:m}=t;if(h==="image"){let p=d?`${d}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else d&&i.append(d,m)}}else{if(ku(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=nc,r=null,s=rc,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}function Fp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function LR(t,e){if(t.id in e)return e[t.id];try{let n=await CC(()=>import(t.module),[]);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function VR(t){return t!=null&&typeof t.page=="string"}function MR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function FR(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await LR(i,n);return o.links?o.links():[]}return[]}));return BR(r.flat(1).filter(MR).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function iv(t,e,n,r,s,i){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,l=(u,d)=>{var h;return n[d].pathname!==u.pathname||((h=n[d].route.path)==null?void 0:h.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>o(u,d)||l(u,d)):i==="data"?e.filter((u,d)=>{var m;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,d)||l(u,d))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function UR(t,e,{includeHydrateFallback:n}={}){return $R(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function $R(t){return[...new Set(t)]}function zR(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function BR(t,e){let n=new Set,r=new Set(e);return t.reduce((s,i)=>{if(e&&!VR(i)&&i.as==="script"&&i.href&&r.has(i.href))return s;let l=JSON.stringify(zR(i));return n.has(l)||(n.add(l),s.push({key:l,link:i})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var WR=new Set([100,101,204,205]);function qR(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&ir(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function dE(){let t=P.useContext(Qi);return Fp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function HR(){let t=P.useContext(Au);return Fp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Up=P.createContext(void 0);Up.displayName="FrameworkContext";function hE(){let t=P.useContext(Up);return Fp(t,"You must render this element inside a <HydratedRouter> element"),t}function GR(t,e){let n=P.useContext(Up),[r,s]=P.useState(!1),[i,o]=P.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:m}=e,p=P.useRef(null);P.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let A=w=>{w.forEach(v=>{o(v.isIntersecting)})},b=new IntersectionObserver(A,{threshold:.5});return p.current&&b.observe(p.current),()=>{b.disconnect()}}},[t]),P.useEffect(()=>{if(r){let A=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(A)}}},[r]);let _=()=>{s(!0)},I=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,p,{}]:[i,p,{onFocus:bo(l,_),onBlur:bo(u,I),onMouseEnter:bo(d,_),onMouseLeave:bo(h,I),onTouchStart:bo(m,_)}]:[!1,p,{}]}function bo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function KR({page:t,...e}){let{router:n}=dE(),r=P.useMemo(()=>nE(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?P.createElement(YR,{page:t,matches:r,...e}):null}function QR(t){let{manifest:e,routeModules:n}=hE(),[r,s]=P.useState([]);return P.useEffect(()=>{let i=!1;return FR(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function YR({page:t,matches:e,...n}){let r=Tn(),{manifest:s,routeModules:i}=hE(),{basename:o}=dE(),{loaderData:l,matches:u}=HR(),d=P.useMemo(()=>iv(t,e,u,s,r,"data"),[t,e,u,s,r]),h=P.useMemo(()=>iv(t,e,u,s,r,"assets"),[t,e,u,s,r]),m=P.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let I=new Set,A=!1;if(e.forEach(w=>{var x;let v=s.routes[w.route.id];!v||!v.hasLoader||(!d.some(k=>k.route.id===w.route.id)&&w.route.id in l&&((x=i[w.route.id])!=null&&x.shouldRevalidate)||v.hasClientLoader?A=!0:I.add(w.route.id))}),I.size===0)return[];let b=qR(t,o);return A&&I.size>0&&b.searchParams.set("_routes",e.filter(w=>I.has(w.route.id)).map(w=>w.route.id).join(",")),[b.pathname+b.search]},[o,l,r,s,d,e,t,i]),p=P.useMemo(()=>UR(h,s),[h,s]),_=QR(h);return P.createElement(P.Fragment,null,m.map(I=>P.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...n})),p.map(I=>P.createElement("link",{key:I,rel:"modulepreload",href:I,...n})),_.map(({key:I,link:A})=>P.createElement("link",{key:I,...A})))}function XR(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var fE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{fE&&(window.__reactRouterVersion="7.6.2")}catch{}function JR({basename:t,children:e,window:n}){let r=P.useRef();r.current==null&&(r.current=VC({window:n,v5Compat:!0}));let s=r.current,[i,o]=P.useState({action:s.action,location:s.location}),l=P.useCallback(u=>{P.startTransition(()=>o(u))},[o]);return P.useLayoutEffect(()=>s.listen(l),[s,l]),P.createElement(CR,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var pE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dn=P.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:m,...p},_){let{basename:I}=P.useContext(xn),A=typeof d=="string"&&pE.test(d),b,w=!1;if(typeof d=="string"&&A&&(b=d,fE))try{let T=new URL(window.location.href),R=d.startsWith("//")?new URL(T.protocol+d):new URL(d),j=ir(R.pathname,I);R.origin===T.origin&&j!=null?d=j+R.search+R.hash:w=!0}catch{_n(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=uR(d,{relative:s}),[x,k,D]=GR(r,p),V=nA(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:s,viewTransition:m});function E(T){e&&e(T),T.defaultPrevented||V(T)}let y=P.createElement("a",{...p,...D,href:b||v,onClick:w||i?e:E,ref:XR(_,k),target:u,"data-discover":!A&&n==="render"?"true":void 0});return x&&!A?P.createElement(P.Fragment,null,y,P.createElement(KR,{page:v})):y});dn.displayName="Link";var ZR=P.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:l,children:u,...d},h){let m=$a(o,{relative:d.relative}),p=Tn(),_=P.useContext(Au),{navigator:I,basename:A}=P.useContext(xn),b=_!=null&&aA(m)&&l===!0,w=I.encodeLocation?I.encodeLocation(m).pathname:m.pathname,v=p.pathname,x=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;n||(v=v.toLowerCase(),x=x?x.toLowerCase():null,w=w.toLowerCase()),x&&A&&(x=ir(x,A)||x);const k=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let D=v===w||!s&&v.startsWith(w)&&v.charAt(k)==="/",V=x!=null&&(x===w||!s&&x.startsWith(w)&&x.charAt(w.length)==="/"),E={isActive:D,isPending:V,isTransitioning:b},y=D?e:void 0,T;typeof r=="function"?T=r(E):T=[r,D?"active":null,V?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let R=typeof i=="function"?i(E):i;return P.createElement(dn,{...d,"aria-current":y,className:T,ref:h,style:R,to:o,viewTransition:l},typeof u=="function"?u(E):u)});ZR.displayName="NavLink";var eA=P.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=nc,action:l,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:m,...p},_)=>{let I=iA(),A=oA(l,{relative:d}),b=o.toLowerCase()==="get"?"get":"post",w=typeof l=="string"&&pE.test(l),v=x=>{if(u&&u(x),x.defaultPrevented)return;x.preventDefault();let k=x.nativeEvent.submitter,D=(k==null?void 0:k.getAttribute("formmethod"))||o;I(k||x.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:s,state:i,relative:d,preventScrollReset:h,viewTransition:m})};return P.createElement("form",{ref:_,method:b,action:A,onSubmit:r?u:v,...p,"data-discover":!w&&t==="render"?"true":void 0})});eA.displayName="Form";function tA(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mE(t){let e=P.useContext(Qi);return Pe(e,tA(t)),e}function nA(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let l=Os(),u=Tn(),d=$a(t,{relative:i});return P.useCallback(h=>{if(PR(h,e)){h.preventDefault();let m=n!==void 0?n:Sa(u)===Sa(d);l(t,{replace:m,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[u,l,d,n,r,e,t,s,i,o])}var rA=0,sA=()=>`__${String(++rA)}__`;function iA(){let{router:t}=mE("useSubmit"),{basename:e}=P.useContext(xn),n=ER();return P.useCallback(async(r,s={})=>{let{action:i,method:o,encType:l,formData:u,body:d}=DR(r,e);if(s.navigate===!1){let h=s.fetcherKey||sA();await t.fetch(h,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function oA(t,{relative:e}={}){let{basename:n}=P.useContext(xn),r=P.useContext(Ln);Pe(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...$a(t||".",{relative:e})},o=Tn();if(t==null){i.search=o.search;let l=new URLSearchParams(i.search),u=l.getAll("index");if(u.some(h=>h==="")){l.delete("index"),u.filter(m=>m).forEach(m=>l.append("index",m));let h=l.toString();i.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Jn([n,i.pathname])),Sa(i)}function aA(t,e={}){let n=P.useContext(oE);Pe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=mE("useViewTransitionState"),s=$a(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=ir(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ir(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Wc(s.pathname,o)!=null||Wc(s.pathname,i)!=null}[...WR];var gE={exports:{}},lA="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",cA=lA,uA=cA;function yE(){}function vE(){}vE.resetWarningCache=yE;var dA=function(){function t(r,s,i,o,l,u){if(u!==uA){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:vE,resetWarningCache:yE};return n.PropTypes=n,n};gE.exports=dA();var hA=gE.exports;const C=B_(hA),Yd=()=>Math.random().toString(36).substr(2,9)+Date.now().toString(36),Xs=t=>{const e=["word","definitions","partOfSpeech","difficulty"];for(const n of e)if(!t[n])throw new Error(`Required field '${n}' is missing`);return{id:t.id||Yd(),word:t.word.toLowerCase(),pronunciation:t.pronunciation||"",partOfSpeech:t.partOfSpeech,difficulty:t.difficulty,frequency:t.frequency||5,satLevel:t.satLevel!==void 0?t.satLevel:!0,definitions:t.definitions.map(n=>({id:n.id||Yd(),definition:n.definition,context:n.context||"general",synonyms:n.synonyms||[],antonyms:n.antonyms||[]})),examples:(t.examples||[]).map(n=>({id:n.id||Yd(),sentence:n.sentence,context:n.context||"general",highlightWord:n.highlightWord!==void 0?n.highlightWord:!0})),etymology:t.etymology||{},mnemonics:t.mnemonics||[],relatedWords:t.relatedWords||[],categories:t.categories||[],tags:t.tags||[],learningTips:t.learningTips||"",commonMistakes:t.commonMistakes||"",averageCorrectRate:t.averageCorrectRate||0,timesStudied:t.timesStudied||0,lastStudied:t.lastStudied||null,audioUrl:t.audioUrl||"",audioProvider:t.audioProvider||"tts",sources:t.sources||[],verified:t.verified!==void 0?t.verified:!1,dateAdded:t.dateAdded||new Date().toISOString(),lastUpdated:new Date().toISOString()}},_E=[Xs({word:"ubiquitous",pronunciation:"yoo-BIK-wi-tuhs",partOfSpeech:"adjective",difficulty:"hard",frequency:7,satLevel:!0,definitions:[{definition:"Present, appearing, or found everywhere; omnipresent",context:"academic",synonyms:["omnipresent","pervasive","universal","widespread"],antonyms:["rare","scarce","uncommon","absent"]}],examples:[{sentence:"Smartphones have become ubiquitous in modern society, with nearly everyone carrying one.",context:"technology"},{sentence:"The artist's influence was ubiquitous throughout the exhibition, visible in every piece displayed.",context:"art"}],etymology:{origin:"Latin",rootWords:["ubique (everywhere)","ous (full of)"],evolution:"From Latin ubique meaning 'everywhere' + -ous suffix"},mnemonics:["Think of 'Uber' being everywhere - ubiquitous"],categories:["academic","technology","social"],learningTips:"Remember: if something is ubiquitous, you can't escape it - it's everywhere!",sources:["SAT Official Guide","Princeton Review"]})],fA=[Xs({word:"ephemeral",pronunciation:"ih-FEM-er-uhl",partOfSpeech:"adjective",difficulty:"hard",frequency:6,satLevel:!0,definitions:[{definition:"Lasting for a very short time; transitory",context:"literary",synonyms:["fleeting","transient","temporary","brief"],antonyms:["permanent","eternal","lasting","enduring"]}],examples:[{sentence:"The beauty of cherry blossoms is ephemeral, lasting only a few weeks each spring.",context:"nature"}],etymology:{origin:"Greek",rootWords:["epi (upon)","hemera (day)"],evolution:"From Greek ephemeros meaning 'lasting only a day'"},mnemonics:["Ephemeral = 'a femur' breaks quickly, doesn't last"],categories:["literature","philosophy","nature"],sources:["SAT Official Guide","Kaplan SAT"]}),Xs({word:"gregarious",pronunciation:"grih-GAIR-ee-uhs",partOfSpeech:"adjective",difficulty:"medium",frequency:8,satLevel:!0,definitions:[{definition:"Fond of the company of others; sociable",context:"social",synonyms:["sociable","outgoing","social","extroverted"],antonyms:["antisocial","introverted","solitary","reclusive"]}],examples:[{sentence:"Maria's gregarious nature made her the perfect host for the dinner party.",context:"social"}],etymology:{origin:"Latin",rootWords:["grex (flock)","arius (pertaining to)"],evolution:"From Latin gregarius meaning 'of a flock'"},mnemonics:["Gregarious = Greg is 'great' at parties, very social"],categories:["psychology","social","personality"],sources:["SAT Official Guide","Barron's SAT"]}),Xs({word:"meticulous",pronunciation:"muh-TIK-yuh-luhs",partOfSpeech:"adjective",difficulty:"medium",frequency:9,satLevel:!0,definitions:[{definition:"Showing great attention to detail; very careful and precise",context:"academic",synonyms:["careful","thorough","precise","painstaking"],antonyms:["careless","sloppy","negligent","hasty"]}],examples:[{sentence:"The scientist's meticulous research methods ensured accurate and reliable results.",context:"science"}],etymology:{origin:"Latin",rootWords:["metus (fear)","ulous (full of)"],evolution:"Originally meant 'fearful' but evolved to mean 'careful'"},mnemonics:["Meticulous = 'Met-ick-you-less' mistakes because so careful"],categories:["academic","work","personality"],sources:["SAT Official Guide","Princeton Review"]}),Xs({word:"eloquent",pronunciation:"EL-uh-kwuhnt",partOfSpeech:"adjective",difficulty:"medium",frequency:8,satLevel:!0,definitions:[{definition:"Fluent or persuasive in speaking or writing",context:"communication",synonyms:["articulate","fluent","persuasive","expressive"],antonyms:["inarticulate","unclear","mumbling","incoherent"]}],examples:[{sentence:"The lawyer's eloquent argument convinced the jury of her client's innocence.",context:"legal"}],etymology:{origin:"Latin",rootWords:["e (out)","loqui (to speak)"],evolution:"From Latin eloquens meaning 'speaking out'"},mnemonics:["Eloquent = 'L-a-quent' speaks really well"],categories:["communication","literature","politics"],sources:["SAT Official Guide","Kaplan SAT"]}),Xs({word:"pragmatic",pronunciation:"prag-MAT-ik",partOfSpeech:"adjective",difficulty:"hard",frequency:7,satLevel:!0,definitions:[{definition:"Dealing with things sensibly and realistically; practical",context:"business",synonyms:["practical","realistic","sensible","matter-of-fact"],antonyms:["idealistic","impractical","theoretical","unrealistic"]}],examples:[{sentence:"The manager took a pragmatic approach to solving the budget crisis.",context:"business"}],etymology:{origin:"Greek",rootWords:["pragma (deed, action)"],evolution:"From Greek pragmatikos meaning 'active'"},mnemonics:["Pragmatic = 'Prag-matic' is practical, not automatic"],categories:["business","philosophy","problem-solving"],sources:["SAT Official Guide","Barron's SAT"]})];_E.push(...fA);const pA={academic:["ubiquitous","meticulous","comprehensive","scrutinize"],social:["gregarious","benevolent","condescending","ostentatious"],business:["pragmatic","lucrative","innovative","redundant"],literature:["eloquent","aesthetic","elaborate","profound"],science:["hypothetical","intricate","fluctuate","comprehensive"],personality:["gregarious","meticulous","capricious","tenacious"]},mA={easy:["happy","big","good","new"],medium:["gregarious","meticulous","eloquent","benevolent"],hard:["ubiquitous","ephemeral","pragmatic","capricious"],expert:["perspicacious","grandiloquent","pusillanimous","sesquipedalian"]};class gA{constructor(){this.words=_E,this.cache=new Map,this.searchHistory=[]}async getWords(e={}){const{page:n=1,limit:r=20,difficulty:s=null,category:i=null,search:o=null,sortBy:l="word",sortOrder:u="asc"}=e,d=JSON.stringify(e);if(this.cache.has(d))return this.cache.get(d);let h=[...this.words];if(s&&(h=h.filter(A=>A.difficulty===s)),i&&(h=h.filter(A=>A.categories.includes(i))),o){const A=o.toLowerCase();h=h.filter(b=>b.word.toLowerCase().includes(A)||b.definitions.some(w=>w.definition.toLowerCase().includes(A))||b.examples.some(w=>w.sentence.toLowerCase().includes(A))),this.addToSearchHistory(o)}h.sort((A,b)=>{let w=A[l],v=b[l];return l==="frequency"?u==="asc"?w-v:v-w:(typeof w=="string"&&(w=w.toLowerCase(),v=v.toLowerCase()),u==="asc"?w<v?-1:w>v?1:0:w>v?-1:w<v?1:0)});const m=(n-1)*r,p=m+r,I={words:h.slice(m,p),totalWords:h.length,currentPage:n,totalPages:Math.ceil(h.length/r),hasNext:p<h.length,hasPrev:n>1};return this.cache.set(d,I),I}async getWordById(e){const n=this.words.find(r=>r.id===e);if(!n)throw new Error(`Word with ID ${e} not found`);return n}async getWordByText(e){const n=this.words.find(r=>r.word.toLowerCase()===e.toLowerCase());if(!n)throw new Error(`Word "${e}" not found`);return n}async getRandomWords(e=10,n=null){let r=[...this.words];n&&(r=r.filter(i=>i.difficulty===n));const s=r.sort(()=>.5-Math.random());return s.slice(0,Math.min(e,s.length))}async getQuizWords(e=5,n=null,r=[]){let s=this.words.filter(i=>!r.includes(i.id));return n&&(s=s.filter(i=>i.difficulty===n)),s.sort((i,o)=>i.timesStudied-o.timesStudied),s.slice(0,Math.min(e,s.length))}async getRelatedWords(e,n=5){const r=await this.getWordById(e),s=[];for(const i of r.relatedWords)try{const o=await this.getWordById(i);s.push(o)}catch{}if(s.length<n){const i=this.words.filter(o=>o.id!==e&&!s.find(l=>l.id===o.id)&&(o.categories.some(l=>r.categories.includes(l))||o.difficulty===r.difficulty));s.push(...i.slice(0,n-s.length))}return s.slice(0,n)}async getWordStats(){const e={totalWords:this.words.length,difficultyCounts:{},categoryCounts:{},averageFrequency:0,recentSearches:this.searchHistory.slice(-10)};this.words.forEach(r=>{e.difficultyCounts[r.difficulty]=(e.difficultyCounts[r.difficulty]||0)+1}),this.words.forEach(r=>{r.categories.forEach(s=>{e.categoryCounts[s]=(e.categoryCounts[s]||0)+1})});const n=this.words.reduce((r,s)=>r+s.frequency,0);return e.averageFrequency=n/this.words.length,e}async updateWordProgress(e,n){const r=this.words.findIndex(i=>i.id===e);if(r===-1)throw new Error(`Word with ID ${e} not found`);const s=this.words[r];if(n.studied&&(s.timesStudied=(s.timesStudied||0)+1,s.lastStudied=new Date().toISOString()),n.correctRate!==void 0){const i=s.timesStudied||1,o=s.averageCorrectRate||0;s.averageCorrectRate=(o*(i-1)+n.correctRate)/i}return s.lastUpdated=new Date().toISOString(),this.clearCache(),s}async getSearchSuggestions(e,n=10){const r=e.toLowerCase(),s=[];return this.words.forEach(i=>{var o;i.word.toLowerCase().startsWith(r)&&s.push({word:i.word,type:"word",definition:((o=i.definitions[0])==null?void 0:o.definition)||""})}),s.slice(0,n)}addToSearchHistory(e){this.searchHistory.push({term:e,timestamp:new Date().toISOString()}),this.searchHistory.length>50&&(this.searchHistory=this.searchHistory.slice(-50))}clearCache(){this.cache.clear()}getCategories(){return Object.keys(pA)}getDifficultyLevels(){return Object.keys(mA)}}const hn=new gA,yA=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},vA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},EE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=i>>2,m=(i&3)<<4|l>>4;let p=(l&15)<<2|d>>6,_=d&63;u||(_=64,o||(p=64)),r.push(n[h],n[m],n[p],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||m==null)throw new _A;const p=i<<2|l>>4;if(r.push(p),d!==64){const _=l<<4&240|d>>2;if(r.push(_),m!==64){const I=d<<6&192|m;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _A extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wA=function(t){const e=wE(t);return EE.encodeByteArray(e,!0)},qc=function(t){return wA(t).replace(/\./g,"")},xE=function(t){try{return EE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=()=>EA().__FIREBASE_DEFAULTS__,TA=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},SA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xE(t[1]);return e&&JSON.parse(e)},Nu=()=>{try{return yA()||xA()||TA()||SA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},TE=t=>{var e,n;return(n=(e=Nu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},SE=t=>{const e=TE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},IE=()=>{var t;return(t=Nu())===null||t===void 0?void 0:t.config},CE=t=>{var e;return(e=Nu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(t){return t.endsWith(".cloudworkstations.dev")}async function $p(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[qc(JSON.stringify(n)),qc(JSON.stringify(o)),l].join(".")}const na={};function CA(){const t={prod:[],emulator:[]};for(const e of Object.keys(na))na[e]?t.emulator.push(e):t.prod.push(e);return t}function RA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ov=!1;function zp(t,e){if(typeof window>"u"||typeof document>"u"||!Ds(window.location.host)||na[t]===e||na[t]||ov)return;na[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=CA().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,_){p.setAttribute("width","24"),p.setAttribute("id",_),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{ov=!0,o()},p}function h(p,_){p.setAttribute("id",_),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=RA(r),_=n("text"),I=document.getElementById(_)||document.createElement("span"),A=n("learnmore"),b=document.getElementById(A)||document.createElement("a"),w=n("preprendIcon"),v=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const x=p.element;l(x),h(b,A);const k=d();u(v,w),x.append(v,I,b,k),document.body.appendChild(x)}i?(I.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function kA(){var t;const e=(t=Nu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function PA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jA(){const t=_t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function OA(){return!kA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DA(){try{return typeof indexedDB=="object"}catch{return!1}}function LA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="FirebaseError";class Vn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=VA,Object.setPrototypeOf(this,Vn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,za.prototype.create)}}class za{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?MA(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Vn(s,l,r)}}function MA(t,e){return t.replace(FA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const FA=/\{\$([^}]+)}/g;function UA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Is(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(av(i)&&av(o)){if(!Is(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function av(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Mo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Fo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function $A(t,e){const n=new zA(t,e);return n.subscribe.bind(n)}class zA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Xd),s.error===void 0&&(s.error=Xd),s.complete===void 0&&(s.complete=Xd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Xd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(t){return t&&t._delegate?t._delegate:t}class Wr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new IA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HA(e))try{this.getOrInitializeService({instanceIdentifier:us})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=us){return this.instances.has(e)}getOptions(e=us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=us){return this.component?this.component.multipleInstances?e:us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qA(t){return t===us?void 0:t}function HA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new WA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const KA={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},QA=he.INFO,YA={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},XA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=YA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bp{constructor(e){this.name=e,this._logLevel=QA,this._logHandler=XA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const JA=(t,e)=>e.some(n=>t instanceof n);let lv,cv;function ZA(){return lv||(lv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ek(){return cv||(cv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AE=new WeakMap,uf=new WeakMap,kE=new WeakMap,Jd=new WeakMap,Wp=new WeakMap;function tk(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Mr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&AE.set(n,t)}).catch(()=>{}),Wp.set(e,t),e}function nk(t){if(uf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});uf.set(t,e)}let df={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return uf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rk(t){df=t(df)}function sk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Zd(this),e,...n);return kE.set(r,e.sort?e.sort():[e]),Mr(r)}:ek().includes(t)?function(...e){return t.apply(Zd(this),e),Mr(AE.get(this))}:function(...e){return Mr(t.apply(Zd(this),e))}}function ik(t){return typeof t=="function"?sk(t):(t instanceof IDBTransaction&&nk(t),JA(t,ZA())?new Proxy(t,df):t)}function Mr(t){if(t instanceof IDBRequest)return tk(t);if(Jd.has(t))return Jd.get(t);const e=ik(t);return e!==t&&(Jd.set(t,e),Wp.set(e,t)),e}const Zd=t=>Wp.get(t);function ok(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Mr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Mr(o.result),u.oldVersion,u.newVersion,Mr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const ak=["get","getKey","getAll","getAllKeys","count"],lk=["put","add","delete","clear"],eh=new Map;function uv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(eh.get(e))return eh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=lk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ak.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return eh.set(e,i),i}rk(t=>({...t,get:(e,n,r)=>uv(e,n)||t.get(e,n,r),has:(e,n)=>!!uv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function uk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hf="@firebase/app",dv="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new Bp("@firebase/app"),dk="@firebase/app-compat",hk="@firebase/analytics-compat",fk="@firebase/analytics",pk="@firebase/app-check-compat",mk="@firebase/app-check",gk="@firebase/auth",yk="@firebase/auth-compat",vk="@firebase/database",_k="@firebase/data-connect",wk="@firebase/database-compat",Ek="@firebase/functions",xk="@firebase/functions-compat",Tk="@firebase/installations",Sk="@firebase/installations-compat",Ik="@firebase/messaging",Ck="@firebase/messaging-compat",Rk="@firebase/performance",Ak="@firebase/performance-compat",kk="@firebase/remote-config",Nk="@firebase/remote-config-compat",bk="@firebase/storage",Pk="@firebase/storage-compat",jk="@firebase/firestore",Ok="@firebase/ai",Dk="@firebase/firestore-compat",Lk="firebase",Vk="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff="[DEFAULT]",Mk={[hf]:"fire-core",[dk]:"fire-core-compat",[fk]:"fire-analytics",[hk]:"fire-analytics-compat",[mk]:"fire-app-check",[pk]:"fire-app-check-compat",[gk]:"fire-auth",[yk]:"fire-auth-compat",[vk]:"fire-rtdb",[_k]:"fire-data-connect",[wk]:"fire-rtdb-compat",[Ek]:"fire-fn",[xk]:"fire-fn-compat",[Tk]:"fire-iid",[Sk]:"fire-iid-compat",[Ik]:"fire-fcm",[Ck]:"fire-fcm-compat",[Rk]:"fire-perf",[Ak]:"fire-perf-compat",[kk]:"fire-rc",[Nk]:"fire-rc-compat",[bk]:"fire-gcs",[Pk]:"fire-gcs-compat",[jk]:"fire-fst",[Dk]:"fire-fst-compat",[Ok]:"fire-vertex","fire-js":"fire-js",[Lk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new Map,Fk=new Map,pf=new Map;function hv(t,e){try{t.container.addComponent(e)}catch(n){or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Cs(t){const e=t.name;if(pf.has(e))return or.debug(`There were multiple attempts to register component ${e}.`),!1;pf.set(e,t);for(const n of Hc.values())hv(n,t);for(const n of Fk.values())hv(n,t);return!0}function bu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fr=new za("app","Firebase",Uk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=Vk;function NE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ff,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Fr.create("bad-app-name",{appName:String(s)});if(n||(n=IE()),!n)throw Fr.create("no-options");const i=Hc.get(s);if(i){if(Is(n,i.options)&&Is(r,i.config))return i;throw Fr.create("duplicate-app",{appName:s})}const o=new GA(s);for(const u of pf.values())o.addComponent(u);const l=new $k(n,r,o);return Hc.set(s,l),l}function qp(t=ff){const e=Hc.get(t);if(!e&&t===ff&&IE())return NE();if(!e)throw Fr.create("no-app",{appName:t});return e}function bn(t,e,n){var r;let s=(r=Mk[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),or.warn(l.join(" "));return}Cs(new Wr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk="firebase-heartbeat-database",Bk=1,Ia="firebase-heartbeat-store";let th=null;function bE(){return th||(th=ok(zk,Bk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ia)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fr.create("idb-open",{originalErrorMessage:t.message})})),th}async function Wk(t){try{const n=(await bE()).transaction(Ia),r=await n.objectStore(Ia).get(PE(t));return await n.done,r}catch(e){if(e instanceof Vn)or.warn(e.message);else{const n=Fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});or.warn(n.message)}}}async function fv(t,e){try{const r=(await bE()).transaction(Ia,"readwrite");await r.objectStore(Ia).put(e,PE(t)),await r.done}catch(n){if(n instanceof Vn)or.warn(n.message);else{const r=Fr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});or.warn(r.message)}}}function PE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=1024,Hk=30;class Gk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Qk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=pv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Hk){const o=Yk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pv(),{heartbeatsToSend:r,unsentEntries:s}=Kk(this._heartbeatsCache.heartbeats),i=qc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return or.warn(n),""}}}function pv(){return new Date().toISOString().substring(0,10)}function Kk(t,e=qk){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),mv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),mv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Qk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DA()?LA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Wk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return fv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return fv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function mv(t){return qc(JSON.stringify({version:2,heartbeats:t})).length}function Yk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t){Cs(new Wr("platform-logger",e=>new ck(e),"PRIVATE")),Cs(new Wr("heartbeat",e=>new Gk(e),"PRIVATE")),bn(hf,dv,t),bn(hf,dv,"esm2017"),bn("fire-js","")}Xk("");function Hp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function jE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Jk=jE,OE=new za("auth","Firebase",jE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=new Bp("@firebase/auth");function Zk(t,...e){Gc.logLevel<=he.WARN&&Gc.warn(`Auth (${Ls}): ${t}`,...e)}function sc(t,...e){Gc.logLevel<=he.ERROR&&Gc.error(`Auth (${Ls}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t,...e){throw Kp(t,...e)}function yn(t,...e){return Kp(t,...e)}function Gp(t,e,n){const r=Object.assign(Object.assign({},Jk()),{[e]:n});return new za("auth","Firebase",r).create(e,{appName:t.name})}function Zn(t){return Gp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eN(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&tn(t,"argument-error"),Gp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Kp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return OE.create(t,...e)}function ne(t,e,...n){if(!t)throw Kp(e,...n)}function Qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw sc(e),new Error(e)}function ar(t,e){t||Qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function tN(){return gv()==="http:"||gv()==="https:"}function gv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tN()||bA()||"connection"in navigator)?navigator.onLine:!0}function rN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n){this.shortDelay=e,this.longDelay=n,ar(n>e,"Short delay should be less than long delay!"),this.isMobile=AA()||PA()}get(){return nN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(t,e){ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oN=new Wa(3e4,6e4);function dr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Mn(t,e,n,r,s={}){return LE(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Ba(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return NA()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Ds(t.emulatorConfig.host)&&(d.credentials="include"),DE.fetch()(await VE(t,t.config.apiHost,n,l),d)})}async function LE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},sN),e);try{const s=new lN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Vl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Vl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Vl(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Gp(t,h,d);tn(t,h)}}catch(s){if(s instanceof Vn)throw s;tn(t,"network-request-failed",{message:String(s)})}}async function qa(t,e,n,r,s={}){const i=await Mn(t,e,n,r,s);return"mfaPendingCredential"in i&&tn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function VE(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Qp(t.config,s):`${t.config.apiScheme}://${s}`;return iN.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function aN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yn(this.auth,"network-request-failed")),oN.get())})}}function Vl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=yn(t,e,r);return s.customData._tokenResponse=n,s}function yv(t){return t!==void 0&&t.enterprise!==void 0}class cN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return aN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function uN(t,e){return Mn(t,"GET","/v2/recaptchaConfig",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(t,e){return Mn(t,"POST","/v1/accounts:delete",e)}async function Kc(t,e){return Mn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hN(t,e=!1){const n=Se(t),r=await n.getIdToken(e),s=Yp(r);ne(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ra(nh(s.auth_time)),issuedAtTime:ra(nh(s.iat)),expirationTime:ra(nh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function nh(t){return Number(t)*1e3}function Yp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return sc("JWT malformed, contained fewer than 3 sections"),null;try{const s=xE(n);return s?JSON.parse(s):(sc("Failed to decode base64 JWT payload"),null)}catch(s){return sc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function vv(t){const e=Yp(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Di(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Vn&&fN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function fN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ra(this.lastLoginAt),this.creationTime=ra(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Di(t,Kc(n,{idToken:r}));ne(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?ME(i.providerUserInfo):[],l=gN(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),h=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new gf(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function mN(t){const e=Se(t);await Qc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ME(t){return t.map(e=>{var{providerId:n}=e,r=Hp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(t,e){const n=await LE(t,{},async()=>{const r=Ba({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await VE(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",DE.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function vN(t,e){return Mn(t,"POST","/v2/accounts:revokeToken",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const n=vv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await yN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new xi;return r&&(ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ne(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ne(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xi,this.toJSON())}_performRefresh(){return Qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Hp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new gf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Di(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hN(this,e)}reload(){return mN(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Qc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kt(this.auth.app))return Promise.reject(Zn(this.auth));const e=await this.getIdToken();return await Di(this,dN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,d,h;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,_=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,I=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(l=n.tenantId)!==null&&l!==void 0?l:void 0,b=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,w=(d=n.createdAt)!==null&&d!==void 0?d:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:x,emailVerified:k,isAnonymous:D,providerData:V,stsTokenManager:E}=n;ne(x&&E,e,"internal-error");const y=xi.fromJSON(this.name,E);ne(typeof x=="string",e,"internal-error"),vr(m,e.name),vr(p,e.name),ne(typeof k=="boolean",e,"internal-error"),ne(typeof D=="boolean",e,"internal-error"),vr(_,e.name),vr(I,e.name),vr(A,e.name),vr(b,e.name),vr(w,e.name),vr(v,e.name);const T=new fn({uid:x,auth:e,email:p,emailVerified:k,displayName:m,isAnonymous:D,photoURL:I,phoneNumber:_,tenantId:A,stsTokenManager:y,createdAt:w,lastLoginAt:v});return V&&Array.isArray(V)&&(T.providerData=V.map(R=>Object.assign({},R))),b&&(T._redirectEventId=b),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new xi;s.updateFromServerResponse(n);const i=new fn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Qc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ne(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?ME(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new xi;l.updateFromIdToken(r);const u=new fn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new gf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=new Map;function Yn(t){ar(t instanceof Function,"Expected a class definition");let e=_v.get(t);return e?(ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_v.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}FE.type="NONE";const wv=FE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(t,e,n){return`firebase:${t}:${e}:${n}`}class Ti{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ic(this.userKey,s.apiKey,i),this.fullPersistenceKey=ic("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Kc(this.auth,{idToken:e}).catch(()=>{});return n?fn._fromGetAccountInfoResponse(this.auth,n,e):null}return fn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ti(Yn(wv),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Yn(wv);const o=ic(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(o);if(h){let m;if(typeof h=="string"){const p=await Kc(e,{idToken:h}).catch(()=>{});if(!p)break;m=await fn._fromGetAccountInfoResponse(e,p,h)}else m=fn._fromJSON(e,h);d!==i&&(l=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ti(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ti(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qE(e))return"Blackberry";if(HE(e))return"Webos";if($E(e))return"Safari";if((e.includes("chrome/")||zE(e))&&!e.includes("edge/"))return"Chrome";if(WE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function UE(t=_t()){return/firefox\//i.test(t)}function $E(t=_t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zE(t=_t()){return/crios\//i.test(t)}function BE(t=_t()){return/iemobile/i.test(t)}function WE(t=_t()){return/android/i.test(t)}function qE(t=_t()){return/blackberry/i.test(t)}function HE(t=_t()){return/webos/i.test(t)}function Xp(t=_t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _N(t=_t()){var e;return Xp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wN(){return jA()&&document.documentMode===10}function GE(t=_t()){return Xp(t)||WE(t)||HE(t)||qE(t)||/windows phone/i.test(t)||BE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(t,e=[]){let n;switch(t){case"Browser":n=Ev(_t());break;case"Worker":n=`${Ev(_t())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ls}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(t,e={}){return Mn(t,"GET","/v2/passwordPolicy",dr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=6;class SN{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:TN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xv(this),this.idTokenSubscription=new xv(this),this.beforeStateQueue=new EN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ti.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Kc(this,{idToken:e}),r=await fn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(kt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Qc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kt(this.app))return Promise.reject(Zn(this));const n=e?Se(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kt(this.app)?Promise.reject(Zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kt(this.app)?Promise.reject(Zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xN(this),n=new SN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new za("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await vN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yn(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await Ti.create(this,[Yn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Zk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function hr(t){return Se(t)}class xv{constructor(e){this.auth=e,this.observer=null,this.addObserver=$A(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CN(t){Pu=t}function QE(t){return Pu.loadJS(t)}function RN(){return Pu.recaptchaEnterpriseScript}function AN(){return Pu.gapiScript}function kN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class NN{constructor(){this.enterprise=new bN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class bN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const PN="recaptcha-enterprise",YE="NO_RECAPTCHA";class jN{constructor(e){this.type=PN,this.auth=hr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{uN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new cN(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;yv(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(YE)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new NN().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&yv(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=RN();u.length!==0&&(u+=l),QE(u).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Po(t,e,n,r=!1,s=!1){const i=new jN(t);let o;if(s)o=YE;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Yc(t,e,n,r,s){var i,o;if(s==="EMAIL_PASSWORD_PROVIDER")if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Po(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Po(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(l)});else if(s==="PHONE_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const l=await Po(t,e,n);return r(t,l).catch(async u=>{var d;if(((d=t._getRecaptchaConfig())===null||d===void 0?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await Po(t,e,n,!1,!0);return r(t,h)}return Promise.reject(u)})}else{const l=await Po(t,e,n,!1,!0);return r(t,l)}else return Promise.reject(s+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t,e){const n=bu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Is(i,e??{}))return s;tn(s,"already-initialized")}return n.initialize({options:e})}function DN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Yn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function LN(t,e,n){const r=hr(t);ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=XE(e),{host:o,port:l}=VN(e),u=l===null?"":`:${l}`,d={url:`${i}//${o}${u}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ne(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ne(Is(d,r.config.emulator)&&Is(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ds(o)?($p(`${i}//${o}${u}`),zp("Auth",!0)):s||MN()}function XE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function VN(t){const e=XE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Tv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Tv(o)}}}function Tv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function MN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qn("not implemented")}_getIdTokenResponse(e){return Qn("not implemented")}_linkToIdToken(e,n){return Qn("not implemented")}_getReauthenticationResolver(e){return Qn("not implemented")}}async function FN(t,e){return Mn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(t,e){return qa(t,"POST","/v1/accounts:signInWithPassword",dr(t,e))}async function JE(t,e){return Mn(t,"POST","/v1/accounts:sendOobCode",dr(t,e))}async function $N(t,e){return JE(t,e)}async function zN(t,e){return JE(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BN(t,e){return qa(t,"POST","/v1/accounts:signInWithEmailLink",dr(t,e))}async function WN(t,e){return qa(t,"POST","/v1/accounts:signInWithEmailLink",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca extends Jp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ca(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ca(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yc(e,n,"signInWithPassword",UN,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return BN(e,{email:this._email,oobCode:this._password});default:tn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yc(e,r,"signUpPassword",FN,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return WN(e,{idToken:n,email:this._email,oobCode:this._password});default:tn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Si(t,e){return qa(t,"POST","/v1/accounts:signInWithIdp",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="http://localhost";class Rs extends Jp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Rs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):tn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Hp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Rs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Si(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Si(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Si(e,n)}buildRequest(){const e={requestUri:qN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ba(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GN(t){const e=Mo(Fo(t)).link,n=e?Mo(Fo(e)).deep_link_id:null,r=Mo(Fo(t)).deep_link_id;return(r?Mo(Fo(r)).link:null)||r||n||e||t}class Zp{constructor(e){var n,r,s,i,o,l;const u=Mo(Fo(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,m=HN((s=u.mode)!==null&&s!==void 0?s:null);ne(d&&h&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=h,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=GN(e);try{return new Zp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(){this.providerId=Xi.PROVIDER_ID}static credential(e,n){return Ca._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Zp.parseLink(n);return ne(r,"argument-error"),Ca._fromEmailAndCode(e,r.code,r.tenantId)}}Xi.PROVIDER_ID="password";Xi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends em{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Ha{constructor(){super("facebook.com")}static credential(e){return Rs._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn extends Ha{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Rs._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Hn.credential(n,r)}catch{return null}}}Hn.GOOGLE_SIGN_IN_METHOD="google.com";Hn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Ha{constructor(){super("github.com")}static credential(e){return Rs._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sr.credential(e.oauthAccessToken)}catch{return null}}}Sr.GITHUB_SIGN_IN_METHOD="github.com";Sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Ha{constructor(){super("twitter.com")}static credential(e,n){return Rs._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ir.credential(n,r)}catch{return null}}}Ir.TWITTER_SIGN_IN_METHOD="twitter.com";Ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(t,e){return qa(t,"POST","/v1/accounts:signUp",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await fn._fromIdTokenResponse(e,r,s),o=Sv(r);return new As({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Sv(r);return new As({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Sv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends Vn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Xc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Xc(e,n,r,s)}}function ZE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Xc._fromErrorAndOperation(t,i,e,r):i})}async function QN(t,e,n=!1){const r=await Di(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return As._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(t,e,n=!1){const{auth:r}=t;if(kt(r.app))return Promise.reject(Zn(r));const s="reauthenticate";try{const i=await Di(t,ZE(r,s,e,t),n);ne(i.idToken,r,"internal-error");const o=Yp(i.idToken);ne(o,r,"internal-error");const{sub:l}=o;return ne(t.uid===l,r,"user-mismatch"),As._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&tn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e1(t,e,n=!1){if(kt(t.app))return Promise.reject(Zn(t));const r="signIn",s=await ZE(t,r,e),i=await As._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function XN(t,e){return e1(hr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(t,e,n){var r;ne(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),ne(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),ne(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ne(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ne(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n1(t){const e=hr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function JN(t,e,n){const r=hr(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&t1(r,s,n),await Yc(r,s,"getOobCode",zN,"EMAIL_PASSWORD_PROVIDER")}async function ZN(t,e,n){if(kt(t.app))return Promise.reject(Zn(t));const r=hr(t),o=await Yc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KN,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&n1(t),u}),l=await As._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function eb(t,e,n){return kt(t.app)?Promise.reject(Zn(t)):XN(Se(t),Xi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&n1(t),r})}async function tb(t,e){const n=Se(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&t1(n.auth,s,e);const{email:i}=await $N(n.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nb(t,e){return Mn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rb(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Se(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Di(r,nb(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(t,e){return Se(t).setPersistence(e)}function ib(t,e,n,r){return Se(t).onIdTokenChanged(e,n,r)}function ob(t,e,n){return Se(t).beforeAuthStateChanged(e,n)}function ab(t,e,n,r){return Se(t).onAuthStateChanged(e,n,r)}function lb(t){return Se(t).signOut()}const Jc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jc,"1"),this.storage.removeItem(Jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=1e3,ub=10;class s1 extends r1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);wN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ub):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},cb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}s1.type="LOCAL";const i1=s1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1 extends r1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}o1.type="SESSION";const tm=o1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ju(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),u=await db(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ju.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const d=nm("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return window}function fb(t){Pn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(){return typeof Pn().WorkerGlobalScope<"u"&&typeof Pn().importScripts=="function"}async function pb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mb(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function gb(){return a1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="firebaseLocalStorageDb",yb=1,Zc="firebaseLocalStorage",c1="fbase_key";class Ga{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ou(t,e){return t.transaction([Zc],e?"readwrite":"readonly").objectStore(Zc)}function vb(){const t=indexedDB.deleteDatabase(l1);return new Ga(t).toPromise()}function yf(){const t=indexedDB.open(l1,yb);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Zc,{keyPath:c1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Zc)?e(r):(r.close(),await vb(),e(await yf()))})})}async function Iv(t,e,n){const r=Ou(t,!0).put({[c1]:e,value:n});return new Ga(r).toPromise()}async function _b(t,e){const n=Ou(t,!1).get(e),r=await new Ga(n).toPromise();return r===void 0?null:r.value}function Cv(t,e){const n=Ou(t,!0).delete(e);return new Ga(n).toPromise()}const wb=800,Eb=3;class u1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Eb)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return a1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ju._getInstance(gb()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await pb(),!this.activeServiceWorker)return;this.sender=new hb(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yf();return await Iv(e,Jc,"1"),await Cv(e,Jc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Iv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>_b(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Cv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ou(s,!1).getAll();return new Ga(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}u1.type="LOCAL";const xb=u1;new Wa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t,e){return e?Yn(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm extends Jp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Si(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Si(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Si(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Tb(t){return e1(t.auth,new rm(t),t.bypassAuthState)}function Sb(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),YN(n,new rm(t),t.bypassAuthState)}async function Ib(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),QN(n,new rm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Tb;case"linkViaPopup":case"linkViaRedirect":return Ib;case"reauthViaPopup":case"reauthViaRedirect":return Sb;default:tn(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=new Wa(2e3,1e4);async function Rb(t,e,n){if(kt(t.app))return Promise.reject(yn(t,"operation-not-supported-in-this-environment"));const r=hr(t);eN(t,e,em);const s=d1(r,n);return new ps(r,"signInViaPopup",e,s).executeNotNull()}class ps extends h1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ps.currentPopupAction&&ps.currentPopupAction.cancel(),ps.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){ar(this.filter.length===1,"Popup operations only handle one event");const e=nm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ps.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Cb.get())};e()}}ps.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="pendingRedirect",oc=new Map;class kb extends h1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=oc.get(this.auth._key());if(!e){try{const r=await Nb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}oc.set(this.auth._key(),e)}return this.bypassAuthState||oc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Nb(t,e){const n=jb(e),r=Pb(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function bb(t,e){oc.set(t._key(),e)}function Pb(t){return Yn(t._redirectPersistence)}function jb(t){return ic(Ab,t.config.apiKey,t.name)}async function Ob(t,e,n=!1){if(kt(t.app))return Promise.reject(Zn(t));const r=hr(t),s=d1(r,e),o=await new kb(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=10*60*1e3;class Lb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Vb(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!f1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(yn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Db&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rv(e))}saveEventToCache(e){this.cachedEventUids.add(Rv(e)),this.lastProcessedEventTime=Date.now()}}function Rv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function f1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Vb(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return f1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mb(t,e={}){return Mn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ub=/^https?/;async function $b(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Mb(t);for(const n of e)try{if(zb(n))return}catch{}tn(t,"unauthorized-domain")}function zb(t){const e=mf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Ub.test(n))return!1;if(Fb.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=new Wa(3e4,6e4);function Av(){const t=Pn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Wb(t){return new Promise((e,n)=>{var r,s,i;function o(){Av(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Av(),n(yn(t,"network-request-failed"))},timeout:Bb.get()})}if(!((s=(r=Pn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Pn().gapi)===null||i===void 0)&&i.load)o();else{const l=kN("iframefcb");return Pn()[l]=()=>{gapi.load?o():n(yn(t,"network-request-failed"))},QE(`${AN()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw ac=null,e})}let ac=null;function qb(t){return ac=ac||Wb(t),ac}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb=new Wa(5e3,15e3),Gb="__/auth/iframe",Kb="emulator/auth/iframe",Qb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Xb(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qp(e,Kb):`https://${t.config.authDomain}/${Gb}`,r={apiKey:e.apiKey,appName:t.name,v:Ls},s=Yb.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ba(r).slice(1)}`}async function Jb(t){const e=await qb(t),n=Pn().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:Xb(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qb,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=yn(t,"network-request-failed"),l=Pn().setTimeout(()=>{i(o)},Hb.get());function u(){Pn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eP=500,tP=600,nP="_blank",rP="http://localhost";class kv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sP(t,e,n,r=eP,s=tP){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},Zb),{width:r.toString(),height:s.toString(),top:i,left:o}),d=_t().toLowerCase();n&&(l=zE(d)?nP:n),UE(d)&&(e=e||rP,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[_,I])=>`${p}${_}=${I},`,"");if(_N(d)&&l!=="_self")return iP(e||"",l),new kv(null);const m=window.open(e||"",l,h);ne(m,t,"popup-blocked");try{m.focus()}catch{}return new kv(m)}function iP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP="__/auth/handler",aP="emulator/auth/handler",lP=encodeURIComponent("fac");async function Nv(t,e,n,r,s,i){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ls,eventId:s};if(e instanceof em){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",UA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries(i||{}))o[h]=m}if(e instanceof Ha){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),d=u?`#${lP}=${encodeURIComponent(u)}`:"";return`${cP(t)}?${Ba(l).slice(1)}${d}`}function cP({config:t}){return t.emulator?Qp(t,aP):`https://${t.authDomain}/${oP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh="webStorageSupport";class uP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tm,this._completeRedirectFn=Ob,this._overrideRedirectResult=bb}async _openPopup(e,n,r,s){var i;ar((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Nv(e,n,r,mf(),s);return sP(e,o,nm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Nv(e,n,r,mf(),s);return fb(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ar(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Jb(e),r=new Lb(e);return n.register("authEvent",s=>(ne(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(rh,{type:rh},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[rh];o!==void 0&&n(!!o),tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$b(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return GE()||$E()||Xp()}}const dP=uP;var bv="@firebase/auth",Pv="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pP(t){Cs(new Wr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KE(t)},d=new IN(r,s,i,u);return DN(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Cs(new Wr("auth-internal",e=>{const n=hr(e.getProvider("auth").getImmediate());return(r=>new hP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bn(bv,Pv,fP(t)),bn(bv,Pv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=5*60,gP=CE("authIdTokenMaxAge")||mP;let jv=null;const yP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>gP)return;const s=n==null?void 0:n.token;jv!==s&&(jv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function vP(t=qp()){const e=bu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ON(t,{popupRedirectResolver:dP,persistence:[xb,i1,tm]}),r=CE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=yP(i.toString());ob(n,o,()=>o(n.currentUser)),ib(n,l=>o(l))}}const s=TE("auth");return s&&LN(n,`http://${s}`),n}function _P(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}CN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=yn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",_P().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pP("Browser");var Ov=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ur,p1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function T(){}T.prototype=y.prototype,E.D=y.prototype,E.prototype=new T,E.prototype.constructor=E,E.C=function(R,j,O){for(var N=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)N[ee-2]=arguments[ee];return y.prototype[j].apply(R,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,y,T){T||(T=0);var R=Array(16);if(typeof y=="string")for(var j=0;16>j;++j)R[j]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(j=0;16>j;++j)R[j]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=E.g[0],T=E.g[1],j=E.g[2];var O=E.g[3],N=y+(O^T&(j^O))+R[0]+3614090360&4294967295;y=T+(N<<7&4294967295|N>>>25),N=O+(j^y&(T^j))+R[1]+3905402710&4294967295,O=y+(N<<12&4294967295|N>>>20),N=j+(T^O&(y^T))+R[2]+606105819&4294967295,j=O+(N<<17&4294967295|N>>>15),N=T+(y^j&(O^y))+R[3]+3250441966&4294967295,T=j+(N<<22&4294967295|N>>>10),N=y+(O^T&(j^O))+R[4]+4118548399&4294967295,y=T+(N<<7&4294967295|N>>>25),N=O+(j^y&(T^j))+R[5]+1200080426&4294967295,O=y+(N<<12&4294967295|N>>>20),N=j+(T^O&(y^T))+R[6]+2821735955&4294967295,j=O+(N<<17&4294967295|N>>>15),N=T+(y^j&(O^y))+R[7]+4249261313&4294967295,T=j+(N<<22&4294967295|N>>>10),N=y+(O^T&(j^O))+R[8]+1770035416&4294967295,y=T+(N<<7&4294967295|N>>>25),N=O+(j^y&(T^j))+R[9]+2336552879&4294967295,O=y+(N<<12&4294967295|N>>>20),N=j+(T^O&(y^T))+R[10]+4294925233&4294967295,j=O+(N<<17&4294967295|N>>>15),N=T+(y^j&(O^y))+R[11]+2304563134&4294967295,T=j+(N<<22&4294967295|N>>>10),N=y+(O^T&(j^O))+R[12]+1804603682&4294967295,y=T+(N<<7&4294967295|N>>>25),N=O+(j^y&(T^j))+R[13]+4254626195&4294967295,O=y+(N<<12&4294967295|N>>>20),N=j+(T^O&(y^T))+R[14]+2792965006&4294967295,j=O+(N<<17&4294967295|N>>>15),N=T+(y^j&(O^y))+R[15]+1236535329&4294967295,T=j+(N<<22&4294967295|N>>>10),N=y+(j^O&(T^j))+R[1]+4129170786&4294967295,y=T+(N<<5&4294967295|N>>>27),N=O+(T^j&(y^T))+R[6]+3225465664&4294967295,O=y+(N<<9&4294967295|N>>>23),N=j+(y^T&(O^y))+R[11]+643717713&4294967295,j=O+(N<<14&4294967295|N>>>18),N=T+(O^y&(j^O))+R[0]+3921069994&4294967295,T=j+(N<<20&4294967295|N>>>12),N=y+(j^O&(T^j))+R[5]+3593408605&4294967295,y=T+(N<<5&4294967295|N>>>27),N=O+(T^j&(y^T))+R[10]+38016083&4294967295,O=y+(N<<9&4294967295|N>>>23),N=j+(y^T&(O^y))+R[15]+3634488961&4294967295,j=O+(N<<14&4294967295|N>>>18),N=T+(O^y&(j^O))+R[4]+3889429448&4294967295,T=j+(N<<20&4294967295|N>>>12),N=y+(j^O&(T^j))+R[9]+568446438&4294967295,y=T+(N<<5&4294967295|N>>>27),N=O+(T^j&(y^T))+R[14]+3275163606&4294967295,O=y+(N<<9&4294967295|N>>>23),N=j+(y^T&(O^y))+R[3]+4107603335&4294967295,j=O+(N<<14&4294967295|N>>>18),N=T+(O^y&(j^O))+R[8]+1163531501&4294967295,T=j+(N<<20&4294967295|N>>>12),N=y+(j^O&(T^j))+R[13]+2850285829&4294967295,y=T+(N<<5&4294967295|N>>>27),N=O+(T^j&(y^T))+R[2]+4243563512&4294967295,O=y+(N<<9&4294967295|N>>>23),N=j+(y^T&(O^y))+R[7]+1735328473&4294967295,j=O+(N<<14&4294967295|N>>>18),N=T+(O^y&(j^O))+R[12]+2368359562&4294967295,T=j+(N<<20&4294967295|N>>>12),N=y+(T^j^O)+R[5]+4294588738&4294967295,y=T+(N<<4&4294967295|N>>>28),N=O+(y^T^j)+R[8]+2272392833&4294967295,O=y+(N<<11&4294967295|N>>>21),N=j+(O^y^T)+R[11]+1839030562&4294967295,j=O+(N<<16&4294967295|N>>>16),N=T+(j^O^y)+R[14]+4259657740&4294967295,T=j+(N<<23&4294967295|N>>>9),N=y+(T^j^O)+R[1]+2763975236&4294967295,y=T+(N<<4&4294967295|N>>>28),N=O+(y^T^j)+R[4]+1272893353&4294967295,O=y+(N<<11&4294967295|N>>>21),N=j+(O^y^T)+R[7]+4139469664&4294967295,j=O+(N<<16&4294967295|N>>>16),N=T+(j^O^y)+R[10]+3200236656&4294967295,T=j+(N<<23&4294967295|N>>>9),N=y+(T^j^O)+R[13]+681279174&4294967295,y=T+(N<<4&4294967295|N>>>28),N=O+(y^T^j)+R[0]+3936430074&4294967295,O=y+(N<<11&4294967295|N>>>21),N=j+(O^y^T)+R[3]+3572445317&4294967295,j=O+(N<<16&4294967295|N>>>16),N=T+(j^O^y)+R[6]+76029189&4294967295,T=j+(N<<23&4294967295|N>>>9),N=y+(T^j^O)+R[9]+3654602809&4294967295,y=T+(N<<4&4294967295|N>>>28),N=O+(y^T^j)+R[12]+3873151461&4294967295,O=y+(N<<11&4294967295|N>>>21),N=j+(O^y^T)+R[15]+530742520&4294967295,j=O+(N<<16&4294967295|N>>>16),N=T+(j^O^y)+R[2]+3299628645&4294967295,T=j+(N<<23&4294967295|N>>>9),N=y+(j^(T|~O))+R[0]+4096336452&4294967295,y=T+(N<<6&4294967295|N>>>26),N=O+(T^(y|~j))+R[7]+1126891415&4294967295,O=y+(N<<10&4294967295|N>>>22),N=j+(y^(O|~T))+R[14]+2878612391&4294967295,j=O+(N<<15&4294967295|N>>>17),N=T+(O^(j|~y))+R[5]+4237533241&4294967295,T=j+(N<<21&4294967295|N>>>11),N=y+(j^(T|~O))+R[12]+1700485571&4294967295,y=T+(N<<6&4294967295|N>>>26),N=O+(T^(y|~j))+R[3]+2399980690&4294967295,O=y+(N<<10&4294967295|N>>>22),N=j+(y^(O|~T))+R[10]+4293915773&4294967295,j=O+(N<<15&4294967295|N>>>17),N=T+(O^(j|~y))+R[1]+2240044497&4294967295,T=j+(N<<21&4294967295|N>>>11),N=y+(j^(T|~O))+R[8]+1873313359&4294967295,y=T+(N<<6&4294967295|N>>>26),N=O+(T^(y|~j))+R[15]+4264355552&4294967295,O=y+(N<<10&4294967295|N>>>22),N=j+(y^(O|~T))+R[6]+2734768916&4294967295,j=O+(N<<15&4294967295|N>>>17),N=T+(O^(j|~y))+R[13]+1309151649&4294967295,T=j+(N<<21&4294967295|N>>>11),N=y+(j^(T|~O))+R[4]+4149444226&4294967295,y=T+(N<<6&4294967295|N>>>26),N=O+(T^(y|~j))+R[11]+3174756917&4294967295,O=y+(N<<10&4294967295|N>>>22),N=j+(y^(O|~T))+R[2]+718787259&4294967295,j=O+(N<<15&4294967295|N>>>17),N=T+(O^(j|~y))+R[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(j+(N<<21&4294967295|N>>>11))&4294967295,E.g[2]=E.g[2]+j&4294967295,E.g[3]=E.g[3]+O&4294967295}r.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var T=y-this.blockSize,R=this.B,j=this.h,O=0;O<y;){if(j==0)for(;O<=T;)s(this,E,O),O+=this.blockSize;if(typeof E=="string"){for(;O<y;)if(R[j++]=E.charCodeAt(O++),j==this.blockSize){s(this,R),j=0;break}}else for(;O<y;)if(R[j++]=E[O++],j==this.blockSize){s(this,R),j=0;break}}this.h=j,this.o+=y},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var T=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=T&255,T/=256;for(this.u(E),E=Array(16),y=T=0;4>y;++y)for(var R=0;32>R;R+=8)E[T++]=this.g[y]>>>R&255;return E};function i(E,y){var T=l;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=y(E)}function o(E,y){this.h=y;for(var T=[],R=!0,j=E.length-1;0<=j;j--){var O=E[j]|0;R&&O==y||(T[j]=O,R=!1)}this.g=T}var l={};function u(E){return-128<=E&&128>E?i(E,function(y){return new o([y|0],0>y?-1:0)}):new o([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return b(d(-E));for(var y=[],T=1,R=0;E>=T;R++)y[R]=E/T|0,T*=4294967296;return new o(y,0)}function h(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return b(h(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=d(Math.pow(y,8)),R=m,j=0;j<E.length;j+=8){var O=Math.min(8,E.length-j),N=parseInt(E.substring(j,j+O),y);8>O?(O=d(Math.pow(y,O)),R=R.j(O).add(d(N))):(R=R.j(T),R=R.add(d(N)))}return R}var m=u(0),p=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(A(this))return-b(this).m();for(var E=0,y=1,T=0;T<this.g.length;T++){var R=this.i(T);E+=(0<=R?R:4294967296+R)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(I(this))return"0";if(A(this))return"-"+b(this).toString(E);for(var y=d(Math.pow(E,6)),T=this,R="";;){var j=k(T,y).g;T=w(T,j.j(y));var O=((0<T.g.length?T.g[0]:T.h)>>>0).toString(E);if(T=j,I(T))return O+R;for(;6>O.length;)O="0"+O;R=O+R}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function I(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function A(E){return E.h==-1}t.l=function(E){return E=w(this,E),A(E)?-1:I(E)?0:1};function b(E){for(var y=E.g.length,T=[],R=0;R<y;R++)T[R]=~E.g[R];return new o(T,~E.h).add(p)}t.abs=function(){return A(this)?b(this):this},t.add=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],R=0,j=0;j<=y;j++){var O=R+(this.i(j)&65535)+(E.i(j)&65535),N=(O>>>16)+(this.i(j)>>>16)+(E.i(j)>>>16);R=N>>>16,O&=65535,N&=65535,T[j]=N<<16|O}return new o(T,T[T.length-1]&-2147483648?-1:0)};function w(E,y){return E.add(b(y))}t.j=function(E){if(I(this)||I(E))return m;if(A(this))return A(E)?b(this).j(b(E)):b(b(this).j(E));if(A(E))return b(this.j(b(E)));if(0>this.l(_)&&0>E.l(_))return d(this.m()*E.m());for(var y=this.g.length+E.g.length,T=[],R=0;R<2*y;R++)T[R]=0;for(R=0;R<this.g.length;R++)for(var j=0;j<E.g.length;j++){var O=this.i(R)>>>16,N=this.i(R)&65535,ee=E.i(j)>>>16,z=E.i(j)&65535;T[2*R+2*j]+=N*z,v(T,2*R+2*j),T[2*R+2*j+1]+=O*z,v(T,2*R+2*j+1),T[2*R+2*j+1]+=N*ee,v(T,2*R+2*j+1),T[2*R+2*j+2]+=O*ee,v(T,2*R+2*j+2)}for(R=0;R<y;R++)T[R]=T[2*R+1]<<16|T[2*R];for(R=y;R<2*y;R++)T[R]=0;return new o(T,0)};function v(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function x(E,y){this.g=E,this.h=y}function k(E,y){if(I(y))throw Error("division by zero");if(I(E))return new x(m,m);if(A(E))return y=k(b(E),y),new x(b(y.g),b(y.h));if(A(y))return y=k(E,b(y)),new x(b(y.g),y.h);if(30<E.g.length){if(A(E)||A(y))throw Error("slowDivide_ only works with positive integers.");for(var T=p,R=y;0>=R.l(E);)T=D(T),R=D(R);var j=V(T,1),O=V(R,1);for(R=V(R,2),T=V(T,2);!I(R);){var N=O.add(R);0>=N.l(E)&&(j=j.add(T),O=N),R=V(R,1),T=V(T,1)}return y=w(E,j.j(y)),new x(j,y)}for(j=m;0<=E.l(y);){for(T=Math.max(1,Math.floor(E.m()/y.m())),R=Math.ceil(Math.log(T)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),O=d(T),N=O.j(y);A(N)||0<N.l(E);)T-=R,O=d(T),N=O.j(y);I(O)&&(O=p),j=j.add(O),E=w(E,N)}return new x(j,E)}t.A=function(E){return k(this,E).h},t.and=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],R=0;R<y;R++)T[R]=this.i(R)&E.i(R);return new o(T,this.h&E.h)},t.or=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],R=0;R<y;R++)T[R]=this.i(R)|E.i(R);return new o(T,this.h|E.h)},t.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),T=[],R=0;R<y;R++)T[R]=this.i(R)^E.i(R);return new o(T,this.h^E.h)};function D(E){for(var y=E.g.length+1,T=[],R=0;R<y;R++)T[R]=E.i(R)<<1|E.i(R-1)>>>31;return new o(T,E.h)}function V(E,y){var T=y>>5;y%=32;for(var R=E.g.length-T,j=[],O=0;O<R;O++)j[O]=0<y?E.i(O+T)>>>y|E.i(O+T+1)<<32-y:E.i(O+T);return new o(j,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,p1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Ur=o}).apply(typeof Ov<"u"?Ov:typeof self<"u"?self:typeof window<"u"?window:{});var Ml=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var m1,Uo,g1,lc,vf,y1,v1,_1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,g){return c==Array.prototype||c==Object.prototype||(c[f]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ml=="object"&&Ml];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(c,f){if(f)e:{var g=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var L=c[S];if(!(L in g))break e;g=g[L]}c=c[c.length-1],S=g[c],f=f(S),f!=S&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var g=0,S=!1,L={next:function(){if(!S&&g<c.length){var F=g++;return{value:f(F,c[F]),done:!1}}return S=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(c){return c||function(){return i(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function d(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,g){return c.call.apply(c.bind,arguments)}function m(c,f,g){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,S),c.apply(f,L)}}return function(){return c.apply(f,arguments)}}function p(c,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,p.apply(null,arguments)}function _(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function I(c,f){function g(){}g.prototype=f.prototype,c.aa=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(S,L,F){for(var Q=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)Q[Te-2]=arguments[Te];return f.prototype[L].apply(S,Q)}}function A(c){const f=c.length;if(0<f){const g=Array(f);for(let S=0;S<f;S++)g[S]=c[S];return g}return[]}function b(c,f){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(u(S)){const L=c.length||0,F=S.length||0;c.length=L+F;for(let Q=0;Q<F;Q++)c[L+Q]=S[Q]}else c.push(S)}}class w{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function v(c){return/^[\s\xa0]*$/.test(c)}function x(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function k(c){return k[" "](c),c}k[" "]=function(){};var D=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function V(c,f,g){for(const S in c)f.call(g,c[S],S,c)}function E(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function y(c){const f={};for(const g in c)f[g]=c[g];return f}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(c,f){let g,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(g in S)c[g]=S[g];for(let F=0;F<T.length;F++)g=T[F],Object.prototype.hasOwnProperty.call(S,g)&&(c[g]=S[g])}}function j(c){var f=1;c=c.split(":");const g=[];for(;0<f&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function O(c){l.setTimeout(()=>{throw c},0)}function N(){var c=M;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class ee{constructor(){this.h=this.g=null}add(f,g){const S=z.get();S.set(f,g),this.h?this.h.next=S:this.g=S,this.h=S}}var z=new w(()=>new H,c=>c.reset());class H{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let W,U=!1,M=new ee,G=()=>{const c=l.Promise.resolve(void 0);W=()=>{c.then(ie)}};var ie=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(g){O(g)}var f=z;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}U=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var Ct=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};l.addEventListener("test",g,f),l.removeEventListener("test",g,f)}catch{}return c}();function Ke(c,f){if(Ee.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(D){e:{try{k(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ht[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ke.aa.h.call(this)}}I(Ke,Ee);var Ht={2:"touch",3:"pen",4:"mouse"};Ke.prototype.h=function(){Ke.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Lt="closure_listenable_"+(1e6*Math.random()|0),nd=0;function rd(c,f,g,S,L){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!S,this.ha=L,this.key=++nd,this.da=this.fa=!1}function ns(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function zs(c){this.src=c,this.g={},this.h=0}zs.prototype.add=function(c,f,g,S,L){var F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);var Q=so(c,f,S,L);return-1<Q?(f=c[Q],g||(f.fa=!1)):(f=new rd(f,this.src,F,!!S,L),f.fa=g,c.push(f)),f};function ro(c,f){var g=f.type;if(g in c.g){var S=c.g[g],L=Array.prototype.indexOf.call(S,f,void 0),F;(F=0<=L)&&Array.prototype.splice.call(S,L,1),F&&(ns(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function so(c,f,g,S){for(var L=0;L<c.length;++L){var F=c[L];if(!F.da&&F.listener==f&&F.capture==!!g&&F.ha==S)return L}return-1}var io="closure_lm_"+(1e6*Math.random()|0),Bs={};function Ws(c,f,g,S,L){if(S&&S.once)return tl(c,f,g,S,L);if(Array.isArray(f)){for(var F=0;F<f.length;F++)Ws(c,f[F],g,S,L);return null}return g=ae(g),c&&c[Lt]?c.K(f,g,d(S)?!!S.capture:!!S,L):el(c,f,g,!1,S,L)}function el(c,f,g,S,L,F){if(!f)throw Error("Invalid event type");var Q=d(L)?!!L.capture:!!L,Te=lo(c);if(Te||(c[io]=Te=new zs(c)),g=Te.add(f,g,S,Q,F),g.proxy)return g;if(S=sd(),g.proxy=S,S.src=c,S.listener=g,c.addEventListener)Ct||(L=Q),L===void 0&&(L=!1),c.addEventListener(f.toString(),S,L);else if(c.attachEvent)c.attachEvent(ao(f.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function sd(){function c(g){return f.call(c.src,c.listener,g)}const f=id;return c}function tl(c,f,g,S,L){if(Array.isArray(f)){for(var F=0;F<f.length;F++)tl(c,f[F],g,S,L);return null}return g=ae(g),c&&c[Lt]?c.L(f,g,d(S)?!!S.capture:!!S,L):el(c,f,g,!0,S,L)}function nl(c,f,g,S,L){if(Array.isArray(f))for(var F=0;F<f.length;F++)nl(c,f[F],g,S,L);else S=d(S)?!!S.capture:!!S,g=ae(g),c&&c[Lt]?(c=c.i,f=String(f).toString(),f in c.g&&(F=c.g[f],g=so(F,g,S,L),-1<g&&(ns(F[g]),Array.prototype.splice.call(F,g,1),F.length==0&&(delete c.g[f],c.h--)))):c&&(c=lo(c))&&(f=c.g[f.toString()],c=-1,f&&(c=so(f,g,S,L)),(g=-1<c?f[c]:null)&&oo(g))}function oo(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[Lt])ro(f.i,c);else{var g=c.type,S=c.proxy;f.removeEventListener?f.removeEventListener(g,S,c.capture):f.detachEvent?f.detachEvent(ao(g),S):f.addListener&&f.removeListener&&f.removeListener(S),(g=lo(f))?(ro(g,c),g.h==0&&(g.src=null,f[io]=null)):ns(c)}}}function ao(c){return c in Bs?Bs[c]:Bs[c]="on"+c}function id(c,f){if(c.da)c=!0;else{f=new Ke(f,this);var g=c.listener,S=c.ha||c.src;c.fa&&oo(c),c=g.call(S,f)}return c}function lo(c){return c=c[io],c instanceof zs?c:null}var K="__closure_events_fn_"+(1e9*Math.random()>>>0);function ae(c){return typeof c=="function"?c:(c[K]||(c[K]=function(f){return c.handleEvent(f)}),c[K])}function ue(){me.call(this),this.i=new zs(this),this.M=this,this.F=null}I(ue,me),ue.prototype[Lt]=!0,ue.prototype.removeEventListener=function(c,f,g,S){nl(this,c,f,g,S)};function Ne(c,f){var g,S=c.F;if(S)for(g=[];S;S=S.F)g.push(S);if(c=c.M,S=f.type||f,typeof f=="string")f=new Ee(f,c);else if(f instanceof Ee)f.target=f.target||c;else{var L=f;f=new Ee(S,c),R(f,L)}if(L=!0,g)for(var F=g.length-1;0<=F;F--){var Q=f.g=g[F];L=rl(Q,S,!0,f)&&L}if(Q=f.g=c,L=rl(Q,S,!0,f)&&L,L=rl(Q,S,!1,f)&&L,g)for(F=0;F<g.length;F++)Q=f.g=g[F],L=rl(Q,S,!1,f)&&L}ue.prototype.N=function(){if(ue.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var g=c.g[f],S=0;S<g.length;S++)ns(g[S]);delete c.g[f],c.h--}}this.F=null},ue.prototype.K=function(c,f,g,S){return this.i.add(String(c),f,!1,g,S)},ue.prototype.L=function(c,f,g,S){return this.i.add(String(c),f,!0,g,S)};function rl(c,f,g,S){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,F=0;F<f.length;++F){var Q=f[F];if(Q&&!Q.da&&Q.capture==g){var Te=Q.listener,et=Q.ha||Q.src;Q.fa&&ro(c.i,Q),L=Te.call(et,S)!==!1&&L}}return L&&!S.defaultPrevented}function Gm(c,f,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(c,f||0)}function Km(c){c.g=Gm(()=>{c.g=null,c.i&&(c.i=!1,Km(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class ST extends me{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Km(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function co(c){me.call(this),this.h=c,this.g={}}I(co,me);var Qm=[];function Ym(c){V(c.g,function(f,g){this.g.hasOwnProperty(g)&&oo(f)},c),c.g={}}co.prototype.N=function(){co.aa.N.call(this),Ym(this)},co.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var od=l.JSON.stringify,IT=l.JSON.parse,CT=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function ad(){}ad.prototype.h=null;function Xm(c){return c.h||(c.h=c.i())}function Jm(){}var uo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ld(){Ee.call(this,"d")}I(ld,Ee);function cd(){Ee.call(this,"c")}I(cd,Ee);var rs={},Zm=null;function sl(){return Zm=Zm||new ue}rs.La="serverreachability";function eg(c){Ee.call(this,rs.La,c)}I(eg,Ee);function ho(c){const f=sl();Ne(f,new eg(f))}rs.STAT_EVENT="statevent";function tg(c,f){Ee.call(this,rs.STAT_EVENT,c),this.stat=f}I(tg,Ee);function wt(c){const f=sl();Ne(f,new tg(f,c))}rs.Ma="timingevent";function ng(c,f){Ee.call(this,rs.Ma,c),this.size=f}I(ng,Ee);function fo(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},f)}function po(){this.g=!0}po.prototype.xa=function(){this.g=!1};function RT(c,f,g,S,L,F){c.info(function(){if(c.g)if(F)for(var Q="",Te=F.split("&"),et=0;et<Te.length;et++){var ye=Te[et].split("=");if(1<ye.length){var ct=ye[0];ye=ye[1];var ut=ct.split("_");Q=2<=ut.length&&ut[1]=="type"?Q+(ct+"="+ye+"&"):Q+(ct+"=redacted&")}}else Q=null;else Q=F;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+f+`
`+g+`
`+Q})}function AT(c,f,g,S,L,F,Q){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+f+`
`+g+`
`+F+" "+Q})}function qs(c,f,g,S){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+NT(c,g)+(S?" "+S:"")})}function kT(c,f){c.info(function(){return"TIMEOUT: "+f})}po.prototype.info=function(){};function NT(c,f){if(!c.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var S=g[c];if(!(2>S.length)){var L=S[1];if(Array.isArray(L)&&!(1>L.length)){var F=L[0];if(F!="noop"&&F!="stop"&&F!="close")for(var Q=1;Q<L.length;Q++)L[Q]=""}}}}return od(g)}catch{return f}}var il={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ud;function ol(){}I(ol,ad),ol.prototype.g=function(){return new XMLHttpRequest},ol.prototype.i=function(){return{}},ud=new ol;function pr(c,f,g,S){this.j=c,this.i=f,this.l=g,this.R=S||1,this.U=new co(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sg}function sg(){this.i=null,this.g="",this.h=!1}var ig={},dd={};function hd(c,f,g){c.L=1,c.v=ul(Un(f)),c.m=g,c.P=!0,og(c,null)}function og(c,f){c.F=Date.now(),al(c),c.A=Un(c.v);var g=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),wg(g.i,"t",S),c.C=0,g=c.j.J,c.h=new sg,c.g=Mg(c.j,g?f:null,!c.m),0<c.O&&(c.M=new ST(p(c.Y,c,c.g),c.O)),f=c.U,g=c.g,S=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(Qm[0]=L.toString()),L=Qm);for(var F=0;F<L.length;F++){var Q=Ws(g,L[F],S||f.handleEvent,!1,f.h||f);if(!Q)break;f.g[Q.key]=Q}f=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),ho(),RT(c.i,c.u,c.A,c.l,c.R,c.m)}pr.prototype.ca=function(c){c=c.target;const f=this.M;f&&$n(c)==3?f.j():this.Y(c)},pr.prototype.Y=function(c){try{if(c==this.g)e:{const ut=$n(this.g);var f=this.g.Ba();const Ks=this.g.Z();if(!(3>ut)&&(ut!=3||this.g&&(this.h.h||this.g.oa()||Rg(this.g)))){this.J||ut!=4||f==7||(f==8||0>=Ks?ho(3):ho(2)),fd(this);var g=this.g.Z();this.X=g;t:if(ag(this)){var S=Rg(this.g);c="";var L=S.length,F=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ss(this),mo(this);var Q="";break t}this.h.i=new l.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,c+=this.h.i.decode(S[f],{stream:!(F&&f==L-1)});S.length=0,this.h.g+=c,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=g==200,AT(this.i,this.u,this.A,this.l,this.R,ut,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,et=this.g;if((Te=et.g?et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Te)){var ye=Te;break t}}ye=null}if(g=ye)qs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pd(this,g);else{this.o=!1,this.s=3,wt(12),ss(this),mo(this);break e}}if(this.P){g=!0;let nn;for(;!this.J&&this.C<Q.length;)if(nn=bT(this,Q),nn==dd){ut==4&&(this.s=4,wt(14),g=!1),qs(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==ig){this.s=4,wt(15),qs(this.i,this.l,Q,"[Invalid Chunk]"),g=!1;break}else qs(this.i,this.l,nn,null),pd(this,nn);if(ag(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||Q.length!=0||this.h.h||(this.s=1,wt(16),g=!1),this.o=this.o&&g,!g)qs(this.i,this.l,Q,"[Invalid Chunked Response]"),ss(this),mo(this);else if(0<Q.length&&!this.W){this.W=!0;var ct=this.j;ct.g==this&&ct.ba&&!ct.M&&(ct.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),wd(ct),ct.M=!0,wt(11))}}else qs(this.i,this.l,Q,null),pd(this,Q);ut==4&&ss(this),this.o&&!this.J&&(ut==4?Og(this.j,this):(this.o=!1,al(this)))}else KT(this.g),g==400&&0<Q.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),ss(this),mo(this)}}}catch{}finally{}};function ag(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function bT(c,f){var g=c.C,S=f.indexOf(`
`,g);return S==-1?dd:(g=Number(f.substring(g,S)),isNaN(g)?ig:(S+=1,S+g>f.length?dd:(f=f.slice(S,S+g),c.C=S+g,f)))}pr.prototype.cancel=function(){this.J=!0,ss(this)};function al(c){c.S=Date.now()+c.I,lg(c,c.I)}function lg(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=fo(p(c.ba,c),f)}function fd(c){c.B&&(l.clearTimeout(c.B),c.B=null)}pr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(kT(this.i,this.A),this.L!=2&&(ho(),wt(17)),ss(this),this.s=2,mo(this)):lg(this,this.S-c)};function mo(c){c.j.G==0||c.J||Og(c.j,c)}function ss(c){fd(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,Ym(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function pd(c,f){try{var g=c.j;if(g.G!=0&&(g.g==c||md(g.h,c))){if(!c.K&&md(g.h,c)&&g.G==3){try{var S=g.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)gl(g),pl(g);else break e;_d(g),wt(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=fo(p(g.Za,g),6e3));if(1>=dg(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else os(g,11)}else if((c.K||g.g==c)&&gl(g),!v(f))for(L=g.Da.g.parse(f),f=0;f<L.length;f++){let ye=L[f];if(g.T=ye[0],ye=ye[1],g.G==2)if(ye[0]=="c"){g.K=ye[1],g.ia=ye[2];const ct=ye[3];ct!=null&&(g.la=ct,g.j.info("VER="+g.la));const ut=ye[4];ut!=null&&(g.Aa=ut,g.j.info("SVER="+g.Aa));const Ks=ye[5];Ks!=null&&typeof Ks=="number"&&0<Ks&&(S=1.5*Ks,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const nn=c.g;if(nn){const vl=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vl){var F=S.h;F.g||vl.indexOf("spdy")==-1&&vl.indexOf("quic")==-1&&vl.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(gd(F,F.h),F.h=null))}if(S.D){const Ed=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ed&&(S.ya=Ed,Re(S.I,S.D,Ed))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var Q=c;if(S.qa=Vg(S,S.J?S.ia:null,S.W),Q.K){hg(S.h,Q);var Te=Q,et=S.L;et&&(Te.I=et),Te.B&&(fd(Te),al(Te)),S.g=Q}else Pg(S);0<g.i.length&&ml(g)}else ye[0]!="stop"&&ye[0]!="close"||os(g,7);else g.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?os(g,7):vd(g):ye[0]!="noop"&&g.l&&g.l.ta(ye),g.v=0)}}ho(4)}catch{}}var PT=class{constructor(c,f){this.g=c,this.map=f}};function cg(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ug(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function dg(c){return c.h?1:c.g?c.g.size:0}function md(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function gd(c,f){c.g?c.g.add(f):c.h=f}function hg(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}cg.prototype.cancel=function(){if(this.i=fg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function fg(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.D);return f}return A(c.i)}function jT(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var f=[],g=c.length,S=0;S<g;S++)f.push(c[S]);return f}f=[],g=0;for(S in c)f[g++]=c[S];return f}function OT(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var f=[];c=c.length;for(var g=0;g<c;g++)f.push(g);return f}f=[],g=0;for(const S in c)f[g++]=S;return f}}}function pg(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var g=OT(c),S=jT(c),L=S.length,F=0;F<L;F++)f.call(void 0,S[F],g&&g[F],c)}var mg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function DT(c,f){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var S=c[g].indexOf("="),L=null;if(0<=S){var F=c[g].substring(0,S);L=c[g].substring(S+1)}else F=c[g];f(F,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function is(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof is){this.h=c.h,ll(this,c.j),this.o=c.o,this.g=c.g,cl(this,c.s),this.l=c.l;var f=c.i,g=new vo;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),gg(this,g),this.m=c.m}else c&&(f=String(c).match(mg))?(this.h=!1,ll(this,f[1]||"",!0),this.o=go(f[2]||""),this.g=go(f[3]||"",!0),cl(this,f[4]),this.l=go(f[5]||"",!0),gg(this,f[6]||"",!0),this.m=go(f[7]||"")):(this.h=!1,this.i=new vo(null,this.h))}is.prototype.toString=function(){var c=[],f=this.j;f&&c.push(yo(f,yg,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(yo(f,yg,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(yo(g,g.charAt(0)=="/"?MT:VT,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",yo(g,UT)),c.join("")};function Un(c){return new is(c)}function ll(c,f,g){c.j=g?go(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function cl(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function gg(c,f,g){f instanceof vo?(c.i=f,$T(c.i,c.h)):(g||(f=yo(f,FT)),c.i=new vo(f,c.h))}function Re(c,f,g){c.i.set(f,g)}function ul(c){return Re(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function go(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function yo(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,LT),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function LT(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var yg=/[#\/\?@]/g,VT=/[#\?:]/g,MT=/[#\?]/g,FT=/[#\?@]/g,UT=/#/g;function vo(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function mr(c){c.g||(c.g=new Map,c.h=0,c.i&&DT(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=vo.prototype,t.add=function(c,f){mr(this),this.i=null,c=Hs(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function vg(c,f){mr(c),f=Hs(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function _g(c,f){return mr(c),f=Hs(c,f),c.g.has(f)}t.forEach=function(c,f){mr(this),this.g.forEach(function(g,S){g.forEach(function(L){c.call(f,L,S,this)},this)},this)},t.na=function(){mr(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let S=0;S<f.length;S++){const L=c[S];for(let F=0;F<L.length;F++)g.push(f[S])}return g},t.V=function(c){mr(this);let f=[];if(typeof c=="string")_g(this,c)&&(f=f.concat(this.g.get(Hs(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)f=f.concat(c[g])}return f},t.set=function(c,f){return mr(this),this.i=null,c=Hs(this,c),_g(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function wg(c,f,g){vg(c,f),0<g.length&&(c.i=null,c.g.set(Hs(c,f),A(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var S=f[g];const F=encodeURIComponent(String(S)),Q=this.V(S);for(S=0;S<Q.length;S++){var L=F;Q[S]!==""&&(L+="="+encodeURIComponent(String(Q[S]))),c.push(L)}}return this.i=c.join("&")};function Hs(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function $T(c,f){f&&!c.j&&(mr(c),c.i=null,c.g.forEach(function(g,S){var L=S.toLowerCase();S!=L&&(vg(this,S),wg(this,L,g))},c)),c.j=f}function zT(c,f){const g=new po;if(l.Image){const S=new Image;S.onload=_(gr,g,"TestLoadImage: loaded",!0,f,S),S.onerror=_(gr,g,"TestLoadImage: error",!1,f,S),S.onabort=_(gr,g,"TestLoadImage: abort",!1,f,S),S.ontimeout=_(gr,g,"TestLoadImage: timeout",!1,f,S),l.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else f(!1)}function BT(c,f){const g=new po,S=new AbortController,L=setTimeout(()=>{S.abort(),gr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:S.signal}).then(F=>{clearTimeout(L),F.ok?gr(g,"TestPingServer: ok",!0,f):gr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),gr(g,"TestPingServer: error",!1,f)})}function gr(c,f,g,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(g)}catch{}}function WT(){this.g=new CT}function qT(c,f,g){const S=g||"";try{pg(c,function(L,F){let Q=L;d(L)&&(Q=od(L)),f.push(S+F+"="+encodeURIComponent(Q))})}catch(L){throw f.push(S+"type="+encodeURIComponent("_badmap")),L}}function dl(c){this.l=c.Ub||null,this.j=c.eb||!1}I(dl,ad),dl.prototype.g=function(){return new hl(this.l,this.j)},dl.prototype.i=function(c){return function(){return c}}({});function hl(c,f){ue.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(hl,ue),t=hl.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,wo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_o(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,wo(this)),this.g&&(this.readyState=3,wo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Eg(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Eg(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?_o(this):wo(this),this.readyState==3&&Eg(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,_o(this))},t.Qa=function(c){this.g&&(this.response=c,_o(this))},t.ga=function(){this.g&&_o(this)};function _o(c){c.readyState=4,c.l=null,c.j=null,c.v=null,wo(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function wo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(hl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function xg(c){let f="";return V(c,function(g,S){f+=S,f+=":",f+=g,f+=`\r
`}),f}function yd(c,f,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=xg(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):Re(c,f,g))}function Ve(c){ue.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Ve,ue);var HT=/^https?$/i,GT=["POST","PUT"];t=Ve.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ud.g(),this.v=this.o?Xm(this.o):Xm(ud),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(F){Tg(this,F);return}if(c=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)g.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const F of S.keys())g.set(F,S.get(F));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(F=>F.toLowerCase()=="content-type"),L=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(GT,f,void 0))||S||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,Q]of g)this.g.setRequestHeader(F,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cg(this),this.u=!0,this.g.send(c),this.u=!1}catch(F){Tg(this,F)}};function Tg(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Sg(c),fl(c)}function Sg(c){c.A||(c.A=!0,Ne(c,"complete"),Ne(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ne(this,"complete"),Ne(this,"abort"),fl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fl(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ig(this):this.bb())},t.bb=function(){Ig(this)};function Ig(c){if(c.h&&typeof o<"u"&&(!c.v[1]||$n(c)!=4||c.Z()!=2)){if(c.u&&$n(c)==4)Gm(c.Ea,0,c);else if(Ne(c,"readystatechange"),$n(c)==4){c.h=!1;try{const Q=c.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var S;if(S=Q===0){var L=String(c.D).match(mg)[1]||null;!L&&l.self&&l.self.location&&(L=l.self.location.protocol.slice(0,-1)),S=!HT.test(L?L.toLowerCase():"")}g=S}if(g)Ne(c,"complete"),Ne(c,"success");else{c.m=6;try{var F=2<$n(c)?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.Z()+"]",Sg(c)}}finally{fl(c)}}}}function fl(c,f){if(c.g){Cg(c);const g=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||Ne(c,"ready");try{g.onreadystatechange=S}catch{}}}function Cg(c){c.I&&(l.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function $n(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),IT(f)}};function Rg(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function KT(c){const f={};c=(c.g&&2<=$n(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(v(c[S]))continue;var g=j(c[S]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const F=f[L]||[];f[L]=F,F.push(g)}E(f,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Eo(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function Ag(c){this.Aa=0,this.i=[],this.j=new po,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Eo("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Eo("baseRetryDelayMs",5e3,c),this.cb=Eo("retryDelaySeedMs",1e4,c),this.Wa=Eo("forwardChannelMaxRetries",2,c),this.wa=Eo("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new cg(c&&c.concurrentRequestLimit),this.Da=new WT,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ag.prototype,t.la=8,t.G=1,t.connect=function(c,f,g,S){wt(0),this.W=c,this.H=f||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=Vg(this,null,this.W),ml(this)};function vd(c){if(kg(c),c.G==3){var f=c.U++,g=Un(c.I);if(Re(g,"SID",c.K),Re(g,"RID",f),Re(g,"TYPE","terminate"),xo(c,g),f=new pr(c,c.j,f),f.L=2,f.v=ul(Un(g)),g=!1,l.navigator&&l.navigator.sendBeacon)try{g=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&l.Image&&(new Image().src=f.v,g=!0),g||(f.g=Mg(f.j,null),f.g.ea(f.v)),f.F=Date.now(),al(f)}Lg(c)}function pl(c){c.g&&(wd(c),c.g.cancel(),c.g=null)}function kg(c){pl(c),c.u&&(l.clearTimeout(c.u),c.u=null),gl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function ml(c){if(!ug(c.h)&&!c.s){c.s=!0;var f=c.Ga;W||G(),U||(W(),U=!0),M.add(f,c),c.B=0}}function QT(c,f){return dg(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=fo(p(c.Ga,c,f),Dg(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new pr(this,this.j,c);let F=this.o;if(this.S&&(F?(F=y(F),R(F,this.S)):F=this.S),this.m!==null||this.O||(L.H=F,F=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=bg(this,L,f),g=Un(this.I),Re(g,"RID",c),Re(g,"CVER",22),this.D&&Re(g,"X-HTTP-Session-Id",this.D),xo(this,g),F&&(this.O?f="headers="+encodeURIComponent(String(xg(F)))+"&"+f:this.m&&yd(g,this.m,F)),gd(this.h,L),this.Ua&&Re(g,"TYPE","init"),this.P?(Re(g,"$req",f),Re(g,"SID","null"),L.T=!0,hd(L,g,null)):hd(L,g,f),this.G=2}}else this.G==3&&(c?Ng(this,c):this.i.length==0||ug(this.h)||Ng(this))};function Ng(c,f){var g;f?g=f.l:g=c.U++;const S=Un(c.I);Re(S,"SID",c.K),Re(S,"RID",g),Re(S,"AID",c.T),xo(c,S),c.m&&c.o&&yd(S,c.m,c.o),g=new pr(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),f&&(c.i=f.D.concat(c.i)),f=bg(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),gd(c.h,g),hd(g,S,f)}function xo(c,f){c.H&&V(c.H,function(g,S){Re(f,S,g)}),c.l&&pg({},function(g,S){Re(f,S,g)})}function bg(c,f,g){g=Math.min(c.i.length,g);var S=c.l?p(c.l.Na,c.l,c):null;e:{var L=c.i;let F=-1;for(;;){const Q=["count="+g];F==-1?0<g?(F=L[0].g,Q.push("ofs="+F)):F=0:Q.push("ofs="+F);let Te=!0;for(let et=0;et<g;et++){let ye=L[et].g;const ct=L[et].map;if(ye-=F,0>ye)F=Math.max(0,L[et].g-100),Te=!1;else try{qT(ct,Q,"req"+ye+"_")}catch{S&&S(ct)}}if(Te){S=Q.join("&");break e}}}return c=c.i.splice(0,g),f.D=c,S}function Pg(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;W||G(),U||(W(),U=!0),M.add(f,c),c.v=0}}function _d(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=fo(p(c.Fa,c),Dg(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,jg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=fo(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),pl(this),jg(this))};function wd(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function jg(c){c.g=new pr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=Un(c.qa);Re(f,"RID","rpc"),Re(f,"SID",c.K),Re(f,"AID",c.T),Re(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&Re(f,"TO",c.ja),Re(f,"TYPE","xmlhttp"),xo(c,f),c.m&&c.o&&yd(f,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=ul(Un(f)),g.m=null,g.P=!0,og(g,c)}t.Za=function(){this.C!=null&&(this.C=null,pl(this),_d(this),wt(19))};function gl(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function Og(c,f){var g=null;if(c.g==f){gl(c),wd(c),c.g=null;var S=2}else if(md(c.h,f))g=f.D,hg(c.h,f),S=1;else return;if(c.G!=0){if(f.o)if(S==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var L=c.B;S=sl(),Ne(S,new ng(S,g)),ml(c)}else Pg(c);else if(L=f.s,L==3||L==0&&0<f.X||!(S==1&&QT(c,f)||S==2&&_d(c)))switch(g&&0<g.length&&(f=c.h,f.i=f.i.concat(g)),L){case 1:os(c,5);break;case 4:os(c,10);break;case 3:os(c,6);break;default:os(c,2)}}}function Dg(c,f){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*f}function os(c,f){if(c.j.info("Error code "+f),f==2){var g=p(c.fb,c),S=c.Xa;const L=!S;S=new is(S||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ll(S,"https"),ul(S),L?zT(S.toString(),g):BT(S.toString(),g)}else wt(2);c.G=0,c.l&&c.l.sa(f),Lg(c),kg(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Lg(c){if(c.G=0,c.ka=[],c.l){const f=fg(c.h);(f.length!=0||c.i.length!=0)&&(b(c.ka,f),b(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function Vg(c,f,g){var S=g instanceof is?Un(g):new is(g);if(S.g!="")f&&(S.g=f+"."+S.g),cl(S,S.s);else{var L=l.location;S=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var F=new is(null);S&&ll(F,S),f&&(F.g=f),L&&cl(F,L),g&&(F.l=g),S=F}return g=c.D,f=c.ya,g&&f&&Re(S,g,f),Re(S,"VER",c.la),xo(c,S),S}function Mg(c,f,g){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new Ve(new dl({eb:g})):new Ve(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fg(){}t=Fg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function yl(){}yl.prototype.g=function(c,f){return new Vt(c,f)};function Vt(c,f){ue.call(this),this.g=new Ag(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!v(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!v(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Gs(this)}I(Vt,ue),Vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){vd(this.g)},Vt.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=od(c),c=g);f.i.push(new PT(f.Ya++,c)),f.G==3&&ml(f)},Vt.prototype.N=function(){this.g.l=null,delete this.j,vd(this.g),delete this.g,Vt.aa.N.call(this)};function Ug(c){ld.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}I(Ug,ld);function $g(){cd.call(this),this.status=1}I($g,cd);function Gs(c){this.g=c}I(Gs,Fg),Gs.prototype.ua=function(){Ne(this.g,"a")},Gs.prototype.ta=function(c){Ne(this.g,new Ug(c))},Gs.prototype.sa=function(c){Ne(this.g,new $g)},Gs.prototype.ra=function(){Ne(this.g,"b")},yl.prototype.createWebChannel=yl.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,_1=function(){return new yl},v1=function(){return sl()},y1=rs,vf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},il.NO_ERROR=0,il.TIMEOUT=8,il.HTTP_ERROR=6,lc=il,rg.COMPLETE="complete",g1=rg,Jm.EventType=uo,uo.OPEN="a",uo.CLOSE="b",uo.ERROR="c",uo.MESSAGE="d",ue.prototype.listen=ue.prototype.K,Uo=Jm,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,m1=Ve}).apply(typeof Ml<"u"?Ml:typeof self<"u"?self:typeof window<"u"?window:{});const Dv="@firebase/firestore",Lv="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mt.UNAUTHENTICATED=new mt(null),mt.GOOGLE_CREDENTIALS=new mt("google-credentials-uid"),mt.FIRST_PARTY=new mt("first-party-uid"),mt.MOCK_USER=new mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ji="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new Bp("@firebase/firestore");function Js(){return ks.logLevel}function J(t,...e){if(ks.logLevel<=he.DEBUG){const n=e.map(sm);ks.debug(`Firestore (${Ji}): ${t}`,...n)}}function lr(t,...e){if(ks.logLevel<=he.ERROR){const n=e.map(sm);ks.error(`Firestore (${Ji}): ${t}`,...n)}}function Li(t,...e){if(ks.logLevel<=he.WARN){const n=e.map(sm);ks.warn(`Firestore (${Ji}): ${t}`,...n)}}function sm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,w1(t,r,n)}function w1(t,e,n){let r=`FIRESTORE (${Ji}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw lr(r),new Error(r)}function ve(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||w1(e,s,r)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Vn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(mt.UNAUTHENTICATED))}shutdown(){}}class EP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class xP{constructor(e){this.t=e,this.currentUser=mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new er;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new er,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new er)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new E1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new mt(e)}}class TP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class SP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new TP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ve(this.o===void 0,3512);const r=i=>{i.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Vv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Vv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=CP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function _f(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ce(r,s);{const i=x1(),o=RP(i.encode(Mv(t,n)),i.encode(Mv(e,n)));return o!==0?o:ce(r,s)}}n+=r>65535?2:1}return ce(t.length,e.length)}function Mv(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function RP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ce(t[n],e[n]);return ce(t.length,e.length)}function Vi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=-62135596800,Uv=1e6;class He{static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Uv);return new He(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Fv)throw new Y($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Uv}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Fv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{static fromTimestamp(e){return new se(e)}static min(){return new se(new He(0,0))}static max(){return new se(new He(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="__name__";class Rn{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&re(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Rn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Rn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Rn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ce(e.length,n.length)}static compareSegments(e,n){const r=Rn.isNumericId(e),s=Rn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Rn.extractNumericId(e).compare(Rn.extractNumericId(n)):_f(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ur.fromString(e.substring(4,e.length-2))}}class Ie extends Rn{construct(e,n,r){return new Ie(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ie(n)}static emptyPath(){return new Ie([])}}const AP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends Rn{construct(e,n,r){return new rt(e,n,r)}static isValidIdentifier(e){return AP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$v}static keyField(){return new rt([$v])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Y($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Y($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new Y($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Ie.fromString(e))}static fromName(e){return new te(Ie.fromString(e).popFirst(5))}static empty(){return new te(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Ie(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=-1;function kP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=se.fromTimestamp(r===1e9?new He(n+1,0):new He(n,r));return new qr(s,te.empty(),e)}function NP(t){return new qr(t.readTime,t.key,Ra)}class qr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new qr(se.min(),te.empty(),Ra)}static max(){return new qr(se.max(),te.empty(),Ra)}}function bP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zi(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==PP)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(h=>{o[d]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function OP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function eo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Du.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im=-1;function Lu(t){return t==null}function eu(t){return t===0&&1/t==-1/0}function DP(t){return typeof t=="number"&&Number.isInteger(t)&&!eu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="";function LP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=zv(e)),e=VP(t.get(n),e);return zv(e)}function VP(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case S1:n+="";break;default:n+=i}}return n}function zv(t){return t+S1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function es(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function I1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||nt.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nt.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fl(this.root,e,this.comparator,!0)}}class Fl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??nt.RED,this.left=s??nt.EMPTY,this.right=i??nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new nt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return nt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}}nt.EMPTY=null,nt.RED=!0,nt.BLACK=!1;nt.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Wv(this.data.getIterator())}getIteratorFrom(e){return new Wv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ge(this.comparator);return n.data=e,n}}class Wv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new $t([])}unionWith(e){let n=new Ge(rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new $t(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new C1("Invalid base64 string: "+i):i}}(e);return new ot(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const MP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hr(t){if(ve(!!t,39018),typeof t=="string"){let e=0;const n=MP.exec(t);if(ve(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Gr(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="server_timestamp",A1="__type__",k1="__previous_value__",N1="__local_write_time__";function Vu(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[A1])===null||n===void 0?void 0:n.stringValue)===R1}function Mu(t){const e=t.mapValue.fields[k1];return Vu(e)?Mu(e):e}function Aa(t){const e=Hr(t.mapValue.fields[N1].timestampValue);return new He(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,n,r,s,i,o,l,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const tu="(default)";class ka{constructor(e,n){this.projectId=e,this.database=n||tu}static empty(){return new ka("","")}get isDefaultDatabase(){return this.database===tu}isEqual(e){return e instanceof ka&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="__type__",P1="__max__",Ul={mapValue:{fields:{__type__:{stringValue:P1}}}},j1="__vector__",nu="value";function Kr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vu(t)?4:$P(t)?9007199254740991:UP(t)?10:11:re(28295,{value:t})}function Dn(t,e){if(t===e)return!0;const n=Kr(t);if(n!==Kr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Aa(t).isEqual(Aa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Hr(s.timestampValue),l=Hr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Gr(s.bytesValue).isEqual(Gr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Fe(s.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(s.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Fe(s.integerValue)===Fe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Fe(s.doubleValue),l=Fe(i.doubleValue);return o===l?eu(o)===eu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Vi(t.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Bv(o)!==Bv(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Dn(o[u],l[u])))return!1;return!0}(t,e);default:return re(52216,{left:t})}}function Na(t,e){return(t.values||[]).find(n=>Dn(n,e))!==void 0}function Mi(t,e){if(t===e)return 0;const n=Kr(t),r=Kr(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Fe(i.integerValue||i.doubleValue),u=Fe(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return qv(t.timestampValue,e.timestampValue);case 4:return qv(Aa(t),Aa(e));case 5:return _f(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Gr(i),u=Gr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=ce(l[d],u[d]);if(h!==0)return h}return ce(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ce(Fe(i.latitude),Fe(o.latitude));return l!==0?l:ce(Fe(i.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Hv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,h;const m=i.fields||{},p=o.fields||{},_=(l=m[nu])===null||l===void 0?void 0:l.arrayValue,I=(u=p[nu])===null||u===void 0?void 0:u.arrayValue,A=ce(((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0,((h=I==null?void 0:I.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:Hv(_,I)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ul.mapValue&&o===Ul.mapValue)return 0;if(i===Ul.mapValue)return 1;if(o===Ul.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const p=_f(u[m],h[m]);if(p!==0)return p;const _=Mi(l[u[m]],d[h[m]]);if(_!==0)return _}return ce(u.length,h.length)}(t.mapValue,e.mapValue);default:throw re(23264,{Pe:n})}}function qv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=Hr(t),r=Hr(e),s=ce(n.seconds,r.seconds);return s!==0?s:ce(n.nanos,r.nanos)}function Hv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Mi(n[s],r[s]);if(i)return i}return ce(n.length,r.length)}function Fi(t){return wf(t)}function wf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Hr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Gr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=wf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${wf(n.fields[o])}`;return s+"}"}(t.mapValue):re(61005,{value:t})}function cc(t){switch(Kr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mu(t);return e?16+cc(e):16;case 5:return 2*t.stringValue.length;case 6:return Gr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+cc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return es(r.fields,(i,o)=>{s+=i.length+cc(o)}),s}(t.mapValue);default:throw re(13486,{value:t})}}function ru(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ef(t){return!!t&&"integerValue"in t}function om(t){return!!t&&"arrayValue"in t}function Gv(t){return!!t&&"nullValue"in t}function Kv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function uc(t){return!!t&&"mapValue"in t}function UP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[b1])===null||n===void 0?void 0:n.stringValue)===j1}function sa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return es(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $P(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===P1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.value=e}static empty(){return new Nt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!uc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sa(n)}setAll(e){let n=rt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=sa(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());uc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];uc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){es(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Nt(sa(this.value))}}function O1(t){const e=[];return es(t.fields,(n,r)=>{const s=new rt([n]);if(uc(r)){const i=O1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new $t(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new yt(e,0,se.min(),se.min(),se.min(),Nt.empty(),0)}static newFoundDocument(e,n,r,s){return new yt(e,1,n,se.min(),r,s,0)}static newNoDocument(e,n){return new yt(e,2,n,se.min(),se.min(),Nt.empty(),0)}static newUnknownDocument(e,n){return new yt(e,3,n,se.min(),se.min(),Nt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n){this.position=e,this.inclusive=n}}function Qv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Mi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Yv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n="asc"){this.field=e,this.dir=n}}function zP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{}class Be extends D1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new WP(e,n,r):n==="array-contains"?new GP(e,r):n==="in"?new KP(e,r):n==="not-in"?new QP(e,r):n==="array-contains-any"?new YP(e,r):new Be(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new qP(e,r):new HP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Mi(n,this.value)):n!==null&&Kr(this.value)===Kr(n)&&this.matchesComparison(Mi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wn extends D1{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new wn(e,n)}matches(e){return L1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function L1(t){return t.op==="and"}function V1(t){return BP(t)&&L1(t)}function BP(t){for(const e of t.filters)if(e instanceof wn)return!1;return!0}function xf(t){if(t instanceof Be)return t.field.canonicalString()+t.op.toString()+Fi(t.value);if(V1(t))return t.filters.map(e=>xf(e)).join(",");{const e=t.filters.map(n=>xf(n)).join(",");return`${t.op}(${e})`}}function M1(t,e){return t instanceof Be?function(r,s){return s instanceof Be&&r.op===s.op&&r.field.isEqual(s.field)&&Dn(r.value,s.value)}(t,e):t instanceof wn?function(r,s){return s instanceof wn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&M1(o,s.filters[l]),!0):!1}(t,e):void re(19439)}function F1(t){return t instanceof Be?function(n){return`${n.field.canonicalString()} ${n.op} ${Fi(n.value)}`}(t):t instanceof wn?function(n){return n.op.toString()+" {"+n.getFilters().map(F1).join(" ,")+"}"}(t):"Filter"}class WP extends Be{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class qP extends Be{constructor(e,n){super(e,"in",n),this.keys=U1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class HP extends Be{constructor(e,n){super(e,"not-in",n),this.keys=U1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function U1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class GP extends Be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return om(n)&&Na(n.arrayValue,this.value)}}class KP extends Be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Na(this.value.arrayValue,n)}}class QP extends Be{constructor(e,n){super(e,"not-in",n)}matches(e){if(Na(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Na(this.value.arrayValue,n)}}class YP extends Be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!om(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Na(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Ie=null}}function Xv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new XP(t,e,n,r,s,i,o)}function am(t){const e=oe(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>xf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Lu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fi(r)).join(",")),e.Ie=n}return e.Ie}function lm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!M1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Yv(t.startAt,e.startAt)&&Yv(t.endAt,e.endAt)}function Tf(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function JP(t,e,n,r,s,i,o,l){return new Vs(t,e,n,r,s,i,o,l)}function cm(t){return new Vs(t)}function Jv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function um(t){return t.collectionGroup!==null}function Ii(t){const e=oe(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ge(rt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new ba(i,r))}),n.has(rt.keyField().canonicalString())||e.Ee.push(new ba(rt.keyField(),r))}return e.Ee}function jn(t){const e=oe(t);return e.de||(e.de=ZP(e,Ii(t))),e.de}function ZP(t,e){if(t.limitType==="F")return Xv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ba(s.field,i)});const n=t.endAt?new Ui(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ui(t.startAt.position,t.startAt.inclusive):null;return Xv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Sf(t,e){const n=t.filters.concat([e]);return new Vs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function su(t,e,n){return new Vs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fu(t,e){return lm(jn(t),jn(e))&&t.limitType===e.limitType}function $1(t){return`${am(jn(t))}|lt:${t.limitType}`}function Zs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>F1(s)).join(", ")}]`),Lu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Fi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Fi(s)).join(",")),`Target(${r})`}(jn(t))}; limitType=${t.limitType})`}function Uu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ii(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=Qv(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,Ii(r),s)||r.endAt&&!function(o,l,u){const d=Qv(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,Ii(r),s))}(t,e)}function ej(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function z1(t){return(e,n)=>{let r=!1;for(const s of Ii(t)){const i=tj(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function tj(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Mi(u,d):re(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){es(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return I1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=new Le(te.comparator);function cr(){return nj}const B1=new Le(te.comparator);function $o(...t){let e=B1;for(const n of t)e=e.insert(n.key,n);return e}function W1(t){let e=B1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ms(){return ia()}function q1(){return ia()}function ia(){return new Ms(t=>t.toString(),(t,e)=>t.isEqual(e))}const rj=new Le(te.comparator),sj=new Ge(te.comparator);function fe(...t){let e=sj;for(const n of t)e=e.add(n);return e}const ij=new Ge(ce);function oj(){return ij}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eu(e)?"-0":e}}function H1(t){return{integerValue:""+t}}function aj(t,e){return DP(e)?H1(e):dm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(){this._=void 0}}function lj(t,e,n){return t instanceof Pa?function(s,i){const o={fields:{[A1]:{stringValue:R1},[N1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Vu(i)&&(i=Mu(i)),i&&(o.fields[k1]=i),{mapValue:o}}(n,e):t instanceof ja?K1(t,e):t instanceof Oa?Q1(t,e):function(s,i){const o=G1(s,i),l=Zv(o)+Zv(s.Re);return Ef(o)&&Ef(s.Re)?H1(l):dm(s.serializer,l)}(t,e)}function cj(t,e,n){return t instanceof ja?K1(t,e):t instanceof Oa?Q1(t,e):n}function G1(t,e){return t instanceof iu?function(r){return Ef(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Pa extends $u{}class ja extends $u{constructor(e){super(),this.elements=e}}function K1(t,e){const n=Y1(e);for(const r of t.elements)n.some(s=>Dn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Oa extends $u{constructor(e){super(),this.elements=e}}function Q1(t,e){let n=Y1(e);for(const r of t.elements)n=n.filter(s=>!Dn(s,r));return{arrayValue:{values:n}}}class iu extends $u{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Zv(t){return Fe(t.integerValue||t.doubleValue)}function Y1(t){return om(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n){this.field=e,this.transform=n}}function dj(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ja&&s instanceof ja||r instanceof Oa&&s instanceof Oa?Vi(r.elements,s.elements,Dn):r instanceof iu&&s instanceof iu?Dn(r.Re,s.Re):r instanceof Pa&&s instanceof Pa}(t.transform,e.transform)}class hj{constructor(e,n){this.version=e,this.transformResults=n}}class Dt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dt}static exists(e){return new Dt(void 0,e)}static updateTime(e){return new Dt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zu{}function X1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hm(t.key,Dt.none()):new Ka(t.key,t.data,Dt.none());{const n=t.data,r=Nt.empty();let s=new Ge(rt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ts(t.key,r,new $t(s.toArray()),Dt.none())}}function fj(t,e,n){t instanceof Ka?function(s,i,o){const l=s.value.clone(),u=t_(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ts?function(s,i,o){if(!dc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=t_(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(J1(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function oa(t,e,n,r){return t instanceof Ka?function(i,o,l,u){if(!dc(i.precondition,o))return l;const d=i.value.clone(),h=n_(i.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof ts?function(i,o,l,u){if(!dc(i.precondition,o))return l;const d=n_(i.fieldTransforms,u,o),h=o.data;return h.setAll(J1(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return dc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function pj(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=G1(r.transform,s||null);i!=null&&(n===null&&(n=Nt.empty()),n.set(r.field,i))}return n||null}function e_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Vi(r,s,(i,o)=>dj(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ka extends zu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ts extends zu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function J1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function t_(t,e,n){const r=new Map;ve(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,cj(o,l,n[s]))}return r}function n_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,lj(i,o,e))}return r}class hm extends zu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mj extends zu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&fj(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=oa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=oa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=q1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=X1(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&Vi(this.mutations,e.mutations,(n,r)=>e_(n,r))&&Vi(this.baseMutations,e.baseMutations,(n,r)=>e_(n,r))}}class fm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ve(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return rj}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new fm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e,pe;function _j(t){switch(t){case $.OK:return re(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return re(15467,{code:t})}}function Z1(t){if(t===void 0)return lr("GRPC error has no .code"),$.UNKNOWN;switch(t){case $e.OK:return $.OK;case $e.CANCELLED:return $.CANCELLED;case $e.UNKNOWN:return $.UNKNOWN;case $e.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case $e.INTERNAL:return $.INTERNAL;case $e.UNAVAILABLE:return $.UNAVAILABLE;case $e.UNAUTHENTICATED:return $.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case $e.NOT_FOUND:return $.NOT_FOUND;case $e.ALREADY_EXISTS:return $.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return $.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case $e.ABORTED:return $.ABORTED;case $e.OUT_OF_RANGE:return $.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return $.UNIMPLEMENTED;case $e.DATA_LOSS:return $.DATA_LOSS;default:return re(39323,{code:t})}}(pe=$e||($e={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=new Ur([4294967295,4294967295],0);function r_(t){const e=x1().encode(t),n=new p1;return n.update(e),new Uint8Array(n.digest())}function s_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ur([n,r],0),new Ur([s,i],0)]}class pm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zo(`Invalid padding: ${n}`);if(r<0)throw new zo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zo(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Ur.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(Ur.fromNumber(r)));return s.compare(wj)===1&&(s=new Ur([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=r_(e),[r,s]=s_(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.be(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new pm(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.pe===0)return;const n=r_(e),[r,s]=s_(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class zo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Qa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Bu(se.min(),s,new Le(ce),cr(),fe())}}class Qa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Qa(r,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class ex{constructor(e,n){this.targetId=e,this.Ce=n}}class tx{constructor(e,n,r=ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class i_{constructor(){this.Fe=0,this.Me=o_(),this.xe=ot.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=fe(),n=fe(),r=fe();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:re(38017,{changeType:i})}}),new Qa(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=o_()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ve(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Ej{constructor(e){this.ze=e,this.je=new Map,this.He=cr(),this.Je=$l(),this.Ye=$l(),this.Ze=new Le(ce)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(Tf(i))if(r===0){const o=new te(i.path);this.tt(n,o,yt.newNoDocument(o,se.min()))}else ve(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const l=this.ct(e),u=l?this.lt(l,e,o):1;if(u!==0){this.st(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Gr(r).toUint8Array()}catch(u){if(u instanceof C1)return Li("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new pm(o,s,i)}catch(u){return Li(u instanceof zo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.pe===0?null:l}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,o)=>{const l=this._t(o);if(l){if(i.current&&Tf(l.target)){const u=new te(l.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,yt.newNoDocument(u,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let r=fe();this.Ye.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this._t(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new Bu(e,n,this.Ze,this.He,r);return this.He=cr(),this.Je=$l(),this.Ye=$l(),this.Ze=new Le(ce),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new i_,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Ge(ce),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Ge(ce),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new i_),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function $l(){return new Le(te.comparator)}function o_(){return new Le(te.comparator)}const xj=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Tj=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Sj=(()=>({and:"AND",or:"OR"}))();class Ij{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function If(t,e){return t.useProto3Json||Lu(e)?e:{value:e}}function ou(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Cj(t,e){return ou(t,e.toTimestamp())}function On(t){return ve(!!t,49232),se.fromTimestamp(function(n){const r=Hr(n);return new He(r.seconds,r.nanos)}(t))}function mm(t,e){return Cf(t,e).canonicalString()}function Cf(t,e){const n=function(s){return new Ie(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function rx(t){const e=Ie.fromString(t);return ve(lx(e),10190,{key:e.toString()}),e}function Rf(t,e){return mm(t.databaseId,e.path)}function sh(t,e){const n=rx(e);if(n.get(1)!==t.databaseId.projectId)throw new Y($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(ix(n))}function sx(t,e){return mm(t.databaseId,e)}function Rj(t){const e=rx(t);return e.length===4?Ie.emptyPath():ix(e)}function Af(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ix(t){return ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function a_(t,e,n){return{name:Rf(t,e),fields:n.value.mapValue.fields}}function Aj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:re(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(ve(h===void 0||typeof h=="string",58123),ot.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ot.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?$.UNKNOWN:Z1(d.code);return new Y(h,d.message||"")}(o);n=new tx(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=sh(t,r.document.name),i=On(r.document.updateTime),o=r.document.createTime?On(r.document.createTime):se.min(),l=new Nt({mapValue:{fields:r.document.fields}}),u=yt.newFoundDocument(s,i,o,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new hc(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=sh(t,r.document),i=r.readTime?On(r.readTime):se.min(),o=yt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new hc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=sh(t,r.document),i=r.removedTargetIds||[];n=new hc([],i,s,null)}else{if(!("filter"in e))return re(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new vj(s,i),l=r.targetId;n=new ex(l,o)}}return n}function kj(t,e){let n;if(e instanceof Ka)n={update:a_(t,e.key,e.value)};else if(e instanceof hm)n={delete:Rf(t,e.key)};else if(e instanceof ts)n={update:a_(t,e.key,e.data),updateMask:Mj(e.fieldMask)};else{if(!(e instanceof mj))return re(16599,{ft:e.type});n={verify:Rf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Pa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ja)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Oa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof iu)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw re(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Cj(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:re(27497)}(t,e.precondition)),n}function Nj(t,e){return t&&t.length>0?(ve(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?On(s.updateTime):On(i);return o.isEqual(se.min())&&(o=On(i)),new hj(o,s.transformResults||[])}(n,e))):[]}function bj(t,e){return{documents:[sx(t,e.path)]}}function Pj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=sx(t,s);const i=function(d){if(d.length!==0)return ax(wn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:ei(p.field),direction:Dj(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=If(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:s}}function jj(t){let e=Rj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ve(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(m){const p=ox(m);return p instanceof wn&&V1(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(p=>function(I){return new ba(ti(I.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(m){let p;return p=typeof m=="object"?m.value:m,Lu(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(m){const p=!!m.before,_=m.values||[];return new Ui(_,p)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const p=!m.before,_=m.values||[];return new Ui(_,p)}(n.endAt)),JP(e,s,o,i,l,"F",u,d)}function Oj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ox(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ti(n.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ti(n.unaryFilter.field);return Be.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ti(n.unaryFilter.field);return Be.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ti(n.unaryFilter.field);return Be.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}}(t):t.fieldFilter!==void 0?function(n){return Be.create(ti(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return wn.create(n.compositeFilter.filters.map(r=>ox(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re(1026)}}(n.compositeFilter.op))}(t):re(30097,{filter:t})}function Dj(t){return xj[t]}function Lj(t){return Tj[t]}function Vj(t){return Sj[t]}function ei(t){return{fieldPath:t.canonicalString()}}function ti(t){return rt.fromServerFormat(t.fieldPath)}function ax(t){return t instanceof Be?function(n){if(n.op==="=="){if(Kv(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NAN"}};if(Gv(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Kv(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NOT_NAN"}};if(Gv(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ei(n.field),op:Lj(n.op),value:n.value}}}(t):t instanceof wn?function(n){const r=n.getFilters().map(s=>ax(s));return r.length===1?r[0]:{compositeFilter:{op:Vj(n.op),filters:r}}}(t):re(54877,{filter:t})}function Mj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function lx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n,r,s,i=se.min(),o=se.min(),l=ot.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.wt=e}}function Uj(t){const e=jj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?su(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(){this.Cn=new zj}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(qr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(qr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class zj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ge(Ie.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ge(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cx=41943040;class Rt{static withCacheSize(e){return new Rt(e,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rt.DEFAULT_COLLECTION_PERCENTILE=10,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rt.DEFAULT=new Rt(cx,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rt.DISABLED=new Rt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new $i(0)}static lr(){return new $i(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="LruGarbageCollector",Bj=1048576;function u_([t,e],[n,r]){const s=ce(t,n);return s===0?ce(e,r):s}class Wj{constructor(e){this.Er=e,this.buffer=new Ge(u_),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();u_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){J(c_,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){eo(n)?J(c_,"Ignoring IndexedDB error during garbage collection: ",n):await Zi(n)}await this.mr(3e5)})}}class Hj{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Du.le);const r=new Wj(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(l_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),l_):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,i,o,l,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Js()<=he.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function Gj(t,e){return new Hj(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this.changes=new Ms(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&oa(r.mutation,s,$t.empty(),He.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const s=ms();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=$o();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ms();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=cr();const o=ia(),l=function(){return ia()}();return n.forEach((u,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof ts)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),oa(h.mutation,d,h.mutation.getFieldMask(),He.now())):o.set(d.key,$t.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var m;return l.set(d,new Qj(h,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ia();let s=new Le((o,l)=>o-l),i=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||$t.empty();h=l.applyToLocalView(d,h),r.set(u,h);const m=(s.get(l.batchId)||fe()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,m=q1();h.forEach(p=>{if(!i.has(p)){const _=X1(n.get(p),r.get(p));_!==null&&m.set(p,_),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):um(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(ms());let l=Ra,u=i;return o.next(d=>B.forEach(d,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,fe())).next(h=>({batchId:l,changes:W1(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=$o();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=$o();return this.indexManager.getCollectionParents(e,i).next(l=>B.forEach(l,u=>{const d=function(m,p){return new Vs(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,yt.newInvalidDocument(h)))});let l=$o();return o.forEach((u,d)=>{const h=i.get(u);h!==void 0&&oa(h.mutation,d,$t.empty(),He.now()),Uu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return B.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:On(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:Uj(s.bundledQuery),readTime:On(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(){this.overlays=new Le(te.comparator),this.Qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ms();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=ms(),i=n.length+1,o=new te(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Le((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=ms(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=ms(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return B.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new yj(n,r));let i=this.Qr.get(n);i===void 0&&(i=fe(),this.Qr.set(n,i)),this.Qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(){this.$r=new Ge(Ye.Ur),this.Kr=new Ge(Ye.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new Ye(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new Ye(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new te(new Ie([])),r=new Ye(n,e),s=new Ye(n,e+1),i=[];return this.Kr.forEachInRange([r,s],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new te(new Ie([])),r=new Ye(n,e),s=new Ye(n,e+1);let i=fe();return this.Kr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ye(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ye{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return te.comparator(e.key,n.key)||ce(e.Zr,n.Zr)}static Wr(e,n){return ce(e.Zr,n.Zr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ge(Ye.Ur)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new gj(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Xr=this.Xr.add(new Ye(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?im:this.nr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ye(n,0),s=new Ye(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],o=>{const l=this.ei(o.Zr);i.push(l)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ge(ce);return n.forEach(s=>{const i=new Ye(s,0),o=new Ye(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],l=>{r=r.add(l.Zr)})}),B.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new Ye(new te(i),0);let l=new Ge(ce);return this.Xr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Zr)),!0)},o),B.resolve(this.ni(l))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ve(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return B.forEach(n.mutations,s=>{const i=new Ye(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new Ye(n,0),s=this.Xr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e){this.ii=e,this.docs=function(){return new Le(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(n))}getEntries(e,n){let r=cr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():yt.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=cr();const o=n.path,l=new te(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||bP(NP(h),r)<=0||(s.has(h.key)||Uu(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){re(9500)}si(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new n2(this)}getSize(e){return B.resolve(this.size)}}class n2 extends Kj{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.persistence=e,this.oi=new Ms(n=>am(n),lm),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this._i=0,this.ai=new gm,this.targetCount=0,this.ui=$i.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),B.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new $i(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Tr(n),B.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.oi.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,n){this.ci={},this.overlays={},this.li=new Du(0),this.hi=!1,this.hi=!0,this.Pi=new Zj,this.referenceDelegate=e(this),this.Ti=new r2(this),this.indexManager=new $j,this.remoteDocumentCache=function(s){return new t2(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Fj(n),this.Ei=new Xj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Jj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new e2(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const s=new s2(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(e,n){return B.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class s2 extends jP{constructor(e){super(),this.currentSequenceNumber=e}}class ym{constructor(e){this.persistence=e,this.Vi=new gm,this.mi=null}static fi(e){return new ym(e)}get gi(){if(this.mi)return this.mi;throw re(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.gi,r=>{const s=te.fromPath(r);return this.pi(e,s).next(i=>{i||n.removeEntry(s,se.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return B.or([()=>B.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class au{constructor(e,n){this.persistence=e,this.yi=new Ms(r=>LP(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Gj(this,n)}static fi(e,n){return new au(e,n)}di(){}Ai(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return B.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(i=>i?B.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(e,o=>this.Dr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,se.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),B.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=cc(e.data.value)),n}Dr(e,n,r){return B.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return B.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=fe(),s=fe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new vm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return OA()?8:OP(_t())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.bs(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new i2;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.fs)return this.Ds(e,n,o,l.size)})}).next(()=>i.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(Js()<=he.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Zs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),B.resolve()):(Js()<=he.DEBUG&&J("QueryEngine","Query:",Zs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(Js()<=he.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Zs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jn(n))):B.resolve())}ws(e,n){if(Jv(n))return B.resolve(null);let r=jn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=su(n,null,"F"),r=jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=fe(...i);return this.ys.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.vs(n,l);return this.Cs(n,d,o,u.readTime)?this.ws(e,su(n,null,"F")):this.Fs(e,d,n,u)}))})))}bs(e,n,r,s){return Jv(n)||s.isEqual(se.min())?B.resolve(null):this.ys.getDocuments(e,r).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,r,s)?B.resolve(null):(Js()<=he.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Zs(n)),this.Fs(e,o,n,kP(s,Ra)).next(l=>l))})}vs(e,n){let r=new Ge(z1(e));return n.forEach((s,i)=>{Uu(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Js()<=he.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Zs(n)),this.ys.getDocumentsMatchingQuery(e,n,qr.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="LocalStore",a2=3e8;class l2{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new Le(ce),this.Os=new Ms(i=>am(i),lm),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yj(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function c2(t,e,n,r){return new l2(t,e,n,r)}async function dx(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=fe();for(const d of s){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:l}))})})}function u2(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const m=d.batch,p=m.keys();let _=B.resolve();return p.forEach(I=>{_=_.next(()=>h.getEntry(u,I)).next(A=>{const b=d.docVersions.get(I);ve(b!==null,48541),A.version.compareTo(b)<0&&(m.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),h.addEntry(A)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=fe();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function hx(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function d2(t,e){const n=oe(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const l=[];e.targetChanges.forEach((h,m)=>{const p=s.get(m);if(!p)return;l.push(n.Ti.removeMatchingKeys(i,h.removedDocuments,m).next(()=>n.Ti.addMatchingKeys(i,h.addedDocuments,m)));let _=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(ot.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),s=s.insert(m,_),function(A,b,w){return A.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=a2?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,_,h)&&l.push(n.Ti.updateTargetData(i,_))});let u=cr(),d=fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(h2(i,o,e.documentUpdates).next(h=>{u=h.qs,d=h.Qs})),!r.isEqual(se.min())){const h=n.Ti.getLastRemoteSnapshotVersion(i).next(m=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return B.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.xs=s,i))}function h2(t,e,n){let r=fe(),s=fe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=cr();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(se.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):J(_m,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{qs:o,Qs:s}})}function f2(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=im),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function p2(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.Ti.allocateTargetId(r).next(o=>(s=new kr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function kf(t,e,n){const r=oe(t),s=r.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!eo(o))throw o;J(_m,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function d_(t,e,n){const r=oe(t);let s=se.min(),i=fe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const m=oe(u),p=m.Os.get(h);return p!==void 0?B.resolve(m.xs.get(p)):m.Ti.getTargetData(d,h)}(r,o,jn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,n?s:se.min(),n?i:fe())).next(l=>(m2(r,ej(e),l),{documents:l,$s:i})))}function m2(t,e,n){let r=t.Ns.get(e)||se.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ns.set(e,r)}class h_{constructor(){this.activeTargetIds=oj()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class g2{constructor(){this.xo=new h_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new h_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="ConnectivityMonitor";class p_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){J(f_,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){J(f_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zl=null;function Nf(){return zl===null?zl=function(){return 268435456+Math.round(2147483648*Math.random())}():zl++,"0x"+zl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih="RestConnection",v2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _2{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===tu?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,i){const o=Nf(),l=this.jo(e,n.toUriEncodedString());J(ih,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,s,i);const{host:d}=new URL(l),h=Ds(d);return this.Jo(e,l,u,r,h).then(m=>(J(ih,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Li(ih,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}Yo(e,n,r,s,i,o){return this.zo(e,n,r,s,i)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ji}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}jo(e,n){const r=v2[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft="WebChannelConnection";class E2 extends _2{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Nf();return new Promise((l,u)=>{const d=new m1;d.setWithCredentials(!0),d.listenOnce(g1.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case lc.NO_ERROR:const m=d.getResponseJson();J(ft,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case lc.TIMEOUT:J(ft,`RPC '${e}' ${o} timed out`),u(new Y($.DEADLINE_EXCEEDED,"Request time out"));break;case lc.HTTP_ERROR:const p=d.getStatus();if(J(ft,`RPC '${e}' ${o} failed with status:`,p,"response text:",d.getResponseText()),p>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const I=_==null?void 0:_.error;if(I&&I.status&&I.message){const A=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(v)>=0?v:$.UNKNOWN}(I.status);u(new Y(A,I.message))}else u(new Y($.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Y($.UNAVAILABLE,"Connection failed."));break;default:re(9055,{h_:e,streamId:o,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{J(ft,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);J(ft,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",h,r,15)})}I_(e,n,r){const s=Nf(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=_1(),l=v1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=i.join("");J(ft,`Creating RPC '${e}' stream ${s}: ${h}`,u);const m=o.createWebChannel(h,u);this.E_(m);let p=!1,_=!1;const I=new w2({Zo:b=>{_?J(ft,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(p||(J(ft,`Opening RPC '${e}' stream ${s} transport.`),m.open(),p=!0),J(ft,`RPC '${e}' stream ${s} sending:`,b),m.send(b))},Xo:()=>m.close()}),A=(b,w,v)=>{b.listen(w,x=>{try{v(x)}catch(k){setTimeout(()=>{throw k},0)}})};return A(m,Uo.EventType.OPEN,()=>{_||(J(ft,`RPC '${e}' stream ${s} transport opened.`),I.__())}),A(m,Uo.EventType.CLOSE,()=>{_||(_=!0,J(ft,`RPC '${e}' stream ${s} transport closed`),I.u_(),this.d_(m))}),A(m,Uo.EventType.ERROR,b=>{_||(_=!0,Li(ft,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),I.u_(new Y($.UNAVAILABLE,"The operation could not be completed")))}),A(m,Uo.EventType.MESSAGE,b=>{var w;if(!_){const v=b.data[0];ve(!!v,16349);const x=v,k=(x==null?void 0:x.error)||((w=x[0])===null||w===void 0?void 0:w.error);if(k){J(ft,`RPC '${e}' stream ${s} received error:`,k);const D=k.status;let V=function(T){const R=$e[T];if(R!==void 0)return Z1(R)}(D),E=k.message;V===void 0&&(V=$.INTERNAL,E="Unknown error status: "+D+" with message "+k.message),_=!0,I.u_(new Y(V,E)),m.close()}else J(ft,`RPC '${e}' stream ${s} received:`,v),I.c_(v)}}),A(l,y1.STAT_EVENT,b=>{b.stat===vf.PROXY?J(ft,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===vf.NOPROXY&&J(ft,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.a_()},0),I}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function oh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(t){return new Ij(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,n,r=1e3,s=1.5,i=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="PersistentStream";class px{constructor(e,n,r,s,i,o,l,u){this.xi=e,this.S_=r,this.D_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new fx(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(lr(n.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new Y($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return J(m_,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(J(m_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class x2 extends px{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=Aj(this.serializer,e),r=function(i){if(!("targetChange"in i))return se.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?On(o.readTime):se.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=Af(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Tf(u)?{documents:bj(i,u)}:{query:Pj(i,u).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=nx(i,o.resumeToken);const d=If(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(se.min())>0){l.readTime=ou(i,o.snapshotVersion.toTimestamp());const d=If(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=Oj(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=Af(this.serializer),n.removeTarget=e,this.Q_(n)}}class T2 extends px{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=Nj(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=Af(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>kj(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{}class I2 extends S2{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new Y($.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,Cf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y($.UNKNOWN,i.toString())})}Yo(e,n,r,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Yo(e,Cf(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y($.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class C2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(lr(n),this.ua=!1):J("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="RemoteStore";class R2{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(o=>{r.enqueueAndForget(async()=>{Fs(this)&&(J(Ns,"Restarting streams for network reachability change."),await async function(u){const d=oe(u);d.da.add(4),await Ya(d),d.Va.set("Unknown"),d.da.delete(4),await qu(d)}(this))})}),this.Va=new C2(r,s)}}async function qu(t){if(Fs(t))for(const e of t.Aa)await e(!0)}async function Ya(t){for(const e of t.Aa)await e(!1)}function mx(t,e){const n=oe(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),Tm(n)?xm(n):to(n).N_()&&Em(n,e))}function wm(t,e){const n=oe(t),r=to(n);n.Ea.delete(e),r.N_()&&gx(n,e),n.Ea.size===0&&(r.N_()?r.k_():Fs(n)&&n.Va.set("Unknown"))}function Em(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}to(t).Z_(e)}function gx(t,e){t.ma.Ke(e),to(t).X_(e)}function xm(t){t.ma=new Ej({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),to(t).start(),t.Va.ca()}function Tm(t){return Fs(t)&&!to(t).O_()&&t.Ea.size>0}function Fs(t){return oe(t).da.size===0}function yx(t){t.ma=void 0}async function A2(t){t.Va.set("Online")}async function k2(t){t.Ea.forEach((e,n)=>{Em(t,e)})}async function N2(t,e){yx(t),Tm(t)?(t.Va.Pa(e),xm(t)):t.Va.set("Unknown")}async function b2(t,e,n){if(t.Va.set("Online"),e instanceof tx&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ea.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ea.delete(l),s.ma.removeTarget(l))}(t,e)}catch(r){J(Ns,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lu(t,r)}else if(e instanceof hc?t.ma.Xe(e):e instanceof ex?t.ma.ot(e):t.ma.nt(e),!n.isEqual(se.min()))try{const r=await hx(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.ma.It(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.Ea.get(d);h&&i.Ea.set(d,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const h=i.Ea.get(u);if(!h)return;i.Ea.set(u,h.withResumeToken(ot.EMPTY_BYTE_STRING,h.snapshotVersion)),gx(i,u);const m=new kr(h.target,u,d,h.sequenceNumber);Em(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){J(Ns,"Failed to raise snapshot:",r),await lu(t,r)}}async function lu(t,e,n){if(!eo(e))throw e;t.da.add(1),await Ya(t),t.Va.set("Offline"),n||(n=()=>hx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J(Ns,"Retrying IndexedDB access"),await n(),t.da.delete(1),await qu(t)})}function vx(t,e){return e().catch(n=>lu(t,n,e))}async function Hu(t){const e=oe(t),n=Qr(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:im;for(;P2(e);)try{const s=await f2(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,j2(e,s)}catch(s){await lu(e,s)}_x(e)&&wx(e)}function P2(t){return Fs(t)&&t.Ia.length<10}function j2(t,e){t.Ia.push(e);const n=Qr(t);n.N_()&&n.ea&&n.ta(e.mutations)}function _x(t){return Fs(t)&&!Qr(t).O_()&&t.Ia.length>0}function wx(t){Qr(t).start()}async function O2(t){Qr(t).ia()}async function D2(t){const e=Qr(t);for(const n of t.Ia)e.ta(n.mutations)}async function L2(t,e,n){const r=t.Ia.shift(),s=fm.from(r,e,n);await vx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Hu(t)}async function V2(t,e){e&&Qr(t).ea&&await async function(r,s){if(function(o){return _j(o)&&o!==$.ABORTED}(s.code)){const i=r.Ia.shift();Qr(r).L_(),await vx(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Hu(r)}}(t,e),_x(t)&&wx(t)}async function g_(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),J(Ns,"RemoteStore received new credentials");const r=Fs(n);n.da.add(3),await Ya(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await qu(n)}async function M2(t,e){const n=oe(t);e?(n.da.delete(2),await qu(n)):e||(n.da.add(2),await Ya(n),n.Va.set("Unknown"))}function to(t){return t.fa||(t.fa=function(n,r,s){const i=oe(n);return i.oa(),new x2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:A2.bind(null,t),n_:k2.bind(null,t),i_:N2.bind(null,t),Y_:b2.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),Tm(t)?xm(t):t.Va.set("Unknown")):(await t.fa.stop(),yx(t))})),t.fa}function Qr(t){return t.ga||(t.ga=function(n,r,s){const i=oe(n);return i.oa(),new T2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:O2.bind(null,t),i_:V2.bind(null,t),na:D2.bind(null,t),ra:L2.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Hu(t)):(await t.ga.stop(),t.Ia.length>0&&(J(Ns,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Sm(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Im(t,e){if(lr("AsyncQueue",`${e}: ${t}`),eo(t))return new Y($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{static emptySet(e){return new Ci(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=$o(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ci)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ci;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(){this.pa=new Le(te.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):re(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class zi{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new zi(e,n,Ci.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class U2{constructor(){this.queries=v_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=oe(n),i=s.queries;s.queries=v_(),i.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new Y($.ABORTED,"Firestore shutting down"))}}function v_(){return new Ms(t=>$1(t),Fu)}async function Ex(t,e){const n=oe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Da()&&e.va()&&(r=2):(i=new F2,r=e.va()?0:1);try{switch(r){case 0:i.ba=await n.onListen(s,!0);break;case 1:i.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Im(o,`Initialization of query '${Zs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.Fa(n.onlineState),i.ba&&e.Ma(i.ba)&&Cm(n)}async function xx(t,e){const n=oe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.va()?0:1:!i.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function $2(t,e){const n=oe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Ma(s)&&(r=!0);o.ba=s}}r&&Cm(n)}function z2(t,e,n){const r=oe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Cm(t){t.Ca.forEach(e=>{e.next()})}var bf,__;(__=bf||(bf={})).xa="default",__.Cache="cache";class Tx{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new zi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=zi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==bf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.key=e}}class Ix{constructor(e){this.key=e}}class B2{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=fe(),this.mutatedKeys=fe(),this.Za=z1(e),this.Xa=new Ci(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new y_,s=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,m)=>{const p=s.get(h),_=Uu(this.query,m)?m:null,I=!!p&&this.mutatedKeys.has(p.key),A=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let b=!1;p&&_?p.data.isEqual(_.data)?I!==A&&(r.track({type:3,doc:_}),b=!0):this.ru(p,_)||(r.track({type:2,doc:_}),b=!0,(u&&this.Za(_,u)>0||d&&this.Za(_,d)<0)&&(l=!0)):!p&&_?(r.track({type:0,doc:_}),b=!0):p&&!_&&(r.track({type:1,doc:p}),b=!0,(u||d)&&(l=!0)),b&&(_?(o=o.add(_),i=A?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Xa:o,nu:r,Cs:l,mutatedKeys:i}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((h,m)=>function(_,I){const A=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{Vt:b})}};return A(_)-A(I)}(h.type,m.type)||this.Za(h.doc,m.doc)),this.iu(r),s=s!=null&&s;const l=n&&!s?this.su():[],u=this.Ya.size===0&&this.current&&!s?1:0,d=u!==this.Ja;return this.Ja=u,o.length!==0||d?{snapshot:new zi(this.query,e.Xa,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new y_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=fe(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new Ix(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new Sx(r))}),n}au(e){this.Ha=e.$s,this.Ya=fe();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return zi.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Rm="SyncEngine";class W2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class q2{constructor(e){this.key=e,this.cu=!1}}class H2{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new Ms(l=>$1(l),Fu),this.Pu=new Map,this.Tu=new Set,this.Iu=new Le(te.comparator),this.Eu=new Map,this.du=new gm,this.Au={},this.Ru=new Map,this.Vu=$i.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function G2(t,e,n=!0){const r=bx(t);let s;const i=r.hu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await Cx(r,e,n,!0),s}async function K2(t,e){const n=bx(t);await Cx(n,e,!0,!1)}async function Cx(t,e,n,r){const s=await p2(t.localStore,jn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await Q2(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&mx(t.remoteStore,s),l}async function Q2(t,e,n,r,s){t.fu=(m,p,_)=>async function(A,b,w,v){let x=b.view.tu(w);x.Cs&&(x=await d_(A.localStore,b.query,!1).then(({documents:E})=>b.view.tu(E,x)));const k=v&&v.targetChanges.get(b.targetId),D=v&&v.targetMismatches.get(b.targetId)!=null,V=b.view.applyChanges(x,A.isPrimaryClient,k,D);return E_(A,b.targetId,V.ou),V.snapshot}(t,m,p,_);const i=await d_(t.localStore,e,!0),o=new B2(e,i.$s),l=o.tu(i.documents),u=Qa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);E_(t,n,d.ou);const h=new W2(e,n,o);return t.hu.set(e,h),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),d.snapshot}async function Y2(t,e,n){const r=oe(t),s=r.hu.get(e),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter(o=>!Fu(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await kf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&wm(r.remoteStore,s.targetId),Pf(r,s.targetId)}).catch(Zi)):(Pf(r,s.targetId),await kf(r.localStore,s.targetId,!0))}async function X2(t,e){const n=oe(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wm(n.remoteStore,r.targetId))}async function J2(t,e,n){const r=iO(t);try{const s=await function(o,l){const u=oe(o),d=He.now(),h=l.reduce((_,I)=>_.add(I.key),fe());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let I=cr(),A=fe();return u.Bs.getEntries(_,h).next(b=>{I=b,I.forEach((w,v)=>{v.isValidDocument()||(A=A.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,I)).next(b=>{m=b;const w=[];for(const v of l){const x=pj(v,m.get(v.key).overlayedDocument);x!=null&&w.push(new ts(v.key,x,O1(x.value.mapValue),Dt.exists(!0)))}return u.mutationQueue.addMutationBatch(_,d,w,l)}).next(b=>{p=b;const w=b.applyToLocalDocumentSet(m,A);return u.documentOverlayCache.saveOverlays(_,b.batchId,w)})}).then(()=>({batchId:p.batchId,changes:W1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Au[o.currentUser.toKey()];d||(d=new Le(ce)),d=d.insert(l,u),o.Au[o.currentUser.toKey()]=d}(r,s.batchId,n),await Xa(r,s.changes),await Hu(r.remoteStore)}catch(s){const i=Im(s,"Failed to persist write");n.reject(i)}}async function Rx(t,e){const n=oe(t);try{const r=await d2(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.cu=!0:s.modifiedDocuments.size>0?ve(o.cu,14607):s.removedDocuments.size>0&&(ve(o.cu,42227),o.cu=!1))}),await Xa(n,r,e)}catch(r){await Zi(r)}}function w_(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((i,o)=>{const l=o.view.Fa(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=oe(o);u.onlineState=l;let d=!1;u.queries.forEach((h,m)=>{for(const p of m.Sa)p.Fa(l)&&(d=!0)}),d&&Cm(u)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Z2(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new Le(te.comparator);o=o.insert(i,yt.newNoDocument(i,se.min()));const l=fe().add(i),u=new Bu(se.min(),new Map,new Le(ce),o,l);await Rx(r,u),r.Iu=r.Iu.remove(i),r.Eu.delete(e),Am(r)}else await kf(r.localStore,e,!1).then(()=>Pf(r,e,n)).catch(Zi)}async function eO(t,e){const n=oe(t),r=e.batch.batchId;try{const s=await u2(n.localStore,e);kx(n,r,null),Ax(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Xa(n,s)}catch(s){await Zi(s)}}async function tO(t,e,n){const r=oe(t);try{const s=await function(o,l){const u=oe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(ve(m!==null,37113),h=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);kx(r,e,n),Ax(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Xa(r,s)}catch(s){await Zi(s)}}function Ax(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function kx(t,e,n){const r=oe(t);let s=r.Au[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function Pf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||Nx(t,r)})}function Nx(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(wm(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),Am(t))}function E_(t,e,n){for(const r of n)r instanceof Sx?(t.du.addReference(r.key,e),nO(t,r)):r instanceof Ix?(J(Rm,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||Nx(t,r.key)):re(19791,{pu:r})}function nO(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(J(Rm,"New document in limbo: "+n),t.Tu.add(r),Am(t))}function Am(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new te(Ie.fromString(e)),r=t.Vu.next();t.Eu.set(r,new q2(n)),t.Iu=t.Iu.insert(n,r),mx(t.remoteStore,new kr(jn(cm(n.path)),r,"TargetPurposeLimboResolution",Du.le))}}async function Xa(t,e,n){const r=oe(t),s=[],i=[],o=[];r.hu.isEmpty()||(r.hu.forEach((l,u)=>{o.push(r.fu(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=vm.Rs(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.lu.Y_(s),await async function(u,d){const h=oe(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>B.forEach(d,p=>B.forEach(p.ds,_=>h.persistence.referenceDelegate.addReference(m,p.targetId,_)).next(()=>B.forEach(p.As,_=>h.persistence.referenceDelegate.removeReference(m,p.targetId,_)))))}catch(m){if(!eo(m))throw m;J(_m,"Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const _=h.xs.get(p),I=_.snapshotVersion,A=_.withLastLimboFreeSnapshotVersion(I);h.xs=h.xs.insert(p,A)}}}(r.localStore,i))}async function rO(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){J(Rm,"User change. New user:",e.toKey());const r=await dx(n.localStore,e);n.currentUser=e,function(i,o){i.Ru.forEach(l=>{l.forEach(u=>{u.reject(new Y($.CANCELLED,o))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Xa(n,r.ks)}}function sO(t,e){const n=oe(t),r=n.Eu.get(e);if(r&&r.cu)return fe().add(r.key);{let s=fe();const i=n.Pu.get(e);if(!i)return s;for(const o of i){const l=n.hu.get(o);s=s.unionWith(l.view.eu)}return s}}function bx(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Z2.bind(null,e),e.lu.Y_=$2.bind(null,e.eventManager),e.lu.gu=z2.bind(null,e.eventManager),e}function iO(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tO.bind(null,e),e}class cu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wu(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return c2(this.persistence,new o2,e.initialUser,this.serializer)}Su(e){return new ux(ym.fi,this.serializer)}bu(e){return new g2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cu.provider={build:()=>new cu};class oO extends cu{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ve(this.persistence.referenceDelegate instanceof au,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new qj(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Rt.withCacheSize(this.cacheSizeBytes):Rt.DEFAULT;return new ux(r=>au.fi(r,n),this.serializer)}}class jf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>w_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rO.bind(null,this.syncEngine),await M2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new U2}()}createDatastore(e){const n=Wu(e.databaseInfo.databaseId),r=function(i){return new E2(i)}(e.databaseInfo);return function(i,o,l,u){return new I2(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new R2(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>w_(this.syncEngine,n,0),function(){return p_.C()?new p_:new y2}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,h){const m=new H2(s,i,o,l,u,d);return h&&(m.mu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=oe(s);J(Ns,"RemoteStore shutting down."),i.da.add(5),await Ya(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}jf.provider={build:()=>new jf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="FirestoreClient";class aO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=mt.UNAUTHENTICATED,this.clientId=T1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{J(Yr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J(Yr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Im(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ah(t,e){t.asyncQueue.verifyOperationInProgress(),J(Yr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await dx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function x_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await lO(t);J(Yr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>g_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>g_(e.remoteStore,s)),t._onlineComponents=e}async function lO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J(Yr,"Using user provided OfflineComponentProvider");try{await ah(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Li("Error using user provided cache. Falling back to memory cache: "+n),await ah(t,new cu)}}else J(Yr,"Using default OfflineComponentProvider"),await ah(t,new oO(void 0));return t._offlineComponents}async function jx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J(Yr,"Using user provided OnlineComponentProvider"),await x_(t,t._uninitializedComponentsProvider._online)):(J(Yr,"Using default OnlineComponentProvider"),await x_(t,new jf))),t._onlineComponents}function cO(t){return jx(t).then(e=>e.syncEngine)}async function Ox(t){const e=await jx(t),n=e.eventManager;return n.onListen=G2.bind(null,e.syncEngine),n.onUnlisten=Y2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=K2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=X2.bind(null,e.syncEngine),n}function uO(t,e,n={}){const r=new er;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const h=new Px({next:p=>{h.xu(),o.enqueueAndForget(()=>xx(i,m));const _=p.docs.has(l);!_&&p.fromCache?d.reject(new Y($.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&p.fromCache&&u&&u.source==="server"?d.reject(new Y($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new Tx(cm(l.path),h,{includeMetadataChanges:!0,Qa:!0});return Ex(i,m)}(await Ox(t),t.asyncQueue,e,n,r)),r.promise}function dO(t,e,n={}){const r=new er;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const h=new Px({next:p=>{h.xu(),o.enqueueAndForget(()=>xx(i,m)),p.fromCache&&u.source==="server"?d.reject(new Y($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new Tx(l,h,{includeMetadataChanges:!0,Qa:!0});return Ex(i,m)}(await Ox(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t,e,n){if(!n)throw new Y($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hO(t,e,n,r){if(e===!0&&r===!0)throw new Y($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function S_(t){if(!te.isDocumentKey(t))throw new Y($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function I_(t){if(te.isDocumentKey(t))throw new Y($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re(12329,{type:typeof t})}function En(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gu(t);throw new Y($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function fO(t,e){if(e<=0)throw new Y($.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="firestore.googleapis.com",C_=!0;class R_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vx,this.ssl=C_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:C_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Bj)throw new Y($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Dx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ku{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new R_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new R_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wP;switch(r.type){case"firstParty":return new SP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=T_.get(n);r&&(J("ComponentProvider","Removing Datastore"),T_.delete(n),r.terminate())}(this),Promise.resolve()}}function pO(t,e,n,r={}){var s;t=En(t,Ku);const i=Ds(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&($p(`https://${u}`),zp("Firestore",!0)),o.host!==Vx&&o.host!==u&&Li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:r});if(!Is(d,l)&&(t._setSettings(d),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=mt.MOCK_USER;else{h=RE(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Y($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new mt(p)}t._authCredentials=new EP(new E1(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fr(this.firestore,e,this._query)}}class Tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}}class $r extends fr{constructor(e,n,r){super(e,n,cm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new te(e))}withConverter(e){return new $r(this.firestore,e,this._path)}}function lh(t,e,...n){if(t=Se(t),Lx("collection","path",e),t instanceof Ku){const r=Ie.fromString(e,...n);return I_(r),new $r(t,null,r)}{if(!(t instanceof Tt||t instanceof $r))throw new Y($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return I_(r),new $r(t.firestore,null,r)}}function ln(t,e,...n){if(t=Se(t),arguments.length===1&&(e=T1.newId()),Lx("doc","path",e),t instanceof Ku){const r=Ie.fromString(e,...n);return S_(r),new Tt(t,null,new te(r))}{if(!(t instanceof Tt||t instanceof $r))throw new Y($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return S_(r),new Tt(t.firestore,t instanceof $r?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="AsyncQueue";class k_{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new fx(this,"async_queue_retry"),this.rc=()=>{const r=oh();r&&J(A_,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=oh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=oh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new er;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!eo(e))throw e;J(A_,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,lr("INTERNAL UNHANDLED ERROR: ",N_(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=Sm.createAndSchedule(this,e,n,r,i=>this.uc(i));return this.Zu.push(s),s}oc(){this.Xu&&re(47125,{cc:N_(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function N_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Us extends Ku{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new k_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new k_(e),this._firestoreClient=void 0,await e}}}function mO(t,e){const n=typeof t=="object"?t:qp(),r=typeof t=="string"?t:e||tu,s=bu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=SE("firestore");i&&pO(s,...i)}return s}function Qu(t){if(t._terminated)throw new Y($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gO(t),t._firestoreClient}function gO(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,h){return new FP(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Dx(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new aO(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bi(ot.fromBase64String(e))}catch(n){throw new Y($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bi(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=/^__.*__$/;class vO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ts(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ka(e,this.data,n,this.fieldTransforms)}}class Mx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ts(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Fx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{Ic:t})}}class bm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new bm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return uu(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(Fx(this.Ic)&&yO.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class _O{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Wu(e)}bc(e,n,r,s=!1){return new bm({Ic:e,methodName:n,wc:r,path:rt.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function no(t){const e=t._freezeSettings(),n=Wu(t._databaseId);return new _O(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Pm(t,e,n,r,s,i={}){const o=t.bc(i.merge||i.mergeFields?2:0,e,n,s);Om("Data must be an object, but it was:",o,r);const l=Bx(r,o);let u,d;if(i.merge)u=new $t(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const m of i.mergeFields){const p=Of(e,m,n);if(!o.contains(p))throw new Y($.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);qx(h,p)||h.push(p)}u=new $t(h),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new vO(new Nt(l),u,d)}class Xu extends Yu{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xu}}class jm extends Yu{_toFieldTransform(e){return new uj(e.path,new Pa)}isEqual(e){return e instanceof jm}}function Ux(t,e,n,r){const s=t.bc(1,e,n);Om("Data must be an object, but it was:",s,r);const i=[],o=Nt.empty();es(r,(u,d)=>{const h=Dm(e,u,n);d=Se(d);const m=s.mc(h);if(d instanceof Xu)i.push(h);else{const p=Za(d,m);p!=null&&(i.push(h),o.set(h,p))}});const l=new $t(i);return new Mx(o,l,s.fieldTransforms)}function $x(t,e,n,r,s,i){const o=t.bc(1,e,n),l=[Of(e,r,n)],u=[s];if(i.length%2!=0)throw new Y($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(Of(e,i[p])),u.push(i[p+1]);const d=[],h=Nt.empty();for(let p=l.length-1;p>=0;--p)if(!qx(d,l[p])){const _=l[p];let I=u[p];I=Se(I);const A=o.mc(_);if(I instanceof Xu)d.push(_);else{const b=Za(I,A);b!=null&&(d.push(_),h.set(_,b))}}const m=new $t(d);return new Mx(h,m,o.fieldTransforms)}function zx(t,e,n,r=!1){return Za(n,t.bc(r?4:3,e))}function Za(t,e){if(Wx(t=Se(t)))return Om("Unsupported field value:",e,t),Bx(t,e);if(t instanceof Yu)return function(r,s){if(!Fx(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=Za(l,s.fc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Se(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aj(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=He.fromDate(r);return{timestampValue:ou(s.serializer,i)}}if(r instanceof He){const i=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ou(s.serializer,i)}}if(r instanceof km)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bi)return{bytesValue:nx(s.serializer,r._byteString)};if(r instanceof Tt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:mm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Nm)return function(o,l){return{mapValue:{fields:{[b1]:{stringValue:j1},[nu]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.gc("VectorValues must only contain numeric values.");return dm(l.serializer,d)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${Gu(r)}`)}(t,e)}function Bx(t,e){const n={};return I1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):es(t,(r,s)=>{const i=Za(s,e.Ac(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Wx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof He||t instanceof km||t instanceof Bi||t instanceof Tt||t instanceof Yu||t instanceof Nm)}function Om(t,e,n){if(!Wx(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Gu(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function Of(t,e,n){if((e=Se(e))instanceof Ja)return e._internalPath;if(typeof e=="string")return Dm(t,e);throw uu("Field path arguments must be of type string or ",t,!1,void 0,n)}const wO=new RegExp("[~\\*/\\[\\]]");function Dm(t,e,n){if(e.search(wO)>=0)throw uu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ja(...e.split("."))._internalPath}catch{throw uu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new Y($.INVALID_ARGUMENT,l+t+u)}function qx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ju("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class EO extends Lm{data(){return super.data()}}function Ju(t,e){return typeof e=="string"?Dm(t,e):e instanceof Ja?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vm{}class Zu extends Vm{}function Qe(t,e,...n){let r=[];e instanceof Vm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Mm).length,l=i.filter(u=>u instanceof ed).length;if(o>1||o>0&&l>0)throw new Y($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class ed extends Zu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ed(e,n,r)}_apply(e){const n=this._parse(e);return Hx(e._query,n),new fr(e.firestore,e.converter,Sf(e._query,n))}_parse(e){const n=no(e.firestore);return function(i,o,l,u,d,h,m){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){P_(m,h);const I=[];for(const A of m)I.push(b_(u,i,A));p={arrayValue:{values:I}}}else p=b_(u,i,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||P_(m,h),p=zx(l,o,m,h==="in"||h==="not-in");return Be.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function pt(t,e,n){const r=e,s=Ju("where",t);return ed._create(s,r,n)}class Mm extends Vm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Mm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:wn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)Hx(o,u),o=Sf(o,u)}(e._query,n),new fr(e.firestore,e.converter,Sf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fm extends Zu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Y($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ba(i,o)}(e._query,this._field,this._direction);return new fr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Vs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ch(t,e="asc"){const n=e,r=Ju("orderBy",t);return Fm._create(r,n)}class Um extends Zu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Um(e,n,r)}_apply(e){return new fr(e.firestore,e.converter,su(e._query,this._limit,this._limitType))}}function uh(t){return fO("limit",t),Um._create("limit",t,"F")}class $m extends Zu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new $m(e,n,r)}_apply(e){const n=SO(e,this.type,this._docOrFields,this._inclusive);return new fr(e.firestore,e.converter,function(s,i){return new Vs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function TO(...t){return $m._create("startAfter",t,!1)}function SO(t,e,n,r){if(n[0]=Se(n[0]),n[0]instanceof Lm)return function(i,o,l,u,d){if(!u)throw new Y($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const h=[];for(const m of Ii(i))if(m.field.isKeyField())h.push(ru(o,u.key));else{const p=u.data.field(m.field);if(Vu(p))throw new Y($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const _=m.field.canonicalString();throw new Y($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}h.push(p)}return new Ui(h,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=no(t.firestore);return function(o,l,u,d,h,m){const p=o.explicitOrderBy;if(h.length>p.length)throw new Y($.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let I=0;I<h.length;I++){const A=h[I];if(p[I].field.isKeyField()){if(typeof A!="string")throw new Y($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof A}`);if(!um(o)&&A.indexOf("/")!==-1)throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${A}' contains a slash.`);const b=o.path.child(Ie.fromString(A));if(!te.isDocumentKey(b))throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const w=new te(b);_.push(ru(l,w))}else{const b=zx(u,d,A);_.push(b)}}return new Ui(_,m)}(t._query,t.firestore._databaseId,s,e,n,r)}}function b_(t,e,n){if(typeof(n=Se(n))=="string"){if(n==="")throw new Y($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!um(e)&&n.indexOf("/")!==-1)throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ie.fromString(n));if(!te.isDocumentKey(r))throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ru(t,new te(r))}if(n instanceof Tt)return ru(t,n._key);throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gu(n)}.`)}function P_(t,e){if(!Array.isArray(t)||t.length===0)throw new Y($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Hx(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class IO{convertValue(e,n="none"){switch(Kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return es(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[nu].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Fe(o.doubleValue));return new Nm(i)}convertGeoPoint(e){return new km(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Mu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Aa(e));default:return null}}convertTimestamp(e){const n=Hr(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ie.fromString(e);ve(lx(r),9688,{name:e});const s=new ka(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||lr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gx extends Lm{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ju("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class fc extends Gx{data(e={}){return super.data(e)}}class CO{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Bo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new fc(this._firestore,this._userDataWriter,r.key,r,new Bo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new fc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Bo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new fc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Bo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:RO(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function RO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wo(t){t=En(t,Tt);const e=En(t.firestore,Us);return uO(Qu(e),t._key).then(n=>kO(e,t,n))}class Kx extends IO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}function as(t){t=En(t,fr);const e=En(t.firestore,Us),n=Qu(e),r=new Kx(e);return xO(t._query),dO(n,t._query).then(s=>new CO(e,r,t,s))}function AO(t,e,n){t=En(t,Tt);const r=En(t.firestore,Us),s=zm(t.converter,e,n);return td(r,[Pm(no(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Dt.none())])}function qo(t,e,n,...r){t=En(t,Tt);const s=En(t.firestore,Us),i=no(s);let o;return o=typeof(e=Se(e))=="string"||e instanceof Ja?$x(i,"updateDoc",t._key,e,n,r):Ux(i,"updateDoc",t._key,e),td(s,[o.toMutation(t._key,Dt.exists(!0))])}function j_(t,e){const n=En(t.firestore,Us),r=ln(t),s=zm(t.converter,e);return td(n,[Pm(no(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Dt.exists(!1))]).then(()=>r)}function td(t,e){return function(r,s){const i=new er;return r.asyncQueue.enqueueAndForget(async()=>J2(await cO(r),s,i)),i.promise}(Qu(t),e)}function kO(t,e,n){const r=n.docs.get(e._key),s=new Kx(t);return new Gx(t,s,e._key,r,new Bo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=no(e)}set(e,n,r){this._verifyNotCommitted();const s=dh(e,this._firestore),i=zm(s.converter,n,r),o=Pm(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Dt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=dh(e,this._firestore);let o;return o=typeof(n=Se(n))=="string"||n instanceof Ja?$x(this._dataReader,"WriteBatch.update",i._key,n,r,s):Ux(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Dt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=dh(e,this._firestore);return this._mutations=this._mutations.concat(new hm(n._key,Dt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dh(t,e){if((t=Se(t)).firestore!==e)throw new Y($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function sn(){return new jm("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t){return Qu(t=En(t,Us)),new NO(t,e=>td(t,e))}(function(e,n=!0){(function(s){Ji=s})(Ls),Cs(new Wr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Us(new xP(r.getProvider("auth-internal")),new IP(o,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Y($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ka(d.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),bn(Dv,Lv,e),bn(Dv,Lv,"esm2017")})();var bO="firebase",PO="11.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn(bO,PO,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="firebasestorage.googleapis.com",Yx="storageBucket",jO=2*60*1e3,OO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt extends Vn{constructor(e,n,r=0){super(hh(e),`Firebase Storage: ${n} (${hh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,lt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var at;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(at||(at={}));function hh(t){return"storage/"+t}function DO(){const t="An unknown error occurred, please check the error payload for server response.";return new lt(at.UNKNOWN,t)}function LO(t){return new lt(at.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function VO(t){return new lt(at.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function MO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new lt(at.UNAUTHENTICATED,t)}function FO(){return new lt(at.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function UO(t){return new lt(at.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function $O(){return new lt(at.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zO(){return new lt(at.CANCELED,"User canceled the upload/download.")}function BO(t){return new lt(at.INVALID_URL,"Invalid URL '"+t+"'.")}function WO(t){return new lt(at.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function qO(){return new lt(at.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Yx+"' property when initializing the app?")}function Df(t){return new lt(at.INVALID_ARGUMENT,t)}function Xx(){return new lt(at.APP_DELETED,"The Firebase app was deleted.")}function HO(t){return new lt(at.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jo(t){throw new lt(at.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Xt.makeFromUrl(e,n)}catch{return new Xt(e,"")}if(r.path==="")return r;throw WO(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(k){k.path_=decodeURIComponent(k.path)}const h="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",_=new RegExp(`^https?://${m}/${h}/b/${s}/o${p}`,"i"),I={bucket:1,path:3},A=n===Qx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",w=new RegExp(`^https?://${A}/${s}/${b}`,"i"),x=[{regex:l,indices:u,postModify:i},{regex:_,indices:I,postModify:d},{regex:w,indices:{bucket:1,path:2},postModify:d}];for(let k=0;k<x.length;k++){const D=x[k],V=D.regex.exec(e);if(V){const E=V[D.indices.bucket];let y=V[D.indices.path];y||(y=""),r=new Xt(E,y),D.postModify(r);break}}if(r==null)throw BO(e);return r}}class GO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let d=!1;function h(...b){d||(d=!0,e.apply(null,b))}function m(b){s=setTimeout(()=>{s=null,t(_,u())},b)}function p(){i&&clearTimeout(i)}function _(b,...w){if(d){p();return}if(b){p(),h.call(null,b,...w);return}if(u()||o){p(),h.call(null,b,...w);return}r<64&&(r*=2);let x;l===1?(l=2,x=0):x=(r+Math.random())*1e3,m(x)}let I=!1;function A(b){I||(I=!0,p(),!d&&(s!==null?(b||(l=2),clearTimeout(s),m(0)):b||(l=1)))}return m(0),i=setTimeout(()=>{o=!0,A(!0)},n),A}function QO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t){return t!==void 0}function D_(t,e,n,r){if(r<e)throw Df(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Df(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function JO(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var vs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(vs||(vs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,n,r,s,i,o,l,u,d,h,m,p=!0,_=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=p,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,A)=>{this.resolve_=I,this.reject_=A,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Bl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===vs.NO_ERROR,u=i.getStatus();if(!l||ZO(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===vs.ABORT;r(!1,new Bl(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Bl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());YO(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=DO();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?Xx():zO();o(u)}else{const u=$O();o(u)}};this.canceled_?n(!1,new Bl(!1,null,!0)):this.backoffId_=KO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&QO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function tD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function nD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function sD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function iD(t,e,n,r,s,i,o=!0,l=!1){const u=JO(t.urlParams),d=t.url+u,h=Object.assign({},t.headers);return rD(h,e),tD(h,n),nD(h,i),sD(h,r),new eD(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function aD(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function lD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class cD{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function uD(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=FO():s=MO():n.getStatus()===402?s=VO(t.bucket):n.getStatus()===403?s=UO(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function dD(t){const e=uD(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=LO(t.path)),i.serverResponse=s.serverResponse,i}return n}function hD(t,e){const n=e.fullServerUrl(),r=XO(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(u,d){}const l=new cD(r,s,o,i);return l.successCodes=[200,204],l.errorHandler=dD(e),l}class fD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw jo("cannot .send() more than once");if(Ds(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw jo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw jo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw jo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw jo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class pD extends fD{initXhr(){this.xhr_.responseType="text"}}function mD(){return new pD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,n){this._service=e,n instanceof Xt?this._location=n:this._location=Xt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new bs(e,n)}get root(){const e=new Xt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lD(this._location.path)}get storage(){return this._service}get parent(){const e=oD(this._location.path);if(e===null)return null;const n=new Xt(this._location.bucket,e);return new bs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw HO(e)}}function gD(t){t._throwIfRoot("deleteObject");const e=hD(t.storage,t._location);return t.storage.makeRequestWithTokens(e,mD)}function yD(t,e){const n=aD(t._location.path,e),r=new Xt(t._location.bucket,n);return new bs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(t){return/^[A-Za-z]+:\/\//.test(t)}function _D(t,e){return new bs(t,e)}function Jx(t,e){if(t instanceof Bm){const n=t;if(n._bucket==null)throw qO();const r=new bs(n,n._bucket);return e!=null?Jx(r,e):r}else return e!==void 0?yD(t,e):t}function wD(t,e){if(e&&vD(e)){if(t instanceof Bm)return _D(t,e);throw Df("To use ref(service, url), the first argument must be a Storage instance.")}else return Jx(t,e)}function L_(t,e){const n=e==null?void 0:e[Yx];return n==null?null:Xt.makeFromBucketSpec(n,t)}function ED(t,e,n,r={}){t.host=`${e}:${n}`;const s=Ds(e);s&&($p(`https://${t.host}`),zp("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:RE(i,t.app.options.projectId))}class Bm{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=Qx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jO,this._maxUploadRetryTime=OO,this._requests=new Set,s!=null?this._bucket=Xt.makeFromBucketSpec(s,this._host):this._bucket=L_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Xt.makeFromBucketSpec(this._url,e):this._bucket=L_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){D_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){D_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new bs(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new GO(Xx());{const o=iD(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const V_="@firebase/storage",M_="0.13.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="storage";function xD(t){return t=Se(t),gD(t)}function TD(t,e){return t=Se(t),wD(t,e)}function SD(t=qp(),e){t=Se(t);const r=bu(t,Zx).getImmediate({identifier:e}),s=SE("storage");return s&&ID(r,...s),r}function ID(t,e,n,r={}){ED(t,e,n,r)}function CD(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Bm(n,r,s,e,Ls)}function RD(){Cs(new Wr(Zx,CD,"PUBLIC").setMultipleInstances(!0)),bn(V_,M_,""),bn(V_,M_,"esm2017")}RD();const AD={apiKey:"AIzaSyAI1i2sd7Lh_M8drduYZNyh1Cn78zRFuOo",authDomain:"vocab-38614.firebaseapp.com",projectId:"vocab-38614",storageBucket:"vocab-38614.firebasestorage.app",messagingSenderId:"444289368232",appId:"1:444289368232:web:6cb8356d4a8a8fca5c429d"},Wm=NE(AD),Cr=mO(Wm),zn=vP(Wm),kD=SD(Wm);class ND{constructor(){this.currentUser=null,this.authStateListeners=[]}initializeAuthListener(e){return ab(zn,async n=>{if(n){const r=await this.getUserProfile(n.uid);this.currentUser={uid:n.uid,email:n.email,displayName:n.displayName,photoURL:n.photoURL,emailVerified:n.emailVerified,...r}}else this.currentUser=null;e(this.currentUser)})}async registerWithEmail(e,n,r={}){try{const i=(await ZN(zn,e,n)).user;return r.displayName&&await rb(i,{displayName:r.displayName}),await this.createUserProfile(i.uid,{email:i.email,displayName:r.displayName||"",createdAt:new Date().toISOString(),learningPreferences:{dailyGoal:10,difficulty:"medium",soundEnabled:!0,theme:"light",language:"en"},progress:{totalWordsLearned:0,currentLevel:1,streakDays:0,lastActiveDate:new Date().toISOString()},...r}),await this.sendEmailVerification(),{success:!0,user:{uid:i.uid,email:i.email,displayName:i.displayName,emailVerified:i.emailVerified}}}catch(s){return{success:!1,error:this.handleAuthError(s)}}}async loginWithEmail(e,n,r=!1){try{await sb(zn,r?i1:tm);const o=(await eb(zn,e,n)).user;return await this.updateUserProfile(o.uid,{lastActiveDate:new Date().toISOString()}),{success:!0,user:{uid:o.uid,email:o.email,displayName:o.displayName,emailVerified:o.emailVerified}}}catch(s){return{success:!1,error:this.handleAuthError(s)}}}async signInWithGoogle(){try{const e=new Hn;e.addScope("email"),e.addScope("profile");const r=(await Rb(zn,e)).user;return await this.getUserProfile(r.uid)?await this.updateUserProfile(r.uid,{lastActiveDate:new Date().toISOString()}):await this.createUserProfile(r.uid,{email:r.email,displayName:r.displayName,photoURL:r.photoURL,createdAt:new Date().toISOString(),provider:"google",learningPreferences:{dailyGoal:10,difficulty:"medium",soundEnabled:!0,theme:"light",language:"en"},progress:{totalWordsLearned:0,currentLevel:1,streakDays:0,lastActiveDate:new Date().toISOString()}}),{success:!0,user:{uid:r.uid,email:r.email,displayName:r.displayName,photoURL:r.photoURL,emailVerified:r.emailVerified}}}catch(e){return{success:!1,error:this.handleAuthError(e)}}}async logout(){try{return await lb(zn),this.currentUser=null,{success:!0}}catch(e){return{success:!1,error:this.handleAuthError(e)}}}async resetPassword(e){try{return await JN(zn,e),{success:!0}}catch(n){return{success:!1,error:this.handleAuthError(n)}}}async sendEmailVerification(){try{if(zn.currentUser)return await tb(zn.currentUser),{success:!0};throw new Error("No user signed in")}catch(e){return{success:!1,error:this.handleAuthError(e)}}}async createUserProfile(e,n){try{return await AO(ln(Cr,"users",e),n),{success:!0}}catch(r){return console.error("Error creating user profile:",r),{success:!1,error:r.message}}}async getUserProfile(e){if(!e)return console.warn("No UID provided to getUserProfile"),null;try{const n=ln(Cr,"users",e),r=await Wo(n);return r.exists()?r.data():null}catch(n){return n.code==="permission-denied"?(console.warn("Firestore permissions not configured for development. Using default user data."),{preferences:{theme:"light",soundEnabled:!0,difficulty:"medium"},learningStats:{currentLevel:1,totalWordsLearned:0,streakDays:0}}):(console.error("Error getting user profile:",n),null)}}async updateUserProfile(e,n){try{const r=ln(Cr,"users",e);return await qo(r,n),{success:!0}}catch(r){return console.error("Error updating user profile:",r),{success:!1,error:r.message}}}getCurrentUser(){return this.currentUser}handleAuthError(e){return{"auth/user-not-found":"No user found with this email address.","auth/wrong-password":"Incorrect password.","auth/email-already-in-use":"An account with this email already exists.","auth/weak-password":"Password should be at least 6 characters long.","auth/invalid-email":"Please enter a valid email address.","auth/too-many-requests":"Too many failed attempts. Please try again later.","auth/network-request-failed":"Network error. Please check your connection.","auth/popup-closed-by-user":"Sign-in popup was closed before completion.","auth/cancelled-popup-request":"Sign-in was cancelled.","auth/popup-blocked":"Sign-in popup was blocked by the browser."}[e.code]||e.message||"An unexpected error occurred."}validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}validatePassword(e){const n=[];return e.length<6&&n.push("Password must be at least 6 characters long"),/(?=.*[a-z])/.test(e)||n.push("Password must contain at least one lowercase letter"),/(?=.*[A-Z])/.test(e)||n.push("Password must contain at least one uppercase letter"),/(?=.*\d)/.test(e)||n.push("Password must contain at least one number"),{isValid:n.length===0,errors:n}}}const un=new ND,eT={user:{isAuthenticated:!1,profile:null,isLoading:!1,error:null,preferences:{theme:"light",soundEnabled:!0,difficulty:"medium"}},learning:{currentLevel:1,totalWordsLearned:150,streakDays:5,dailyGoal:10,todayProgress:3},vocabulary:{words:[],currentWord:null,wordHistory:[],knownWords:["eloquent","gregarious"],unknownWords:["ubiquitous"],searchQuery:"",searchResults:[],isLoading:!1,error:null,totalWords:0,currentPage:1,filters:{difficulty:null,category:null}},ui:{isLoading:!1,error:null,notification:null}},X={SET_USER:"SET_USER",LOGOUT_USER:"LOGOUT_USER",UPDATE_PREFERENCES:"UPDATE_PREFERENCES",SET_AUTH_LOADING:"SET_AUTH_LOADING",SET_AUTH_ERROR:"SET_AUTH_ERROR",CLEAR_AUTH_ERROR:"CLEAR_AUTH_ERROR",UPDATE_PROGRESS:"UPDATE_PROGRESS",INCREMENT_STREAK:"INCREMENT_STREAK",RESET_STREAK:"RESET_STREAK",SET_VOCABULARY_LOADING:"SET_VOCABULARY_LOADING",SET_VOCABULARY_ERROR:"SET_VOCABULARY_ERROR",LOAD_WORDS_SUCCESS:"LOAD_WORDS_SUCCESS",SET_CURRENT_WORD:"SET_CURRENT_WORD",MARK_WORD_KNOWN:"MARK_WORD_KNOWN",MARK_WORD_UNKNOWN:"MARK_WORD_UNKNOWN",ADD_TO_HISTORY:"ADD_TO_HISTORY",SET_SEARCH_QUERY:"SET_SEARCH_QUERY",SET_SEARCH_RESULTS:"SET_SEARCH_RESULTS",SET_VOCABULARY_FILTERS:"SET_VOCABULARY_FILTERS",SET_LOADING:"SET_LOADING",SET_ERROR:"SET_ERROR",SET_NOTIFICATION:"SET_NOTIFICATION",CLEAR_ERROR:"CLEAR_ERROR",CLEAR_NOTIFICATION:"CLEAR_NOTIFICATION"},bD=(t,e)=>{switch(e.type){case X.SET_USER:return{...t,user:{...t.user,isAuthenticated:!0,profile:e.payload}};case X.LOGOUT_USER:return{...t,user:{...eT.user}};case X.UPDATE_PREFERENCES:return{...t,user:{...t.user,preferences:{...t.user.preferences,...e.payload}}};case X.SET_AUTH_LOADING:return{...t,user:{...t.user,isLoading:e.payload}};case X.SET_AUTH_ERROR:return{...t,user:{...t.user,error:e.payload,isLoading:!1}};case X.CLEAR_AUTH_ERROR:return{...t,user:{...t.user,error:null}};case X.UPDATE_PROGRESS:return{...t,learning:{...t.learning,...e.payload}};case X.SET_VOCABULARY_LOADING:return{...t,vocabulary:{...t.vocabulary,isLoading:e.payload}};case X.SET_VOCABULARY_ERROR:return{...t,vocabulary:{...t.vocabulary,error:e.payload,isLoading:!1}};case X.LOAD_WORDS_SUCCESS:return{...t,vocabulary:{...t.vocabulary,words:e.payload.words,totalWords:e.payload.totalWords,currentPage:e.payload.currentPage,isLoading:!1,error:null}};case X.MARK_WORD_KNOWN:return{...t,vocabulary:{...t.vocabulary,knownWords:[...t.vocabulary.knownWords,e.payload],unknownWords:t.vocabulary.unknownWords.filter(n=>n!==e.payload)},learning:{...t.learning,totalWordsLearned:t.learning.totalWordsLearned+1,todayProgress:t.learning.todayProgress+1}};case X.MARK_WORD_UNKNOWN:return{...t,vocabulary:{...t.vocabulary,unknownWords:[...t.vocabulary.unknownWords,e.payload],knownWords:t.vocabulary.knownWords.filter(n=>n!==e.payload)}};case X.SET_CURRENT_WORD:return{...t,vocabulary:{...t.vocabulary,currentWord:e.payload}};case X.SET_SEARCH_QUERY:return{...t,vocabulary:{...t.vocabulary,searchQuery:e.payload}};case X.SET_VOCABULARY_FILTERS:return{...t,vocabulary:{...t.vocabulary,filters:{...t.vocabulary.filters,...e.payload}}};case X.SET_LOADING:return{...t,ui:{...t.ui,isLoading:e.payload}};case X.SET_ERROR:return{...t,ui:{...t.ui,error:e.payload,isLoading:!1}};case X.CLEAR_ERROR:return{...t,ui:{...t.ui,error:null}};case X.SET_NOTIFICATION:return{...t,ui:{...t.ui,notification:e.payload}};case X.CLEAR_NOTIFICATION:return{...t,ui:{...t.ui,notification:null}};default:return t}},tT=P.createContext(),nT=P.createContext(),rT=({children:t})=>{const[e,n]=P.useReducer(bD,eT);return P.useEffect(()=>{const r=un.initializeAuthListener(s=>{n(s?{type:X.SET_USER,payload:s}:{type:X.LOGOUT_USER})});return()=>r&&r()},[]),P.useEffect(()=>{(async()=>{try{n({type:X.SET_VOCABULARY_LOADING,payload:!0});const s=await hn.getWords({page:1,limit:20,difficulty:e.vocabulary.filters.difficulty,category:e.vocabulary.filters.category});n({type:X.LOAD_WORDS_SUCCESS,payload:s})}catch(s){n({type:X.SET_VOCABULARY_ERROR,payload:s.message})}})()},[]),a.jsx(tT.Provider,{value:e,children:a.jsx(nT.Provider,{value:n,children:t})})};rT.propTypes={children:C.node.isRequired};const Fn=()=>{const t=P.useContext(tT);if(t===void 0)throw new Error("useAppState must be used within an AppProvider");return t},$s=()=>{const t=P.useContext(nT);if(t===void 0)throw new Error("useAppDispatch must be used within an AppProvider");return t},_e={setUser:t=>({type:X.SET_USER,payload:t}),logoutUser:()=>({type:X.LOGOUT_USER}),updatePreferences:t=>({type:X.UPDATE_PREFERENCES,payload:t}),updateProgress:t=>({type:X.UPDATE_PROGRESS,payload:t}),markWordKnown:t=>({type:X.MARK_WORD_KNOWN,payload:t}),markWordUnknown:t=>({type:X.MARK_WORD_UNKNOWN,payload:t}),setCurrentWord:t=>({type:X.SET_CURRENT_WORD,payload:t}),setLoading:t=>({type:X.SET_LOADING,payload:t}),setError:t=>({type:X.SET_ERROR,payload:t}),clearError:()=>({type:X.CLEAR_ERROR}),setNotification:t=>({type:X.SET_NOTIFICATION,payload:t}),clearNotification:()=>({type:X.CLEAR_NOTIFICATION}),loadWords:(t={})=>async e=>{try{e({type:X.SET_VOCABULARY_LOADING,payload:!0});const n=await hn.getWords(t);e({type:X.LOAD_WORDS_SUCCESS,payload:n})}catch(n){e({type:X.SET_VOCABULARY_ERROR,payload:n.message})}},searchWords:t=>async e=>{try{e({type:X.SET_VOCABULARY_LOADING,payload:!0}),e({type:X.SET_SEARCH_QUERY,payload:t});const n=await hn.getWords({search:t});e({type:X.LOAD_WORDS_SUCCESS,payload:n})}catch(n){e({type:X.SET_VOCABULARY_ERROR,payload:n.message})}},getRandomWord:()=>async t=>{try{const e=await hn.getRandomWords(1);e.length>0&&t({type:X.SET_CURRENT_WORD,payload:e[0]})}catch(e){t({type:X.SET_ERROR,payload:e.message})}},registerUser:async(t,e,n,r)=>{try{t({type:X.SET_AUTH_LOADING,payload:!0});const s=await un.registerWithEmail(e,n,r);s.success?(t({type:X.SET_USER,payload:s.user}),t({type:X.SET_NOTIFICATION,payload:{type:"success",message:"Account created successfully! Please check your email to verify your account."}})):t({type:X.SET_AUTH_ERROR,payload:s.error})}catch(s){t({type:X.SET_AUTH_ERROR,payload:s.message})}},loginUser:async(t,e,n,r=!1)=>{try{t({type:X.SET_AUTH_LOADING,payload:!0});const s=await un.loginWithEmail(e,n,r);s.success?(t({type:X.SET_USER,payload:s.user}),t({type:X.SET_NOTIFICATION,payload:{type:"success",message:"Login successful!"}})):t({type:X.SET_AUTH_ERROR,payload:s.error})}catch(s){t({type:X.SET_AUTH_ERROR,payload:s.message})}},loginWithGoogle:async t=>{try{t({type:X.SET_AUTH_LOADING,payload:!0});const e=await un.signInWithGoogle();e.success?(t({type:X.SET_USER,payload:e.user}),t({type:X.SET_NOTIFICATION,payload:{type:"success",message:"Login successful!"}})):t({type:X.SET_AUTH_ERROR,payload:e.error})}catch(e){t({type:X.SET_AUTH_ERROR,payload:e.message})}},logoutUser:async t=>{try{await un.logout(),t({type:X.LOGOUT_USER}),t({type:X.SET_NOTIFICATION,payload:{type:"success",message:"Logged out successfully!"}})}catch(e){t({type:X.SET_ERROR,payload:e.message})}},resetPassword:async(t,e)=>{try{t({type:X.SET_AUTH_LOADING,payload:!0});const n=await un.resetPassword(e);n.success?(t({type:X.SET_AUTH_LOADING,payload:!1}),t({type:X.SET_NOTIFICATION,payload:{type:"success",message:"Password reset email sent! Please check your inbox."}})):t({type:X.SET_AUTH_ERROR,payload:n.error})}catch(n){t({type:X.SET_AUTH_ERROR,payload:n.message})}},sendEmailVerification:async t=>{try{const e=await un.sendEmailVerification();e.success?t({type:X.SET_NOTIFICATION,payload:{type:"success",message:"Verification email sent!"}}):t({type:X.SET_ERROR,payload:e.error})}catch(e){t({type:X.SET_ERROR,payload:e.message})}},clearAuthError:()=>({type:X.CLEAR_AUTH_ERROR})};const le=({children:t,variant:e="primary",size:n="medium",disabled:r=!1,loading:s=!1,fullWidth:i=!1,leftIcon:o,rightIcon:l,onClick:u,type:d="button",className:h="",...m})=>{const p=["btn",`btn-${e}`,`btn-${n}`,i&&"btn-full-width",s&&"btn-loading",r&&"btn-disabled",h].filter(Boolean).join(" ");return a.jsxs("button",{type:d,className:p,disabled:r||s,onClick:u,...m,children:[s&&a.jsx("span",{className:"btn-spinner"}),!s&&o&&a.jsx("span",{className:"btn-icon-left",children:o}),a.jsx("span",{className:s?"btn-text-loading":"btn-text",children:t}),!s&&l&&a.jsx("span",{className:"btn-icon-right",children:l})]})};le.propTypes={children:C.node.isRequired,variant:C.oneOf(["primary","secondary","success","danger","warning","info","outline"]),size:C.oneOf(["small","medium","large"]),disabled:C.bool,loading:C.bool,fullWidth:C.bool,leftIcon:C.node,rightIcon:C.node,onClick:C.func,type:C.oneOf(["button","submit","reset"]),className:C.string};class du extends pn.Component{constructor(n){super(n);zg(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onRetry&&this.props.onRetry()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r),this.setState({error:n,errorInfo:r}),this.props.onError&&this.props.onError(n,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"error-boundary",children:a.jsxs("div",{className:"error-content",children:[a.jsx("div",{className:"error-icon",children:""}),a.jsx("h2",{className:"error-title",children:this.props.title||"Something went wrong"}),a.jsx("p",{className:"error-message",children:this.props.message||"We encountered an unexpected error. Please try refreshing the page or contact support if the problem persists."}),this.props.showDetails&&this.state.error&&a.jsxs("details",{className:"error-details",children:[a.jsx("summary",{children:"Error Details"}),a.jsxs("pre",{className:"error-stack",children:[this.state.error.toString(),this.state.errorInfo.componentStack]})]}),a.jsxs("div",{className:"error-actions",children:[a.jsx(le,{variant:"primary",onClick:this.handleRetry,children:"Try Again"}),a.jsx(le,{variant:"secondary",onClick:()=>window.location.reload(),children:"Refresh Page"})]})]})}):this.props.children}}du.propTypes={children:C.node.isRequired,fallback:C.node,title:C.string,message:C.string,showDetails:C.bool,onError:C.func,onRetry:C.func};du.defaultProps={showDetails:!1};const PD=()=>{const t=Tn(),e=Os(),n=$s(),{user:r}=Fn(),s=[{path:"/",label:"Home"},{path:"/about",label:"About"}],i=[{path:"/",label:"Home"},{path:"/dashboard",label:"Dashboard"},{path:"/quiz",label:"Quiz"},{path:"/vocabulary",label:"My Vocabulary"},{path:"/custom-vocabulary",label:"Upload"},{path:"/profile",label:"Profile"},{path:"/about",label:"About"}],o=r.isAuthenticated?i:s,l=async()=>{await n(_e.logoutUser()),e("/")};return["/login","/register","/forgot-password"].includes(t.pathname)?null:a.jsxs("nav",{className:"navigation",children:[a.jsx("div",{className:"nav-brand",children:a.jsx(dn,{to:"/",children:" Vocabulary"})}),a.jsx("ul",{className:"nav-links",children:o.map(d=>a.jsx("li",{children:a.jsx(dn,{to:d.path,className:t.pathname===d.path?"active":"",children:d.label})},d.path))}),a.jsx("div",{className:"nav-auth",children:r.isAuthenticated?a.jsxs("div",{className:"auth-section",children:[r.profile&&a.jsxs("span",{className:"user-greeting",children:["Hi, ",r.profile.displayName||"User","!"]}),a.jsx(le,{variant:"info",size:"small",onClick:l,disabled:r.isLoading,children:"Logout"})]}):a.jsxs("div",{className:"auth-section",children:[a.jsx(dn,{to:"/login",children:a.jsx(le,{variant:"secondary",size:"small",children:"Login"})}),a.jsx(dn,{to:"/register",children:a.jsx(le,{variant:"primary",size:"small",children:"Sign Up"})})]})})]})};const Wi=({size:t="medium",color:e="#007bff",text:n,className:r="",fullScreen:s=!1})=>{const i=["loading-spinner",`spinner-${t}`,s&&"spinner-fullscreen",r].filter(Boolean).join(" "),o=a.jsxs("div",{className:i,children:[a.jsx("div",{className:"spinner",style:{borderTopColor:e}}),n&&a.jsx("p",{className:"spinner-text",children:n})]});return s?a.jsx("div",{className:"spinner-overlay",children:o}):o};Wi.propTypes={size:C.oneOf(["small","medium","large"]),color:C.string,text:C.string,className:C.string,fullScreen:C.bool};const Ys=({children:t})=>{const{user:e}=Fn(),n=Tn();return e.isLoading?a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:a.jsx(Wi,{size:"large"})}):e.isAuthenticated?t:a.jsx(IR,{to:"/login",state:{from:n},replace:!0})};const qm=({word:t,audioUrl:e,autoPlay:n=!1,showControls:r=!0,showWaveform:s=!0,onPlay:i,onPause:o,onEnd:l,className:u=""})=>{const[d,h]=P.useState(!1),[m,p]=P.useState(!1),[_,I]=P.useState(0),[A,b]=P.useState(0),[w,v]=P.useState(1),[x,k]=P.useState(1),[D,V]=P.useState(null),E=P.useRef(null),y=P.useRef(null);P.useEffect(()=>{const W=E.current;if(!W)return;const U=()=>{I(W.duration),p(!1)},M=()=>{b(W.currentTime)},G=()=>{h(!1),b(0),l&&l()},ie=Ee=>{V("Error loading audio"),p(!1),console.error("Audio error:",Ee)},me=()=>{p(!0),V(null)};return W.addEventListener("loadedmetadata",U),W.addEventListener("timeupdate",M),W.addEventListener("ended",G),W.addEventListener("error",ie),W.addEventListener("loadstart",me),n&&e&&T(),()=>{W.removeEventListener("loadedmetadata",U),W.removeEventListener("timeupdate",M),W.removeEventListener("ended",G),W.removeEventListener("error",ie),W.removeEventListener("loadstart",me)}},[e,n,l]);const T=async()=>{const W=E.current;if(W)try{if(e)W.src=e;else if(t&&"speechSynthesis"in window){await R(t);return}else throw new Error("No audio source available");d?(W.pause(),h(!1),o&&o()):(await W.play(),h(!0),i&&i())}catch(U){V("Playback failed"),console.error("Playback error:",U)}},R=async W=>new Promise((U,M)=>{if(!("speechSynthesis"in window)){M(new Error("Speech synthesis not supported"));return}const G=new SpeechSynthesisUtterance(W);G.rate=x,G.volume=w,G.pitch=1,G.onstart=()=>{h(!0),i&&i()},G.onend=()=>{h(!1),l&&l(),U()},G.onerror=ie=>{h(!1),V("TTS failed"),M(ie)},window.speechSynthesis.speak(G)}),j=W=>{const U=E.current,M=y.current;if(!U||!M||!_)return;const G=M.getBoundingClientRect(),ie=W.clientX-G.left,me=G.width,Ee=ie/me*_;U.currentTime=Ee,b(Ee)},O=W=>{const U=parseFloat(W.target.value);v(U),E.current&&(E.current.volume=U)},N=W=>{k(W),E.current&&(E.current.playbackRate=W)},ee=W=>{if(isNaN(W))return"0:00";const U=Math.floor(W/60),M=Math.floor(W%60);return`${U}:${M.toString().padStart(2,"0")}`},z=_>0?A/_*100:0,H=["audio-player",d&&"playing",m&&"loading",D&&"error",u].filter(Boolean).join(" ");return a.jsxs("div",{className:H,children:[a.jsx("audio",{ref:E,preload:"metadata"}),a.jsxs("div",{className:"audio-controls",children:[a.jsx(le,{variant:"primary",size:"small",onClick:T,loading:m,disabled:!!D,className:"play-button",children:d?"":""}),t&&a.jsx("span",{className:"audio-word",children:t})]}),r&&a.jsxs("div",{className:"audio-extended-controls",children:[a.jsxs("div",{className:"progress-container",children:[a.jsx("span",{className:"time-display",children:ee(A)}),a.jsxs("div",{className:"progress-bar",ref:y,onClick:j,children:[a.jsx("div",{className:"progress-fill",style:{width:`${z}%`}}),a.jsx("div",{className:"progress-handle",style:{left:`${z}%`}})]}),a.jsx("span",{className:"time-display",children:ee(_)})]}),a.jsxs("div",{className:"audio-additional-controls",children:[a.jsxs("div",{className:"volume-control",children:[a.jsx("span",{className:"control-icon",children:""}),a.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:w,onChange:O,className:"volume-slider"})]}),a.jsxs("div",{className:"playback-rate-control",children:[a.jsx("span",{className:"control-label",children:"Speed:"}),[.5,.75,1,1.25,1.5].map(W=>a.jsxs("button",{onClick:()=>N(W),className:`rate-button ${x===W?"active":""}`,children:[W,"x"]},W))]})]})]}),s&&a.jsx("div",{className:"waveform-container",children:a.jsx("div",{className:"waveform",children:Array.from({length:20}).map((W,U)=>a.jsx("div",{className:`waveform-bar ${d?"animated":""}`,style:{height:`${Math.random()*100}%`,animationDelay:`${U*.1}s`}},U))})}),D&&a.jsxs("div",{className:"audio-error",children:[a.jsx("span",{className:"error-icon",children:""}),a.jsx("span",{className:"error-text",children:D})]})]})};qm.propTypes={word:C.string,audioUrl:C.string,autoPlay:C.bool,showControls:C.bool,showWaveform:C.bool,onPlay:C.func,onPause:C.func,onEnd:C.func,className:C.string};const sT=({word:t,pronunciation:e,definition:n,example:r,difficulty:s,onAudioPlay:i,onMarkKnown:o,onMarkUnknown:l,showActions:u=!0,flipped:d=!1})=>{const[h,m]=P.useState(d),p=()=>{m(!h)},_=I=>{switch(I){case"easy":return"#28a745";case"medium":return"#ffc107";case"hard":return"#dc3545";default:return"#6c757d"}};return a.jsx("div",{className:`vocabulary-card ${h?"flipped":""}`,children:a.jsxs("div",{className:"card-inner",children:[a.jsxs("div",{className:"card-front",children:[a.jsxs("div",{className:"card-header",children:[a.jsx("h2",{className:"word",children:t}),s&&a.jsx("span",{className:"difficulty-badge",style:{backgroundColor:_(s)},children:s})]}),e&&a.jsxs("div",{className:"pronunciation",children:[a.jsxs("span",{className:"pronunciation-text",children:["/",e,"/"]}),a.jsx(qm,{word:t,showControls:!1,showWaveform:!1,className:"compact",onPlay:i})]}),a.jsx(le,{onClick:p,variant:"secondary",size:"small",children:"Show Definition"})]}),a.jsxs("div",{className:"card-back",children:[a.jsxs("div",{className:"definition",children:[a.jsx("h3",{children:"Definition"}),a.jsx("p",{children:n})]}),r&&a.jsxs("div",{className:"example",children:[a.jsx("h4",{children:"Example"}),a.jsxs("p",{children:['"',r,'"']})]}),a.jsxs("div",{className:"card-actions",children:[a.jsx(le,{onClick:p,variant:"secondary",size:"small",children:"Show Word"}),u&&a.jsxs("div",{className:"knowledge-actions",children:[a.jsx(le,{onClick:()=>l==null?void 0:l(t),variant:"danger",size:"small",children:"Don't Know"}),a.jsx(le,{onClick:()=>o==null?void 0:o(t),variant:"success",size:"small",children:"Know It!"})]})]})]})]})})};sT.propTypes={word:C.string.isRequired,pronunciation:C.string,definition:C.string.isRequired,example:C.string,difficulty:C.oneOf(["easy","medium","hard"]),onAudioPlay:C.func,onMarkKnown:C.func,onMarkUnknown:C.func,showActions:C.bool,flipped:C.bool};const pc=({children:t,onSubmit:e,validation:n={},className:r="",layout:s="vertical",spacing:i="medium",showSubmitButton:o=!0,submitButtonText:l="Submit",submitButtonProps:u={},resetOnSubmit:d=!1,disabled:h=!1,...m})=>{const[p,_]=P.useState({}),[I,A]=P.useState({}),[b,w]=P.useState({}),[v,x]=P.useState(!1),k=P.useCallback((N,ee)=>{const z=n[N];if(!z)return"";if(z.required&&(!ee||ee.toString().trim()===""))return z.requiredMessage||`${N} is required`;if(z.minLength&&ee&&ee.toString().length<z.minLength)return z.minLengthMessage||`${N} must be at least ${z.minLength} characters`;if(z.maxLength&&ee&&ee.toString().length>z.maxLength)return z.maxLengthMessage||`${N} must be no more than ${z.maxLength} characters`;if(z.pattern&&ee&&!z.pattern.test(ee.toString()))return z.patternMessage||`${N} format is invalid`;if(z.custom&&typeof z.custom=="function"){const H=z.custom(ee,p);if(H!==!0&&typeof H=="string")return H}return""},[n,p]),D=P.useCallback(()=>{const N={};let ee=!0;return Object.keys(n).forEach(z=>{const H=k(z,p[z]);H&&(N[z]=H,ee=!1)}),A(N),ee},[n,p,k]),V=P.useCallback((N,ee)=>{if(_(z=>({...z,[N]:ee})),b[N]){const z=k(N,ee);A(H=>({...H,[N]:z}))}},[b,k]),E=P.useCallback(N=>{w(z=>({...z,[N]:!0}));const ee=k(N,p[N]);A(z=>({...z,[N]:ee}))},[p,k]),y=async N=>{if(N.preventDefault(),h||v)return;const ee=Object.keys(n),z={};if(ee.forEach(H=>{z[H]=!0}),w(z),!!D()){x(!0);try{e&&await e(p,{setErrors:A,setValues:_}),d&&(_({}),A({}),w({}))}catch(H){console.error("Form submission error:",H)}finally{x(!1)}}},T=P.useCallback(()=>{_({}),A({}),w({})},[]),R={values:p,errors:I,touched:b,isSubmitting:v,disabled:h||v,handleFieldChange:V,handleFieldBlur:E,resetForm:T},j=["form",`form-${s}`,`form-spacing-${i}`,h&&"disabled",v&&"submitting",r].filter(Boolean).join(" "),O=pn.Children.map(t,N=>pn.isValidElement(N)?pn.cloneElement(N,{formContext:R}):N);return a.jsxs("form",{className:j,onSubmit:y,...m,children:[a.jsx("div",{className:"form-content",children:O}),o&&a.jsx("div",{className:"form-actions",children:a.jsx(le,{type:"submit",variant:"primary",loading:v,disabled:h,...u,children:l})})]})};pc.propTypes={children:C.node.isRequired,onSubmit:C.func,validation:C.objectOf(C.shape({required:C.bool,requiredMessage:C.string,minLength:C.number,minLengthMessage:C.string,maxLength:C.number,maxLengthMessage:C.string,pattern:C.instanceOf(RegExp),patternMessage:C.string,custom:C.func})),className:C.string,layout:C.oneOf(["vertical","horizontal","inline"]),spacing:C.oneOf(["small","medium","large"]),showSubmitButton:C.bool,submitButtonText:C.string,submitButtonProps:C.object,resetOnSubmit:C.bool,disabled:C.bool};const In=({name:t,children:e,formContext:n,...r})=>{if(!n||!t)return e;const{values:s,errors:i,touched:o,handleFieldChange:l,handleFieldBlur:u,disabled:d}=n;return pn.cloneElement(e,{value:s[t]||"",error:o[t]?i[t]:"",disabled:d,onChange:m=>{const p=m.target?m.target.value:m;l(t,p),e.props.onChange&&e.props.onChange(m)},onBlur:m=>{u(t),e.props.onBlur&&e.props.onBlur(m)}})};In.propTypes={name:C.string.isRequired,children:C.element.isRequired,formContext:C.object};const mc=({children:t,label:e,error:n,helperText:r,required:s=!1,className:i="",direction:o="column",spacing:l="medium",id:u,...d})=>{const h=u||`form-group-${Math.random().toString(36).substr(2,9)}`,m=["form-group",`form-group-${o}`,`form-group-spacing-${l}`,n&&"error",i].filter(Boolean).join(" ");return a.jsxs("div",{className:m,...d,children:[e&&a.jsxs("label",{htmlFor:h,className:"form-group-label",children:[e,s&&a.jsx("span",{className:"required-asterisk",children:"*"})]}),a.jsx("div",{className:"form-group-content",children:t}),n&&a.jsxs("div",{className:"form-group-error",children:[a.jsx("span",{className:"error-icon",children:""}),n]}),r&&!n&&a.jsx("div",{className:"form-group-helper",children:r})]})};mc.propTypes={children:C.node.isRequired,label:C.string,error:C.string,helperText:C.string,required:C.bool,className:C.string,direction:C.oneOf(["row","column"]),spacing:C.oneOf(["small","medium","large"]),id:C.string};const Je=({label:t,value:e,onChange:n,placeholder:r,type:s="text",disabled:i=!1,required:o=!1,error:l,helperText:u,className:d="",size:h="medium",variant:m="outlined",startIcon:p,endIcon:_,maxLength:I,autoComplete:A,autoFocus:b=!1,id:w,name:v,...x})=>{const[k,D]=P.useState(!1),V=P.useRef(null),E=w||`input-${Math.random().toString(36).substr(2,9)}`,y=O=>{D(!0),x.onFocus&&x.onFocus(O)},T=O=>{D(!1),x.onBlur&&x.onBlur(O)},R=O=>{n&&n(O)},j=["text-input-container",`text-input-${m}`,`text-input-${h}`,k&&"focused",i&&"disabled",l&&"error",e&&"has-value",d].filter(Boolean).join(" ");return a.jsxs("div",{className:j,children:[t&&a.jsxs("label",{htmlFor:E,className:"text-input-label",children:[t,o&&a.jsx("span",{className:"required-asterisk",children:"*"})]}),a.jsxs("div",{className:"text-input-wrapper",children:[p&&a.jsx("span",{className:"text-input-icon start-icon",children:p}),a.jsx("input",{ref:V,id:E,name:v,type:s,value:e||"",onChange:R,onFocus:y,onBlur:T,placeholder:r,disabled:i,required:o,maxLength:I,autoComplete:A,autoFocus:b,className:"text-input-field","aria-invalid":!!l,"aria-describedby":l?`${E}-error`:u?`${E}-helper`:void 0,...x}),_&&a.jsx("span",{className:"text-input-icon end-icon",children:_})]}),l&&a.jsxs("div",{id:`${E}-error`,className:"text-input-error",children:[a.jsx("span",{className:"error-icon",children:""}),l]}),u&&!l&&a.jsx("div",{id:`${E}-helper`,className:"text-input-helper",children:u})]})};Je.propTypes={label:C.string,value:C.oneOfType([C.string,C.number]),onChange:C.func,placeholder:C.string,type:C.oneOf(["text","password","email","number","tel","url","search"]),disabled:C.bool,required:C.bool,error:C.string,helperText:C.string,className:C.string,size:C.oneOf(["small","medium","large"]),variant:C.oneOf(["outlined","filled","standard"]),startIcon:C.node,endIcon:C.node,maxLength:C.number,autoComplete:C.string,autoFocus:C.bool,id:C.string,name:C.string,onFocus:C.func,onBlur:C.func};const Ri=({label:t,value:e,onChange:n,options:r=[],placeholder:s="Select an option...",disabled:i=!1,required:o=!1,error:l,helperText:u,className:d="",size:h="medium",variant:m="outlined",searchable:p=!1,multiple:_=!1,id:I,name:A,...b})=>{const[w,v]=P.useState(!1),[x,k]=P.useState(""),[D,V]=P.useState(-1),E=P.useRef(null),y=P.useRef(null),T=P.useRef(null),R=I||`select-${Math.random().toString(36).substr(2,9)}`,j=p?r.filter(H=>{var W,U;return((W=H.label)==null?void 0:W.toLowerCase().includes(x.toLowerCase()))||((U=H.value)==null?void 0:U.toString().toLowerCase().includes(x.toLowerCase()))}):r,O=()=>{if(_&&Array.isArray(e)){if(e.length===0)return"";if(e.length===1){const W=r.find(U=>U.value===e[0]);return W?W.label:e[0]}return`${e.length} items selected`}const H=r.find(W=>W.value===e);return H?H.label:e||""},N=H=>{if(_){const W=Array.isArray(e)?[...e]:[],U=W.indexOf(H);U>=0?W.splice(U,1):W.push(H),n&&n({target:{value:W,name:A}})}else n&&n({target:{value:H,name:A}}),v(!1),k("")},ee=H=>{if(!i)switch(H.key){case"Enter":case" ":H.preventDefault(),w?D>=0&&N(j[D].value):v(!0);break;case"Escape":v(!1),k(""),V(-1);break;case"ArrowDown":H.preventDefault(),w?V(W=>W<j.length-1?W+1:0):v(!0);break;case"ArrowUp":H.preventDefault(),w&&V(W=>W>0?W-1:j.length-1);break}};P.useEffect(()=>{const H=W=>{E.current&&!E.current.contains(W.target)&&(v(!1),k(""),V(-1))};return document.addEventListener("mousedown",H),()=>document.removeEventListener("mousedown",H)},[]),P.useEffect(()=>{V(-1)},[x]);const z=["select-container",`select-${m}`,`select-${h}`,w&&"open",i&&"disabled",l&&"error",d].filter(Boolean).join(" ");return a.jsxs("div",{className:z,ref:E,children:[t&&a.jsxs("label",{htmlFor:R,className:"select-label",children:[t,o&&a.jsx("span",{className:"required-asterisk",children:"*"})]}),a.jsxs("div",{className:"select-control",onClick:()=>!i&&v(!w),onKeyDown:ee,tabIndex:i?-1:0,role:"combobox","aria-expanded":w,"aria-haspopup":"listbox","aria-invalid":!!l,"aria-describedby":l?`${R}-error`:u?`${R}-helper`:void 0,children:[a.jsx("div",{className:"select-value",children:O()||s}),a.jsx("div",{className:"select-arrow",children:a.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),w&&a.jsxs("div",{className:"select-dropdown",ref:y,children:[p&&a.jsx("div",{className:"select-search",children:a.jsx("input",{ref:T,type:"text",value:x,onChange:H=>k(H.target.value),placeholder:"Search options...",className:"select-search-input",autoFocus:!0})}),a.jsx("ul",{className:"select-options",role:"listbox",children:j.length===0?a.jsx("li",{className:"select-option no-options",children:"No options found"}):j.map((H,W)=>{const U=_?Array.isArray(e)&&e.includes(H.value):e===H.value,M=W===D;return a.jsxs("li",{className:`select-option ${U?"selected":""} ${M?"focused":""}`,onClick:()=>N(H.value),role:"option","aria-selected":U,children:[_&&a.jsx("span",{className:`select-checkbox ${U?"checked":""}`,children:U&&""}),a.jsx("span",{className:"select-option-label",children:H.label}),H.description&&a.jsx("span",{className:"select-option-description",children:H.description})]},H.value)})})]}),l&&a.jsxs("div",{id:`${R}-error`,className:"select-error",children:[a.jsx("span",{className:"error-icon",children:""}),l]}),u&&!l&&a.jsx("div",{id:`${R}-helper`,className:"select-helper",children:u})]})};Ri.propTypes={label:C.string,value:C.oneOfType([C.string,C.number,C.array]),onChange:C.func,options:C.arrayOf(C.shape({value:C.oneOfType([C.string,C.number]).isRequired,label:C.string.isRequired,description:C.string})),placeholder:C.string,disabled:C.bool,required:C.bool,error:C.string,helperText:C.string,className:C.string,size:C.oneOf(["small","medium","large"]),variant:C.oneOf(["outlined","filled","standard"]),searchable:C.bool,multiple:C.bool,id:C.string,name:C.string};const gc=({checked:t=!1,onChange:e,label:n,disabled:r=!1,required:s=!1,error:i,helperText:o,className:l="",size:u="medium",variant:d="primary",indeterminate:h=!1,id:m,name:p,value:_,...I})=>{const A=m||`checkbox-${Math.random().toString(36).substr(2,9)}`,b=v=>{e&&e(v)},w=["checkbox-container",`checkbox-${u}`,`checkbox-${d}`,r&&"disabled",i&&"error",l].filter(Boolean).join(" ");return a.jsxs("div",{className:w,children:[a.jsx("div",{className:"checkbox-wrapper",children:a.jsxs("label",{htmlFor:A,className:"checkbox-label",children:[a.jsx("input",{id:A,type:"checkbox",checked:t,onChange:b,disabled:r,required:s,name:p,value:_,className:"checkbox-input","aria-invalid":!!i,"aria-describedby":i?`${A}-error`:o?`${A}-helper`:void 0,...I}),a.jsxs("span",{className:`checkbox-box ${h?"indeterminate":""}`,children:[t&&!h&&a.jsx("svg",{className:"checkbox-check",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),h&&a.jsx("svg",{className:"checkbox-indeterminate",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})]}),n&&a.jsxs("span",{className:"checkbox-text",children:[n,s&&a.jsx("span",{className:"required-asterisk",children:"*"})]})]})}),i&&a.jsxs("div",{id:`${A}-error`,className:"checkbox-error",children:[a.jsx("span",{className:"error-icon",children:""}),i]}),o&&!i&&a.jsx("div",{id:`${A}-helper`,className:"checkbox-helper",children:o})]})};gc.propTypes={checked:C.bool,onChange:C.func,label:C.string,disabled:C.bool,required:C.bool,error:C.string,helperText:C.string,className:C.string,size:C.oneOf(["small","medium","large"]),variant:C.oneOf(["primary","secondary","success","warning","danger"]),indeterminate:C.bool,id:C.string,name:C.string,value:C.oneOfType([C.string,C.number])};const iT=({checked:t=!1,onChange:e,label:n,disabled:r=!1,required:s=!1,error:i,helperText:o,className:l="",size:u="medium",variant:d="primary",id:h,name:m,value:p,..._})=>{const I=h||`radio-${Math.random().toString(36).substr(2,9)}`,A=w=>{e&&e(w)},b=["radio-container",`radio-${u}`,`radio-${d}`,r&&"disabled",i&&"error",l].filter(Boolean).join(" ");return a.jsxs("div",{className:b,children:[a.jsx("div",{className:"radio-wrapper",children:a.jsxs("label",{htmlFor:I,className:"radio-label",children:[a.jsx("input",{id:I,type:"radio",checked:t,onChange:A,disabled:r,required:s,name:m,value:p,className:"radio-input","aria-invalid":!!i,"aria-describedby":i?`${I}-error`:o?`${I}-helper`:void 0,..._}),a.jsx("span",{className:"radio-circle",children:a.jsx("span",{className:"radio-dot"})}),n&&a.jsxs("span",{className:"radio-text",children:[n,s&&a.jsx("span",{className:"required-asterisk",children:"*"})]})]})}),i&&a.jsxs("div",{id:`${I}-error`,className:"radio-error",children:[a.jsx("span",{className:"error-icon",children:""}),i]}),o&&!i&&a.jsx("div",{id:`${I}-helper`,className:"radio-helper",children:o})]})};iT.propTypes={checked:C.bool,onChange:C.func,label:C.string,disabled:C.bool,required:C.bool,error:C.string,helperText:C.string,className:C.string,size:C.oneOf(["small","medium","large"]),variant:C.oneOf(["primary","secondary","success","warning","danger"]),id:C.string,name:C.string.isRequired,value:C.oneOfType([C.string,C.number]).isRequired};const oT=({name:t,value:e,onChange:n,options:r=[],label:s,direction:i="column",error:o,helperText:l,required:u=!1,disabled:d=!1,className:h="",size:m="medium",variant:p="primary"})=>{const _=`radio-group-${Math.random().toString(36).substr(2,9)}`,I=b=>{n&&n(b)},A=["radio-group",`radio-group-${i}`,d&&"disabled",o&&"error",h].filter(Boolean).join(" ");return a.jsxs("div",{className:A,children:[s&&a.jsxs("div",{className:"radio-group-label",children:[s,u&&a.jsx("span",{className:"required-asterisk",children:"*"})]}),a.jsx("div",{className:"radio-group-options",children:r.map((b,w)=>a.jsx(iT,{id:`${_}-${w}`,name:t,value:b.value,label:b.label,checked:e===b.value,onChange:()=>I(b.value),disabled:d||b.disabled,size:m,variant:p},b.value))}),o&&a.jsxs("div",{className:"radio-group-error",children:[a.jsx("span",{className:"error-icon",children:""}),o]}),l&&!o&&a.jsx("div",{className:"radio-group-helper",children:l})]})};oT.propTypes={name:C.string.isRequired,value:C.oneOfType([C.string,C.number]),onChange:C.func,options:C.arrayOf(C.shape({value:C.oneOfType([C.string,C.number]).isRequired,label:C.string.isRequired,disabled:C.bool})),label:C.string,direction:C.oneOf(["row","column"]),error:C.string,helperText:C.string,required:C.bool,disabled:C.bool,className:C.string,size:C.oneOf(["small","medium","large"]),variant:C.oneOf(["primary","secondary","success","warning","danger"])};const jD=()=>{var o;const[t,e]=P.useState("basic"),i=[{id:"basic",title:"Basic Form",component:()=>{const l={name:{required:!0,minLength:2,requiredMessage:"Name is required",minLengthMessage:"Name must be at least 2 characters"},email:{required:!0,pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,requiredMessage:"Email is required",patternMessage:"Please enter a valid email address"},age:{required:!0,custom:d=>{const h=parseInt(d);return isNaN(h)||h<18||h>100?"Age must be between 18 and 100":!0}}},u=async d=>{console.log("Form submitted:",d),alert("Form submitted successfully!")};return a.jsxs(pc,{validation:l,onSubmit:u,submitButtonText:"Submit Basic Form",children:[a.jsx(In,{name:"name",children:a.jsx(Je,{label:"Full Name",placeholder:"Enter your full name",required:!0})}),a.jsx(In,{name:"email",children:a.jsx(Je,{type:"email",label:"Email Address",placeholder:"Enter your email",required:!0})}),a.jsx(In,{name:"age",children:a.jsx(Je,{type:"number",label:"Age",placeholder:"Enter your age",required:!0})})]})}},{id:"advanced",title:"Advanced Form",component:()=>{const[l,u]=P.useState({difficulty:"medium",notifications:!0,learningStyle:"visual"}),d=[{value:"easy",label:"Easy",description:"Basic vocabulary for beginners"},{value:"medium",label:"Medium",description:"Intermediate level words"},{value:"hard",label:"Hard",description:"Advanced SAT vocabulary"}],h=[{value:"visual",label:"Visual Learning"},{value:"auditory",label:"Auditory Learning"},{value:"kinesthetic",label:"Hands-on Learning"}],m={username:{required:!0,minLength:3,pattern:/^[a-zA-Z0-9_]+$/,patternMessage:"Username can only contain letters, numbers, and underscores"},password:{required:!0,minLength:8,custom:_=>/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(_)?!0:"Password must contain at least one uppercase letter, one lowercase letter, and one number"},confirmPassword:{required:!0,custom:(_,I)=>_!==I.password?"Passwords do not match":!0}},p=async _=>{console.log("Advanced form submitted:",_),alert("Registration successful!")};return a.jsxs(pc,{validation:m,onSubmit:p,submitButtonText:"Create Account",layout:"vertical",children:[a.jsxs(mc,{label:"Account Information",children:[a.jsx(In,{name:"username",children:a.jsx(Je,{label:"Username",placeholder:"Choose a username",required:!0,startIcon:""})}),a.jsx(In,{name:"password",children:a.jsx(Je,{type:"password",label:"Password",placeholder:"Create a strong password",required:!0,helperText:"Must be at least 8 characters with uppercase, lowercase, and number"})}),a.jsx(In,{name:"confirmPassword",children:a.jsx(Je,{type:"password",label:"Confirm Password",placeholder:"Confirm your password",required:!0})})]}),a.jsxs(mc,{label:"Learning Preferences",children:[a.jsx(In,{name:"difficulty",children:a.jsx(Ri,{label:"Difficulty Level",options:d,searchable:!0,helperText:"Choose your preferred difficulty level"})}),a.jsx(oT,{name:"learningStyle",label:"Learning Style",options:h,value:l.learningStyle,onChange:_=>u(I=>({...I,learningStyle:_})),direction:"column"})]}),a.jsxs(mc,{label:"Notifications",children:[a.jsx(gc,{label:"Email notifications",checked:l.notifications,onChange:_=>u(I=>({...I,notifications:_.target.checked})),helperText:"Receive updates about your learning progress"}),a.jsx(gc,{label:"SMS reminders",helperText:"Get text reminders for your daily learning goals"}),a.jsx(gc,{label:"Weekly progress reports",helperText:"Receive detailed progress summaries every week"})]})]})}},{id:"inline",title:"Inline Form",component:()=>a.jsxs(pc,{layout:"inline",submitButtonText:"Search",children:[a.jsx(In,{name:"search",children:a.jsx(Je,{placeholder:"Search vocabulary...",startIcon:""})}),a.jsx(In,{name:"category",children:a.jsx(Ri,{placeholder:"Category",options:[{value:"all",label:"All Categories"},{value:"nouns",label:"Nouns"},{value:"verbs",label:"Verbs"},{value:"adjectives",label:"Adjectives"}]})})]})}];return a.jsxs("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto"},children:[a.jsx("h1",{children:"Form Components Demo"}),a.jsx("div",{style:{marginBottom:"2rem"},children:a.jsx("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem"},children:i.map(l=>a.jsx(le,{variant:t===l.id?"primary":"secondary",onClick:()=>e(l.id),children:l.title},l.id))})}),a.jsx("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"8px",border:"1px solid #e9ecef"},children:(o=i.find(l=>l.id===t))==null?void 0:o.component()}),a.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"#f0f9ff",borderRadius:"8px"},children:[a.jsx("h3",{children:"Form Components Features:"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"TextInput:"})," Various types, validation, icons, sizes"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Select:"})," Searchable, multiple selection, custom options"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Checkbox:"})," Individual or groups, indeterminate state"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"RadioButton:"})," Single or group selection"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"FormGroup:"})," Organized field grouping with labels"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Form:"})," Complete validation, submission handling"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Responsive:"})," Adapts to different screen sizes"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Accessible:"})," ARIA labels, keyboard navigation"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Dark Mode:"})," Automatic theme support"]})]})]})]})};const Hm=({isOpen:t,onClose:e,title:n,children:r,size:s="medium",closeOnOverlayClick:i=!0,showCloseButton:o=!0,footer:l})=>{if(P.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),P.useEffect(()=>{const d=h=>{h.key==="Escape"&&t&&e()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[t,e]),!t)return null;const u=d=>{d.target===d.currentTarget&&i&&e()};return a.jsx("div",{className:"modal-overlay",onClick:u,children:a.jsxs("div",{className:`modal ${s}`,role:"dialog","aria-modal":"true",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{className:"modal-title",children:n}),o&&a.jsx("button",{className:"modal-close",onClick:e,"aria-label":"Close modal",children:""})]}),a.jsx("div",{className:"modal-body",children:r}),l&&a.jsx("div",{className:"modal-footer",children:l})]})})};Hm.propTypes={isOpen:C.bool.isRequired,onClose:C.func.isRequired,title:C.string.isRequired,children:C.node.isRequired,size:C.oneOf(["small","medium","large"]),closeOnOverlayClick:C.bool,showCloseButton:C.bool,footer:C.node};const aT=({value:t=0,max:e=100,showLabel:n=!0,label:r,color:s="#007bff",backgroundColor:i="#e9ecef",height:o="medium",animated:l=!1,className:u=""})=>{const d=Math.min(Math.max(t/e*100,0),100),h=["progress-bar",`progress-${o}`,l&&"progress-animated",u].filter(Boolean).join(" ");return a.jsxs("div",{className:h,children:[n&&a.jsxs("div",{className:"progress-label",children:[a.jsx("span",{children:r||`${Math.round(d)}%`}),a.jsxs("span",{className:"progress-fraction",children:[t,"/",e]})]}),a.jsx("div",{className:"progress-track",style:{backgroundColor:i},children:a.jsx("div",{className:"progress-fill",style:{width:`${d}%`,backgroundColor:s},children:l&&a.jsx("div",{className:"progress-shine"})})})]})};aT.propTypes={value:C.number.isRequired,max:C.number,showLabel:C.bool,label:C.string,color:C.string,backgroundColor:C.string,height:C.oneOf(["small","medium","large"]),animated:C.bool,className:C.string};const Ho=({title:t,description:e,icon:n,earned:r=!1,rarity:s="common",progress:i=0,maxProgress:o=100,showProgress:l=!1,size:u="medium",animated:d=!1,className:h="",onClick:m,...p})=>{const _=["achievement-badge",`badge-${s}`,`badge-${u}`,r&&"badge-earned",!r&&"badge-locked",d&&"badge-animated",m&&"badge-clickable",h].filter(Boolean).join(" "),I=Math.min(i/o*100,100);return a.jsx("div",{className:_,onClick:m,role:m?"button":void 0,tabIndex:m?0:void 0,...p,children:a.jsxs("div",{className:"badge-container",children:[a.jsxs("div",{className:"badge-icon-wrapper",children:[a.jsx("div",{className:"badge-icon",children:n||""}),r&&a.jsx("div",{className:"badge-shine"})]}),a.jsxs("div",{className:"badge-content",children:[a.jsx("h3",{className:"badge-title",children:t}),e&&a.jsx("p",{className:"badge-description",children:e}),l&&!r&&a.jsxs("div",{className:"badge-progress",children:[a.jsx("div",{className:"badge-progress-bar",children:a.jsx("div",{className:"badge-progress-fill",style:{width:`${I}%`}})}),a.jsxs("span",{className:"badge-progress-text",children:[i,"/",o]})]})]}),a.jsx("div",{className:"badge-rarity-indicator",children:a.jsx("span",{className:"badge-rarity-text",children:s})}),!r&&a.jsx("div",{className:"badge-lock-overlay",children:a.jsx("div",{className:"badge-lock-icon",children:""})})]})})};Ho.propTypes={title:C.string.isRequired,description:C.string,icon:C.node,earned:C.bool,rarity:C.oneOf(["common","rare","epic","legendary"]),progress:C.number,maxProgress:C.number,showProgress:C.bool,size:C.oneOf(["small","medium","large"]),animated:C.bool,className:C.string,onClick:C.func};const lT=({currentPoints:t=0,totalPoints:e=0,level:n=1,nextLevelPoints:r=100,showLevel:s=!0,showProgress:i=!0,animated:o=!1,variant:l="default",size:u="medium",className:d="",...h})=>{const m=r-t,p=Math.min(t/r*100,100),_=["points-display",`points-${l}`,`points-${u}`,o&&"points-animated",d].filter(Boolean).join(" "),I=A=>A>=1e6?`${(A/1e6).toFixed(1)}M`:A>=1e3?`${(A/1e3).toFixed(1)}K`:A.toString();return a.jsxs("div",{className:_,...h,children:[a.jsxs("div",{className:"points-main",children:[a.jsx("div",{className:"points-icon",children:""}),a.jsxs("div",{className:"points-info",children:[a.jsxs("div",{className:"points-current",children:[a.jsx("span",{className:"points-number",children:I(t)}),a.jsx("span",{className:"points-label",children:"Points"})]}),e>0&&a.jsxs("div",{className:"points-total",children:["Total: ",I(e)]})]})]}),s&&a.jsxs("div",{className:"points-level",children:[a.jsx("div",{className:"level-badge",children:a.jsxs("span",{className:"level-number",children:["Lv.",n]})}),m>0&&a.jsxs("div",{className:"level-next",children:[I(m)," to next level"]})]}),i&&m>0&&a.jsxs("div",{className:"points-progress",children:[a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill",style:{width:`${p}%`},children:a.jsx("div",{className:"progress-shine"})})}),a.jsxs("div",{className:"progress-text",children:[t," / ",r," XP"]})]})]})};lT.propTypes={currentPoints:C.number,totalPoints:C.number,level:C.number,nextLevelPoints:C.number,showLevel:C.bool,showProgress:C.bool,animated:C.bool,variant:C.oneOf(["default","compact","detailed"]),size:C.oneOf(["small","medium","large"]),className:C.string};const cT=({users:t=[],currentUserId:e=null,showRank:n=!0,showAvatar:r=!0,showPoints:s=!0,showLevel:i=!0,maxEntries:o=10,highlightCurrent:l=!0,variant:u="default",size:d="medium",className:h="",onUserClick:m,...p})=>{const[_,I]=P.useState("all"),A=["leaderboard",`leaderboard-${u}`,`leaderboard-${d}`,h].filter(Boolean).join(" "),b=t.sort((k,D)=>D.points-k.points).slice(0,o),w=k=>{switch(k){case 1:return"";case 2:return"";case 3:return"";default:return null}},v=k=>k>=1e6?`${(k/1e6).toFixed(1)}M`:k>=1e3?`${(k/1e3).toFixed(1)}K`:k.toLocaleString(),x=k=>{var D;return k.avatar?a.jsx("img",{src:k.avatar,alt:k.name,className:"user-avatar-img"}):a.jsx("div",{className:"user-avatar-placeholder",children:((D=k.name)==null?void 0:D.charAt(0))||""})};return a.jsxs("div",{className:A,...p,children:[a.jsxs("div",{className:"leaderboard-header",children:[a.jsx("h3",{className:"leaderboard-title",children:" Leaderboard"}),a.jsxs("div",{className:"leaderboard-filters",children:[a.jsx("button",{className:`filter-btn ${_==="all"?"active":""}`,onClick:()=>I("all"),children:"All Time"}),a.jsx("button",{className:`filter-btn ${_==="weekly"?"active":""}`,onClick:()=>I("weekly"),children:"This Week"}),a.jsx("button",{className:`filter-btn ${_==="monthly"?"active":""}`,onClick:()=>I("monthly"),children:"This Month"})]})]}),a.jsx("div",{className:"leaderboard-list",children:b.map((k,D)=>{const V=D+1,E=k.id===e,y=w(V),T=["leaderboard-entry",E&&l&&"entry-current",V<=3&&"entry-top-three",m&&"entry-clickable"].filter(Boolean).join(" ");return a.jsxs("div",{className:T,onClick:()=>m&&m(k),children:[n&&a.jsx("div",{className:"entry-rank",children:y?a.jsx("span",{className:"rank-icon",children:y}):a.jsxs("span",{className:"rank-number",children:["#",V]})}),r&&a.jsx("div",{className:"entry-avatar",children:x(k)}),a.jsxs("div",{className:"entry-info",children:[a.jsxs("div",{className:"entry-name",children:[k.name,E&&a.jsx("span",{className:"you-badge",children:"You"})]}),k.title&&a.jsx("div",{className:"entry-title",children:k.title})]}),a.jsxs("div",{className:"entry-stats",children:[i&&k.level&&a.jsxs("div",{className:"entry-level",children:["Lv. ",k.level]}),s&&a.jsx("div",{className:"entry-points",children:v(k.points)})]})]},k.id)})}),b.length===0&&a.jsxs("div",{className:"leaderboard-empty",children:[a.jsx("div",{className:"empty-icon",children:""}),a.jsx("div",{className:"empty-message",children:"No users to display"})]})]})};cT.propTypes={users:C.arrayOf(C.shape({id:C.oneOfType([C.string,C.number]).isRequired,name:C.string.isRequired,points:C.number.isRequired,level:C.number,avatar:C.string,title:C.string})),currentUserId:C.oneOfType([C.string,C.number]),showRank:C.bool,showAvatar:C.bool,showPoints:C.bool,showLevel:C.bool,maxEntries:C.number,highlightCurrent:C.bool,variant:C.oneOf(["default","compact","detailed"]),size:C.oneOf(["small","medium","large"]),className:C.string,onUserClick:C.func};const uT=({currentLevel:t=1,currentXP:e=0,nextLevelXP:n=100,showProgress:r=!0,showNumbers:s=!0,variant:i="default",size:o="medium",animated:l=!1,className:u="",...d})=>{const h=Math.min(e/n*100,100),m=n-e,p=["level-indicator",`level-${i}`,`level-${o}`,l&&"level-animated",u].filter(Boolean).join(" "),_=b=>b<5?"#28a745":b<10?"#17a2b8":b<20?"#6f42c1":b<30?"#e83e8c":b<50?"#fd7e14":"#dc3545",I=b=>b<5?"Beginner":b<10?"Learner":b<20?"Student":b<30?"Scholar":b<50?"Expert":"Master",A=b=>b>=1e6?`${(b/1e6).toFixed(1)}M`:b>=1e3?`${(b/1e3).toFixed(1)}K`:b.toString();return a.jsxs("div",{className:p,...d,children:[a.jsxs("div",{className:"level-badge",style:{backgroundColor:_(t),boxShadow:`0 0 20px ${_(t)}40`},children:[a.jsx("div",{className:"level-number",children:t}),a.jsx("div",{className:"level-title",children:I(t)})]}),r&&a.jsxs("div",{className:"level-progress",children:[a.jsxs("div",{className:"progress-container",children:[a.jsx("div",{className:"progress-track",children:a.jsx("div",{className:"progress-bar",style:{width:`${h}%`,backgroundColor:_(t)},children:a.jsx("div",{className:"progress-glow"})})}),s&&a.jsxs("div",{className:"progress-labels",children:[a.jsx("span",{className:"current-xp",children:A(e)}),a.jsx("span",{className:"next-level-xp",children:A(n)})]})]}),s&&a.jsxs("div",{className:"xp-info",children:[a.jsxs("div",{className:"xp-remaining",children:[A(m)," XP to next level"]}),a.jsxs("div",{className:"xp-percentage",children:[Math.round(h),"% complete"]})]})]})]})};uT.propTypes={currentLevel:C.number,currentXP:C.number,nextLevelXP:C.number,showProgress:C.bool,showNumbers:C.bool,variant:C.oneOf(["default","compact","minimal"]),size:C.oneOf(["small","medium","large"]),animated:C.bool,className:C.string};const dT=({isVisible:t=!1,type:e="points",value:n=0,message:r="",duration:s=3e3,onComplete:i,className:o="",...l})=>{const[u,d]=P.useState(!1),[h,m]=P.useState(!1);P.useEffect(()=>{if(t){d(!0),(e==="levelUp"||n>=100)&&m(!0);const b=setTimeout(()=>{d(!1),m(!1),i&&i()},s);return()=>clearTimeout(b)}},[t,s,i,e,n]);const p=()=>{switch(e){case"points":return"";case"badge":return"";case"levelUp":return"";case"streak":return"";case"achievement":return"";default:return""}},_=()=>{switch(e){case"points":return"#ffd700";case"badge":return"#ff6b35";case"levelUp":return"#6c5ce7";case"streak":return"#fd79a8";case"achievement":return"#00b894";default:return"#74b9ff"}},I=b=>e==="points"&&b>=1e3?`+${(b/1e3).toFixed(1)}K`:e==="points"?`+${b}`:b;if(!t&&!u)return null;const A=["reward-animation",`reward-${e}`,u&&"reward-active",o].filter(Boolean).join(" ");return a.jsxs("div",{className:A,...l,children:[h&&a.jsx("div",{className:"fireworks-container",children:[...Array(6)].map((b,w)=>a.jsx("div",{className:`firework firework-${w+1}`,children:[...Array(8)].map((v,x)=>a.jsx("div",{className:"firework-spark"},x))},w))}),a.jsxs("div",{className:"reward-main",style:{color:_()},children:[a.jsx("div",{className:"reward-icon",children:p()}),n>0&&a.jsx("div",{className:"reward-value",children:I(n)}),r&&a.jsx("div",{className:"reward-message",children:r}),a.jsx("div",{className:"particles-container",children:[...Array(12)].map((b,w)=>a.jsx("div",{className:"particle",style:{"--delay":`${w*.1}s`,"--angle":`${w*30}deg`,backgroundColor:_()}},w))}),a.jsx("div",{className:"reward-shine"})]}),a.jsx("div",{className:"reward-overlay"})]})};dT.propTypes={isVisible:C.bool,type:C.oneOf(["points","badge","levelUp","streak","achievement"]),value:C.oneOfType([C.number,C.string]),message:C.string,duration:C.number,onComplete:C.func,className:C.string};const OD=()=>{const[t,e]=P.useState(!1),[n,r]=P.useState(!1),[s,i]=P.useState(null),[o,l]=P.useState(!1),[u,d]=P.useState("points"),[h,m]=P.useState(0),p=Fn(),_=$s();P.useEffect(()=>{(async()=>{try{const D=await hn.getRandomWords(1,"medium");D.length>0&&i(D[0])}catch(D){console.error("Error loading random word:",D)}})()},[]);const I=()=>{r(!0),_(_e.setLoading(!0)),setTimeout(()=>{r(!1),_(_e.setLoading(!1)),e(!0)},2e3)},A=k=>{if(console.log(`Playing pronunciation for: ${k}`),_(_e.setNotification({type:"info",message:`Playing pronunciation for: ${k}`})),"speechSynthesis"in window){const D=new SpeechSynthesisUtterance(k);D.rate=.8,D.pitch=1,window.speechSynthesis.speak(D)}},b=k=>{_(_e.markWordKnown(k)),_(_e.setNotification({type:"success",message:`Great! "${k}" added to known words! `})),s&&s.word===k&&hn.updateWordProgress(s.id,{studied:!0,correctRate:1})},w=k=>{_(_e.markWordUnknown(k)),_(_e.setNotification({type:"info",message:`"${k}" added to study list `})),s&&s.word===k&&hn.updateWordProgress(s.id,{studied:!0,correctRate:0})},v=async()=>{try{const k=await hn.getRandomWords(1);k.length>0&&i(k[0])}catch(k){console.error("Error loading new word:",k)}},x=k=>{var D,V;return k?{word:k.word,pronunciation:k.pronunciation,definition:((D=k.definitions[0])==null?void 0:D.definition)||"No definition available",example:((V=k.examples[0])==null?void 0:V.sentence)||"No example available",difficulty:k.difficulty}:null};return a.jsxs("div",{className:"home-page",children:[a.jsxs("div",{className:"hero-section",children:[a.jsx("h1",{children:"Vocabulary Learning App"}),a.jsx("p",{children:"Master SAT vocabulary with our comprehensive learning platform"}),a.jsxs("div",{className:"progress-demo",children:[a.jsx("h3",{children:"Your Progress"}),a.jsx(aT,{value:p.learning.totalWordsLearned,max:500,label:"Words Learned",animated:!0}),a.jsxs("div",{className:"progress-stats",children:[a.jsxs("p",{children:["Today: ",p.learning.todayProgress,"/",p.learning.dailyGoal]}),a.jsxs("p",{children:["Level: ",p.learning.currentLevel]})]})]}),a.jsxs("div",{className:"sample-card",children:[a.jsx("h3",{children:"Try Our Interactive Cards"}),s?a.jsx(sT,{...x(s),onAudioPlay:A,onMarkKnown:b,onMarkUnknown:w}):a.jsx(Wi,{text:"Loading vocabulary word..."}),a.jsx("div",{className:"word-actions",children:a.jsx(le,{variant:"secondary",size:"small",onClick:v,children:"Try Another Word"})})]}),a.jsxs("div",{className:"sample-card",children:[a.jsx("h3",{children:" Advanced Audio Player"}),a.jsx("p",{children:"Experience our full-featured pronunciation system with TTS support, playback controls, and interactive waveforms."}),s&&a.jsx(qm,{word:s.word,showControls:!0,showWaveform:!0,onPlay:()=>console.log(`Playing: ${s.word}`),onPause:()=>console.log(`Paused: ${s.word}`),onEnd:()=>console.log(`Finished: ${s.word}`)})]}),a.jsxs("div",{className:"sample-card",children:[a.jsx("h3",{children:" Complete Form System"}),a.jsx("p",{children:"Explore our comprehensive form components with validation, accessibility, and responsive design."}),a.jsx(jD,{})]}),a.jsxs("div",{className:"features-preview",children:[a.jsxs("div",{className:"feature-card",children:[a.jsxs("h3",{children:[" ",p.vocabulary.totalWords||"3000+","+ Words"]}),a.jsx("p",{children:"Comprehensive SAT vocabulary database"})]}),a.jsxs("div",{className:"feature-card",children:[a.jsx("h3",{children:" Personalized Learning"}),a.jsx("p",{children:"Adaptive learning paths based on your progress"})]}),a.jsxs("div",{className:"feature-card",children:[a.jsx("h3",{children:" Offline Support"}),a.jsx("p",{children:"Study anywhere, even without internet"})]})]}),a.jsxs("div",{className:"cta-buttons",children:[a.jsx(le,{variant:"primary",size:"large",loading:n,onClick:I,children:"Get Started"}),a.jsx(le,{variant:"secondary",size:"large",children:"Browse Vocabulary"})]}),a.jsxs("div",{className:"learning-stats",children:[a.jsxs("div",{className:"stat",children:[a.jsx("span",{className:"stat-number",children:p.vocabulary.knownWords.length}),a.jsx("span",{className:"stat-label",children:"Words Known"})]}),a.jsxs("div",{className:"stat",children:[a.jsx("span",{className:"stat-number",children:p.vocabulary.unknownWords.length}),a.jsx("span",{className:"stat-label",children:"To Study"})]}),a.jsxs("div",{className:"stat",children:[a.jsx("span",{className:"stat-number",children:p.learning.streakDays}),a.jsx("span",{className:"stat-label",children:"Day Streak"})]})]})]}),a.jsxs("div",{className:"demo-section gamification-demo",children:[a.jsx("h2",{className:"section-title",children:" Gamification Features"}),a.jsxs("div",{className:"demo-subsection",children:[a.jsx("h3",{children:" Achievement Badges"}),a.jsxs("div",{className:"badges-grid",children:[a.jsx(Ho,{title:"First Steps",description:"Complete your first vocabulary quiz",icon:"",earned:!0,rarity:"common",animated:!0}),a.jsx(Ho,{title:"Word Master",description:"Learn 100 vocabulary words",icon:"",earned:!1,rarity:"rare",progress:75,maxProgress:100,showProgress:!0}),a.jsx(Ho,{title:"Streak Legend",description:"Maintain a 30-day learning streak",icon:"",earned:!0,rarity:"epic",size:"large"}),a.jsx(Ho,{title:"Grammar Guru",description:"Perfect score on advanced grammar test",icon:"",earned:!1,rarity:"legendary",progress:5,maxProgress:10,showProgress:!0})]})]}),a.jsxs("div",{className:"demo-subsection",children:[a.jsx("h3",{children:" Points & Level System"}),a.jsxs("div",{className:"points-level-container",children:[a.jsx(lT,{currentPoints:2450,totalPoints:12890,level:8,nextLevelPoints:2800,animated:!0,variant:"detailed"}),a.jsx(uT,{currentLevel:8,currentXP:2450,nextLevelXP:2800,animated:!0,size:"large"})]})]}),a.jsxs("div",{className:"demo-subsection",children:[a.jsx("h3",{children:" Leaderboard"}),a.jsx(cT,{users:[{id:1,name:"Sarah Chen",points:15420,level:12,avatar:null,title:"Vocabulary Master"},{id:2,name:"Alex Johnson",points:12890,level:10,avatar:null,title:"Grammar Expert"},{id:3,name:"You",points:8650,level:8,avatar:null,title:"Rising Star"},{id:4,name:"Maria Garcia",points:7200,level:7,avatar:null,title:"Word Explorer"},{id:5,name:"David Kim",points:6800,level:6,avatar:null,title:"Language Learner"},{id:6,name:"Emma Wilson",points:5900,level:6,avatar:null,title:"Dedicated Student"}],currentUserId:3,maxEntries:6,variant:"detailed"})]}),a.jsxs("div",{className:"demo-subsection",children:[a.jsx("h3",{children:" Reward Animations"}),a.jsxs("div",{className:"reward-demo-buttons",children:[a.jsx(le,{variant:"success",onClick:()=>{d("points"),m(50),l(!0)},children:"+50 Points"}),a.jsx(le,{variant:"info",onClick:()=>{d("badge"),m(0),l(!0)},children:"New Badge"}),a.jsx(le,{variant:"warning",onClick:()=>{d("levelUp"),m(9),l(!0)},children:"Level Up!"}),a.jsx(le,{variant:"danger",onClick:()=>{d("streak"),m(7),l(!0)},children:"Streak Bonus"})]})]})]}),a.jsxs(Hm,{isOpen:t,onClose:()=>e(!1),title:"Welcome to Vocabulary Learning!",footer:a.jsxs(a.Fragment,{children:[a.jsx(le,{variant:"secondary",onClick:()=>e(!1),children:"Maybe Later"}),a.jsx(le,{variant:"primary",onClick:()=>{e(!1),window.location.href="/quiz"},children:"Start Learning"})]}),children:[a.jsx("p",{children:"Ready to start your vocabulary learning journey?"}),a.jsx("p",{children:"We'll begin with a personalized quiz to assess your current level and create a custom learning plan just for you."}),a.jsxs("div",{className:"modal-stats",children:[a.jsxs("p",{children:[a.jsx("strong",{children:" Your Goal:"})," ",p.learning.dailyGoal," words per day"]}),a.jsxs("p",{children:[a.jsx("strong",{children:" Current Level:"})," ",p.learning.currentLevel]}),a.jsxs("p",{children:[a.jsx("strong",{children:" Streak:"})," ",p.learning.streakDays," days"]})]})]}),n&&a.jsx(Wi,{text:"Setting up your personalized learning experience...",fullScreen:!0}),a.jsx(dT,{isVisible:o,type:u,value:h,message:u==="levelUp"?`Level ${h} Reached!`:u==="badge"?"New Achievement Unlocked!":u==="streak"?`${h} Day Streak!`:"Great Job!",onComplete:()=>l(!1)})]})},DD=()=>a.jsxs("div",{className:"dashboard-page",children:[a.jsx("h1",{children:"Learning Dashboard"}),a.jsx("p",{children:"Track your vocabulary learning progress"})]});const hT=({question:t,options:e,correctAnswer:n,onAnswer:r,showResult:s=!1,disabled:i=!1,timeLimit:o,onTimeUp:l})=>{const[u,d]=P.useState(null),[h,m]=P.useState(!1),[p,_]=P.useState(o);pn.useEffect(()=>{if(o&&p>0&&!h){const v=setTimeout(()=>{_(p-1)},1e3);return()=>clearTimeout(v)}else p===0&&!h&&I()},[p,h,o]);const I=()=>{m(!0),l&&l()},A=v=>{i||h||d(v)},b=()=>{if(u===null||h)return;m(!0),r&&r({selectedOption:u,correctAnswer:n,isCorrect:u===n,timeTaken:o?o-p:null})},w=v=>{const x="quiz-option";return!s&&!h?`${x} ${u===v?"selected":""}`:s||h?v===n?`${x} correct`:v===u&&v!==n?`${x} incorrect`:`${x} ${u===v?"selected":""}`:x};return a.jsxs("div",{className:"quiz-question multiple-choice",children:[o&&a.jsx("div",{className:"timer",children:a.jsxs("span",{className:`time-left ${p<=10?"warning":""}`,children:[p,"s"]})}),a.jsx("h3",{className:"question-text",children:t}),a.jsx("div",{className:"options-container",children:e.map((v,x)=>a.jsxs("button",{className:w(x),onClick:()=>A(x),disabled:i||h,children:[a.jsxs("span",{className:"option-letter",children:[String.fromCharCode(65+x),"."]}),a.jsx("span",{className:"option-text",children:v}),(s||h)&&x===n&&a.jsx("span",{className:"check-mark",children:""}),(s||h)&&x===u&&x!==n&&a.jsx("span",{className:"x-mark",children:""})]},x))}),!h&&u!==null&&a.jsx("div",{className:"submit-container",children:a.jsx(le,{variant:"primary",onClick:b,disabled:i,children:"Submit Answer"})}),(s||h)&&a.jsx("div",{className:"result-feedback",children:a.jsx("p",{className:`feedback ${u===n?"correct":"incorrect"}`,children:u===n?" Correct! Well done!":` Incorrect. The correct answer is ${String.fromCharCode(65+n)}.`})})]})};hT.propTypes={question:C.string.isRequired,options:C.arrayOf(C.string).isRequired,correctAnswer:C.number.isRequired,onAnswer:C.func,showResult:C.bool,disabled:C.bool,timeLimit:C.number,onTimeUp:C.func};const fT=({question:t,correctAnswers:e,onAnswer:n,showResult:r=!1,disabled:s=!1,placeholder:i="Type your answer here...",caseSensitive:o=!1,timeLimit:l,onTimeUp:u})=>{const[d,h]=P.useState(""),[m,p]=P.useState(!1),[_,I]=P.useState(l);pn.useEffect(()=>{if(l&&_>0&&!m){const k=setTimeout(()=>{I(_-1)},1e3);return()=>clearTimeout(k)}else _===0&&!m&&A()},[_,m,l]);const A=()=>{p(!0),u&&u()},b=k=>{const D=o?k.trim():k.trim().toLowerCase();return(o?e.map(E=>E.trim()):e.map(E=>E.trim().toLowerCase())).includes(D)},w=()=>{if(!d.trim()||m)return;p(!0);const k=b(d);n&&n({userAnswer:d.trim(),correctAnswers:e,isCorrect:k,timeTaken:l?l-_:null})},v=k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),w())},x=()=>{let k="answer-input";if(r||m){const D=b(d);k+=D?" correct":" incorrect"}return k};return a.jsxs("div",{className:"quiz-question short-answer",children:[l&&a.jsx("div",{className:"timer",children:a.jsxs("span",{className:`time-left ${_<=10?"warning":""}`,children:[_,"s"]})}),a.jsx("h3",{className:"question-text",children:t}),a.jsx("div",{className:"answer-container",children:a.jsx("input",{type:"text",className:x(),value:d,onChange:k=>h(k.target.value),onKeyPress:v,placeholder:i,disabled:s||m,autoFocus:!0})}),!m&&d.trim()&&a.jsx("div",{className:"submit-container",children:a.jsx(le,{variant:"primary",onClick:w,disabled:s,children:"Submit Answer"})}),(r||m)&&a.jsx("div",{className:"result-feedback",children:a.jsx("p",{className:`feedback ${b(d)?"correct":"incorrect"}`,children:b(d)?" Correct! Well done!":` Incorrect. Correct answer${e.length>1?"s":""}: ${e.join(", ")}`})})]})};fT.propTypes={question:C.string.isRequired,correctAnswers:C.arrayOf(C.string).isRequired,onAnswer:C.func,showResult:C.bool,disabled:C.bool,placeholder:C.string,caseSensitive:C.bool,timeLimit:C.number,onTimeUp:C.func};const pT=({question:t,correctAnswer:e,explanation:n,onAnswer:r,showResult:s=!1,disabled:i=!1,timeLimit:o,onTimeUp:l})=>{const[u,d]=P.useState(null),[h,m]=P.useState(!1),[p,_]=P.useState(o);pn.useEffect(()=>{if(o&&p>0&&!h){const w=setTimeout(()=>{_(p-1)},1e3);return()=>clearTimeout(w)}else p===0&&!h&&I()},[p,h,o]);const I=()=>{m(!0),l&&l()},A=w=>{if(i||h)return;d(w),m(!0),r&&r({selectedAnswer:w,correctAnswer:e,isCorrect:w===e,timeTaken:o?o-p:null})},b=w=>{const v="quiz-option";return!s&&!h?`${v} ${u===w?"selected":""}`:s||h?w===e?`${v} correct`:w===u&&w!==e?`${v} incorrect`:`${v} ${u===w?"selected":""}`:v};return a.jsxs("div",{className:"quiz-question true-false",children:[o&&a.jsx("div",{className:"timer",children:a.jsxs("span",{className:`time-left ${p<=10?"warning":""}`,children:[p,"s"]})}),a.jsx("h3",{className:"question-text",children:t}),a.jsxs("div",{className:"options-container",children:[a.jsxs("button",{className:b(!0),onClick:()=>A(!0),disabled:i||h,children:[a.jsx("span",{className:"option-text",children:"TRUE"}),(s||h)&&e===!0&&a.jsx("span",{className:"check-mark",children:""}),(s||h)&&u===!0&&e!==!0&&a.jsx("span",{className:"x-mark",children:""})]}),a.jsxs("button",{className:b(!1),onClick:()=>A(!1),disabled:i||h,children:[a.jsx("span",{className:"option-text",children:"FALSE"}),(s||h)&&e===!1&&a.jsx("span",{className:"check-mark",children:""}),(s||h)&&u===!1&&e!==!1&&a.jsx("span",{className:"x-mark",children:""})]})]}),(s||h)&&a.jsxs("div",{className:"result-feedback",children:[a.jsx("p",{className:`feedback ${u===e?"correct":"incorrect"}`,children:u===e?" Correct! Well done!":` Incorrect. The correct answer is ${e?"TRUE":"FALSE"}.`}),n&&a.jsxs("p",{className:"explanation",children:[a.jsx("strong",{children:"Explanation:"})," ",n]})]})]})};pT.propTypes={question:C.string.isRequired,correctAnswer:C.bool.isRequired,explanation:C.string,onAnswer:C.func,showResult:C.bool,disabled:C.bool,timeLimit:C.number,onTimeUp:C.func};const LD=()=>{var V,E;const[t,e]=P.useState(0),[n,r]=P.useState(0),[s,i]=P.useState(!1),[o,l]=P.useState([]),[u,d]=P.useState(!0),[h,m]=P.useState(null),p=Fn(),_=$s();P.useEffect(()=>{(async()=>{try{d(!0);const T=p.user.preferences.difficulty,R=await hn.getQuizWords(5,T);if(R.length===0)throw new Error("No words available for quiz");const j=[];for(let O=0;O<R.length;O++){const N=R[O];switch(I()){case"multiple-choice":j.push(await A(N));break;case"true-false":j.push(b(N));break;case"short-answer":j.push(w(N));break;default:j.push(await A(N))}}l(j),d(!1)}catch(T){m(T.message),d(!1)}})()},[p.user.preferences.difficulty]);const I=()=>{const y=["multiple-choice","true-false","short-answer"];return y[Math.floor(Math.random()*y.length)]},A=async y=>{var z;const T=await hn.getRelatedWords(y.id,3),R=((z=y.definitions[0])==null?void 0:z.definition)||"No definition available",j=[R];T.forEach(H=>{j.length<4&&H.definitions[0]&&j.push(H.definitions[0].definition)});const O=["A type of mathematical equation","A scientific measurement tool","A historical period in ancient Rome","A genre of classical music"];for(;j.length<4;){const H=O[Math.floor(Math.random()*O.length)];j.includes(H)||j.push(H)}const N=[...j].sort(()=>Math.random()-.5),ee=N.indexOf(R);return{type:"multiple-choice",question:`What does the word "${y.word}" mean?`,options:N,correctAnswer:ee,word:y.word,wordData:y}},b=y=>{var N;const T=((N=y.definitions[0])==null?void 0:N.definition)||"No definition available",R=Math.random()>.5;let j,O;if(R)j=`The word "${y.word}" means: ${T}`,O=!0;else{const ee=[`The word "${y.word}" means: A type of ancient weapon used in medieval times.`,`The word "${y.word}" means: A mathematical formula for calculating area.`,`The word "${y.word}" means: A style of architecture from the Renaissance period.`,`The word "${y.word}" means: A cooking technique originating from France.`];j=ee[Math.floor(Math.random()*ee.length)],O=!1}return{type:"true-false",question:j,correctAnswer:O,explanation:`The correct definition of "${y.word}" is: ${T}`,word:y.word,wordData:y}},w=y=>{var j,O;const T=((j=y.definitions[0])==null?void 0:j.definition)||"No definition available",R=[y.word.toLowerCase()];return(O=y.definitions[0])!=null&&O.synonyms&&R.push(...y.definitions[0].synonyms.map(N=>N.toLowerCase())),{type:"short-answer",question:`What word means: "${T}"?`,correctAnswers:R,caseSensitive:!1,word:y.word,wordData:y}},v=async y=>{const T=o[t];if(y.isCorrect?(r(n+1),_(_e.markWordKnown(T.word)),_(_e.setNotification({type:"success",message:"Correct! +1 point "}))):(_(_e.markWordUnknown(T.word)),_(_e.setNotification({type:"info",message:`Study this word: ${T.word}`}))),T.wordData)try{await hn.updateWordProgress(T.wordData.id,{studied:!0,correctRate:y.isCorrect?1:0})}catch(R){console.error("Error updating word progress:",R)}setTimeout(()=>{t<o.length-1?e(t+1):(i(!0),_(_e.updateProgress({todayProgress:p.learning.todayProgress+1})))},2e3)},x=()=>{e(0),r(0),i(!1),d(!0),window.location.reload()},k=()=>{if(o.length===0)return null;const y=o[t];switch(y.type){case"multiple-choice":return a.jsx(hT,{question:y.question,options:y.options,correctAnswer:y.correctAnswer,onAnswer:v,timeLimit:30});case"true-false":return a.jsx(pT,{question:y.question,correctAnswer:y.correctAnswer,explanation:y.explanation,onAnswer:v,timeLimit:20});case"short-answer":return a.jsx(fT,{question:y.question,correctAnswers:y.correctAnswers,caseSensitive:y.caseSensitive,onAnswer:v,timeLimit:30});default:return a.jsx("div",{children:"Unknown question type"})}};if(u)return a.jsx("div",{className:"quiz-page",children:a.jsx("div",{className:"quiz-loading",children:a.jsx(Wi,{size:"large",text:"Generating personalized quiz questions..."})})});if(h)return a.jsx("div",{className:"quiz-page",children:a.jsxs("div",{className:"quiz-error",children:[a.jsx("h2",{children:"Oops! Something went wrong"}),a.jsx("p",{children:h}),a.jsx(le,{variant:"primary",onClick:()=>window.location.reload(),children:"Try Again"})]})});if(o.length===0)return a.jsx("div",{className:"quiz-page",children:a.jsxs("div",{className:"quiz-error",children:[a.jsx("h2",{children:"No Quiz Questions Available"}),a.jsx("p",{children:"We couldn't generate quiz questions at this time. Please try again later."}),a.jsx(le,{variant:"primary",onClick:()=>window.location.reload(),children:"Refresh"})]})});if(s){const y=Math.round(n/o.length*100);let T="",R="";return y>=90?(T="Outstanding! You have excellent vocabulary knowledge!",R=""):y>=70?(T="Great job! Your vocabulary skills are strong!",R=""):y>=50?(T="Good effort! Keep practicing to improve!",R=""):(T="Keep studying! Practice makes perfect!",R=""),a.jsx("div",{className:"quiz-page",children:a.jsxs("div",{className:"quiz-completed",children:[a.jsxs("h1",{children:[R," Quiz Completed!"]}),a.jsxs("div",{className:"final-score",children:[a.jsxs("h2",{children:["Your Score: ",n,"/",o.length]}),a.jsxs("p",{children:["Percentage: ",y,"%"]}),a.jsx("p",{className:"performance-message",children:T})]}),a.jsxs("div",{className:"quiz-stats",children:[a.jsxs("div",{className:"stat-row",children:[a.jsx("span",{children:"Words learned today:"}),a.jsx("span",{children:p.learning.todayProgress})]}),a.jsxs("div",{className:"stat-row",children:[a.jsx("span",{children:"Total words learned:"}),a.jsx("span",{children:p.learning.totalWordsLearned})]}),a.jsxs("div",{className:"stat-row",children:[a.jsx("span",{children:"Known words:"}),a.jsx("span",{children:p.vocabulary.knownWords.length})]}),a.jsxs("div",{className:"stat-row",children:[a.jsx("span",{children:"Words to study:"}),a.jsx("span",{children:p.vocabulary.unknownWords.length})]})]}),a.jsxs("div",{className:"quiz-actions",children:[a.jsx(le,{variant:"primary",onClick:x,children:"Take Quiz Again"}),a.jsx(le,{variant:"secondary",onClick:()=>window.location.href="/dashboard",children:"Go to Dashboard"}),a.jsx(le,{variant:"info",onClick:()=>window.location.href="/",children:"Back to Home"})]})]})})}const D=o[t];return a.jsxs("div",{className:"quiz-page",children:[a.jsxs("div",{className:"quiz-header",children:[a.jsx("h1",{children:"Vocabulary Quiz"}),a.jsxs("div",{className:"quiz-progress",children:[a.jsxs("p",{children:["Question ",t+1," of ",o.length]}),a.jsxs("p",{children:["Score: ",n,"/",t+(t>0?1:0)]})]})]}),a.jsx("div",{className:"quiz-content",children:k()}),a.jsxs("div",{className:"quiz-footer",children:[a.jsxs("p",{children:["Question Type: ",D.type.replace("-"," ").toUpperCase()]}),a.jsxs("p",{children:["Word Difficulty: ",((E=(V=D.wordData)==null?void 0:V.difficulty)==null?void 0:E.toUpperCase())||"UNKNOWN"]})]})]})};const VD=()=>{var v;const{user:t,learning:e}=Fn(),n=$s(),[r,s]=P.useState(!1),[i,o]=P.useState(!1),[l,u]=P.useState(!1),[d,h]=P.useState({displayName:"",email:"",photoURL:"",preferences:{dailyGoal:10,difficulty:"medium",theme:"light",soundEnabled:!0,language:"en"}});P.useEffect(()=>{var x,k,D,V,E;t.profile&&h({displayName:t.profile.displayName||"",email:t.profile.email||"",photoURL:t.profile.photoURL||"",preferences:{dailyGoal:((x=t.profile.learningPreferences)==null?void 0:x.dailyGoal)||10,difficulty:((k=t.profile.learningPreferences)==null?void 0:k.difficulty)||"medium",theme:((D=t.profile.learningPreferences)==null?void 0:D.theme)||"light",soundEnabled:((V=t.profile.learningPreferences)==null?void 0:V.soundEnabled)??!0,language:((E=t.profile.learningPreferences)==null?void 0:E.language)||"en"}})},[t.profile]);const m=x=>{const{name:k,value:D,type:V,checked:E}=x.target,y=V==="checkbox"?E:D;if(k.startsWith("preferences.")){const T=k.split(".")[1];h(R=>({...R,preferences:{...R.preferences,[T]:y}}))}else h(T=>({...T,[k]:y}))},p=async()=>{o(!0);try{const x={displayName:d.displayName,learningPreferences:d.preferences,lastModified:new Date().toISOString()},k=await un.updateUserProfile(t.profile.uid,x);k.success?(n(_e.setUser({...t.profile,...x})),n(_e.setNotification({type:"success",message:"Profile updated successfully!"})),s(!1)):n(_e.setError(k.error))}catch{n(_e.setError("Failed to update profile"))}finally{o(!1)}},_=()=>{var x,k,D,V,E;t.profile&&h({displayName:t.profile.displayName||"",email:t.profile.email||"",photoURL:t.profile.photoURL||"",preferences:{dailyGoal:((x=t.profile.learningPreferences)==null?void 0:x.dailyGoal)||10,difficulty:((k=t.profile.learningPreferences)==null?void 0:k.difficulty)||"medium",theme:((D=t.profile.learningPreferences)==null?void 0:D.theme)||"light",soundEnabled:((V=t.profile.learningPreferences)==null?void 0:V.soundEnabled)??!0,language:((E=t.profile.learningPreferences)==null?void 0:E.language)||"en"}}),s(!1)},I=async()=>{await _e.sendEmailVerification(n),u(!1)},A=[{value:"easy",label:"Easy - Basic vocabulary"},{value:"medium",label:"Medium - Intermediate vocabulary"},{value:"hard",label:"Hard - Advanced vocabulary"}],b=[{value:"light",label:"Light Theme"},{value:"dark",label:"Dark Theme"},{value:"auto",label:"Auto (System)"}],w=[{value:"en",label:"English"},{value:"ko",label:"Korean"},{value:"es",label:"Spanish"},{value:"fr",label:"French"}];return t.profile?a.jsxs("div",{className:"profile-page",children:[a.jsxs("div",{className:"profile-header",children:[a.jsxs("div",{className:"profile-avatar",children:[a.jsx("img",{src:d.photoURL||"/default-avatar.svg",alt:"Profile",className:"avatar-image"}),r&&a.jsx("button",{className:"avatar-edit-btn",children:""})]}),a.jsxs("div",{className:"profile-info",children:[a.jsx("h1",{children:d.displayName||"User"}),a.jsxs("p",{className:"profile-email",children:[d.email,!t.profile.emailVerified&&a.jsxs("span",{className:"verification-status",children:[a.jsx("span",{className:"unverified",children:"Not verified"}),a.jsx("button",{className:"verify-btn",onClick:()=>u(!0),children:"Verify"})]})]})]}),a.jsx("div",{className:"profile-actions",children:r?a.jsxs("div",{className:"edit-actions",children:[a.jsx(le,{variant:"outline",onClick:_,disabled:i,children:"Cancel"}),a.jsx(le,{variant:"primary",onClick:p,loading:i,disabled:i,children:"Save Changes"})]}):a.jsx(le,{variant:"primary",onClick:()=>s(!0),children:"Edit Profile"})})]}),a.jsxs("div",{className:"profile-content",children:[a.jsxs("div",{className:"profile-section",children:[a.jsx("h2",{children:"Profile Information"}),r?a.jsxs("div",{className:"profile-form",children:[a.jsx(Je,{label:"Display Name",name:"displayName",value:d.displayName,onChange:m,placeholder:"Enter your display name",disabled:i}),a.jsx(Je,{label:"Email Address",name:"email",type:"email",value:d.email,disabled:!0,helperText:"Email cannot be changed. Contact support if you need to update your email."})]}):a.jsxs("div",{className:"profile-display",children:[a.jsxs("div",{className:"info-item",children:[a.jsx("label",{children:"Display Name:"}),a.jsx("span",{children:d.displayName||"Not set"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("label",{children:"Email Address:"}),a.jsx("span",{children:d.email})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("label",{children:"Member Since:"}),a.jsx("span",{children:new Date(t.profile.createdAt).toLocaleDateString()})]})]})]}),a.jsxs("div",{className:"profile-section",children:[a.jsx("h2",{children:"Learning Preferences"}),r?a.jsxs("div",{className:"preferences-form",children:[a.jsxs("div",{className:"form-row",children:[a.jsx(Je,{label:"Daily Goal (words)",name:"preferences.dailyGoal",type:"number",min:"1",max:"100",value:d.preferences.dailyGoal,onChange:m,disabled:i}),a.jsx(Ri,{label:"Difficulty Level",name:"preferences.difficulty",value:d.preferences.difficulty,onChange:m,options:A,disabled:i})]}),a.jsxs("div",{className:"form-row",children:[a.jsx(Ri,{label:"Theme",name:"preferences.theme",value:d.preferences.theme,onChange:m,options:b,disabled:i}),a.jsx(Ri,{label:"Language",name:"preferences.language",value:d.preferences.language,onChange:m,options:w,disabled:i})]}),a.jsx("div",{className:"form-row",children:a.jsxs("label",{className:"checkbox-label",children:[a.jsx("input",{type:"checkbox",name:"preferences.soundEnabled",checked:d.preferences.soundEnabled,onChange:m,disabled:i}),a.jsx("span",{children:"Enable sound effects and pronunciation"})]})})]}):a.jsxs("div",{className:"preferences-display",children:[a.jsxs("div",{className:"info-item",children:[a.jsx("label",{children:"Daily Goal:"}),a.jsxs("span",{children:[d.preferences.dailyGoal," words"]})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("label",{children:"Difficulty Level:"}),a.jsx("span",{className:"capitalize",children:d.preferences.difficulty})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("label",{children:"Theme:"}),a.jsx("span",{className:"capitalize",children:d.preferences.theme})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("label",{children:"Language:"}),a.jsx("span",{children:(v=w.find(x=>x.value===d.preferences.language))==null?void 0:v.label})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("label",{children:"Sound Effects:"}),a.jsx("span",{children:d.preferences.soundEnabled?"Enabled":"Disabled"})]})]})]}),a.jsxs("div",{className:"profile-section",children:[a.jsx("h2",{children:"Learning Progress"}),a.jsxs("div",{className:"progress-stats",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-number",children:e.totalWordsLearned}),a.jsx("div",{className:"stat-label",children:"Words Learned"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-number",children:e.currentLevel}),a.jsx("div",{className:"stat-label",children:"Current Level"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-number",children:e.streakDays}),a.jsx("div",{className:"stat-label",children:"Day Streak"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsxs("div",{className:"stat-number",children:[e.todayProgress,"/",e.dailyGoal]}),a.jsx("div",{className:"stat-label",children:"Today's Progress"})]})]})]})]}),a.jsx(Hm,{isOpen:l,onClose:()=>u(!1),title:"Verify Email Address",children:a.jsxs("div",{className:"verification-modal",children:[a.jsx("p",{children:"To verify your email address, we'll send a verification link to:"}),a.jsx("strong",{children:d.email}),a.jsxs("div",{className:"modal-actions",children:[a.jsx(le,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),a.jsx(le,{variant:"primary",onClick:I,loading:t.isLoading,children:"Send Verification Email"})]})]})})]}):a.jsx("div",{className:"profile-page",children:a.jsx(Wi,{size:"large"})})},MD=()=>a.jsxs("div",{className:"about-page",children:[a.jsx("h1",{children:"About Vocabulary App"}),a.jsx("p",{children:"Learn more about our SAT vocabulary learning platform"}),a.jsxs("div",{className:"about-content",children:[a.jsx("h2",{children:"Features"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Comprehensive SAT vocabulary database"}),a.jsx("li",{children:"Personalized learning paths"}),a.jsx("li",{children:"Offline learning support"}),a.jsx("li",{children:"Progress tracking"}),a.jsx("li",{children:"Interactive quizzes"})]})]})]});const FD=()=>{var A,b;const t=Os(),e=Tn(),n=$s(),{user:r}=Fn(),s=((b=(A=e.state)==null?void 0:A.from)==null?void 0:b.pathname)||"/dashboard",[i,o]=P.useState({email:"",password:""}),[l,u]=P.useState(!1),[d,h]=P.useState(!1);pn.useEffect(()=>{r.isAuthenticated&&t(s,{replace:!0})},[r.isAuthenticated,t,s]);const m=w=>{const{name:v,value:x}=w.target;o(k=>({...k,[v]:x}))},p=async w=>{if(w.preventDefault(),n(_e.clearAuthError()),!i.email||!i.password){n({type:"SET_AUTH_ERROR",payload:"Please fill in all fields"});return}await _e.loginUser(n,i.email,i.password,d)},_=async()=>{n(_e.clearAuthError()),await _e.loginWithGoogle(n)},I=()=>{t("/forgot-password")};return a.jsx("div",{className:"auth-container",children:a.jsxs("div",{className:"auth-card",children:[a.jsxs("div",{className:"auth-header",children:[a.jsx("h1",{children:"Welcome Back"}),a.jsx("p",{children:"Sign in to continue your learning journey"})]}),r.error&&a.jsxs("div",{className:"auth-error",children:[a.jsx("span",{className:"error-icon",children:""}),r.error]}),a.jsxs("form",{onSubmit:p,className:"auth-form",children:[a.jsx(Je,{type:"email",name:"email",label:"Email Address",value:i.email,onChange:m,placeholder:"Enter your email",required:!0,disabled:r.isLoading}),a.jsx(Je,{type:l?"text":"password",name:"password",label:"Password",value:i.password,onChange:m,placeholder:"Enter your password",required:!0,disabled:r.isLoading,endIcon:a.jsx("button",{type:"button",className:"password-toggle",onClick:()=>u(!l),children:l?"":""})}),a.jsxs("div",{className:"auth-options",children:[a.jsxs("label",{className:"remember-me",children:[a.jsx("input",{type:"checkbox",checked:d,onChange:w=>h(w.target.checked),disabled:r.isLoading}),a.jsx("span",{children:"Remember me"})]}),a.jsx("button",{type:"button",className:"forgot-password-link",onClick:I,disabled:r.isLoading,children:"Forgot password?"})]}),a.jsx(le,{type:"submit",variant:"primary",size:"large",disabled:r.isLoading,loading:r.isLoading,fullWidth:!0,children:"Sign In"})]}),a.jsx("div",{className:"auth-divider",children:a.jsx("span",{children:"or"})}),a.jsx(le,{variant:"outline",size:"large",onClick:_,disabled:r.isLoading,fullWidth:!0,leftIcon:"",children:"Continue with Google"}),a.jsx("div",{className:"auth-footer",children:a.jsxs("p",{children:["Don't have an account?"," ",a.jsx(dn,{to:"/register",className:"auth-link",children:"Create one"})]})})]})})},UD=()=>{const t=Os(),e=$s(),{user:n}=Fn(),[r,s]=P.useState({displayName:"",email:"",password:"",confirmPassword:""}),[i,o]=P.useState({isValid:!0,errors:[]}),[l,u]=P.useState(!1);pn.useEffect(()=>{n.isAuthenticated&&t("/dashboard")},[n.isAuthenticated,t]);const d=_=>{const{name:I,value:A}=_.target;if(s(b=>({...b,[I]:A})),I==="password"){const b=un.validatePassword(A);o(b)}},h=async _=>{_.preventDefault(),e(_e.clearAuthError());const I=m();if(I.length>0){e({type:"SET_AUTH_ERROR",payload:I[0]});return}await _e.registerUser(e,r.email,r.password,{displayName:r.displayName})},m=()=>{const _=[];return r.displayName.trim()||_.push("Display name is required"),r.email.trim()?un.validateEmail(r.email)||_.push("Please enter a valid email address"):_.push("Email is required"),r.password?i.isValid||_.push(i.errors[0]):_.push("Password is required"),r.password!==r.confirmPassword&&_.push("Passwords do not match"),_},p=async()=>{e(_e.clearAuthError()),await _e.loginWithGoogle(e)};return a.jsx("div",{className:"auth-container",children:a.jsxs("div",{className:"auth-card",children:[a.jsxs("div",{className:"auth-header",children:[a.jsx("h1",{children:"Create Account"}),a.jsx("p",{children:"Join our vocabulary learning community"})]}),n.error&&a.jsxs("div",{className:"auth-error",children:[a.jsx("span",{className:"error-icon",children:""}),n.error]}),a.jsxs("form",{onSubmit:h,className:"auth-form",children:[a.jsx(Je,{type:"text",name:"displayName",label:"Display Name",value:r.displayName,onChange:d,placeholder:"Enter your display name",required:!0,disabled:n.isLoading}),a.jsx(Je,{type:"email",name:"email",label:"Email Address",value:r.email,onChange:d,placeholder:"Enter your email",required:!0,disabled:n.isLoading}),a.jsx(Je,{type:l?"text":"password",name:"password",label:"Password",value:r.password,onChange:d,placeholder:"Create a password",required:!0,disabled:n.isLoading,rightIcon:a.jsx("button",{type:"button",className:"password-toggle",onClick:()=>u(!l),children:l?"":""})}),r.password&&!i.isValid&&a.jsxs("div",{className:"password-requirements",children:[a.jsx("p",{children:"Password must contain:"}),a.jsx("ul",{children:i.errors.map((_,I)=>a.jsx("li",{className:"requirement-error",children:_},I))})]}),a.jsx(Je,{type:l?"text":"password",name:"confirmPassword",label:"Confirm Password",value:r.confirmPassword,onChange:d,placeholder:"Confirm your password",required:!0,disabled:n.isLoading}),a.jsx(le,{type:"submit",variant:"primary",size:"large",disabled:n.isLoading||!i.isValid,loading:n.isLoading,fullWidth:!0,children:"Create Account"})]}),a.jsx("div",{className:"auth-divider",children:a.jsx("span",{children:"or"})}),a.jsx(le,{variant:"outline",size:"large",onClick:p,disabled:n.isLoading,fullWidth:!0,leftIcon:"",children:"Continue with Google"}),a.jsx("div",{className:"auth-footer",children:a.jsxs("p",{children:["Already have an account?"," ",a.jsx(dn,{to:"/login",className:"auth-link",children:"Sign in"})]})}),a.jsx("div",{className:"auth-terms",children:a.jsxs("p",{children:["By creating an account, you agree to our"," ",a.jsx(dn,{to:"/terms",className:"auth-link",children:"Terms of Service"})," ","and"," ",a.jsx(dn,{to:"/privacy",className:"auth-link",children:"Privacy Policy"})]})})]})})},$D=()=>{const t=Os(),e=$s(),{user:n}=Fn(),[r,s]=P.useState(""),[i,o]=P.useState(!1),l=async h=>{if(h.preventDefault(),e(_e.clearAuthError()),!r){e({type:"SET_AUTH_ERROR",payload:"Please enter your email address"});return}if(!un.validateEmail(r)){e({type:"SET_AUTH_ERROR",payload:"Please enter a valid email address"});return}await _e.resetPassword(e,r),n.error||o(!0)},u=()=>{t("/login")},d=async()=>{await _e.resetPassword(e,r)};return i?a.jsx("div",{className:"auth-container",children:a.jsxs("div",{className:"auth-card",children:[a.jsxs("div",{className:"auth-header",children:[a.jsx("h1",{children:"Check Your Email"}),a.jsx("p",{children:"We've sent a password reset link to your email address"})]}),a.jsxs("div",{className:"auth-success",children:[a.jsx("span",{className:"success-icon",children:""}),"Password reset email sent to ",r]}),a.jsxs("div",{className:"email-instructions",children:[a.jsx("h3",{children:"What's next?"}),a.jsxs("ol",{children:[a.jsx("li",{children:"Check your email inbox (and spam folder)"}),a.jsx("li",{children:"Click the password reset link in the email"}),a.jsx("li",{children:"Follow the instructions to create a new password"}),a.jsx("li",{children:"Return to the app and sign in with your new password"})]})]}),a.jsxs("div",{className:"auth-actions",children:[a.jsx(le,{variant:"outline",size:"large",onClick:d,disabled:n.isLoading,fullWidth:!0,children:"Resend Email"}),a.jsx(le,{variant:"primary",size:"large",onClick:u,fullWidth:!0,children:"Back to Login"})]}),a.jsx("div",{className:"auth-footer",children:a.jsxs("p",{children:["Didn't receive the email? Check your spam folder or"," ",a.jsx("button",{type:"button",className:"auth-link",onClick:d,disabled:n.isLoading,children:"try again"})]})})]})}):a.jsx("div",{className:"auth-container",children:a.jsxs("div",{className:"auth-card",children:[a.jsxs("div",{className:"auth-header",children:[a.jsx("h1",{children:"Reset Password"}),a.jsx("p",{children:"Enter your email address and we'll send you a reset link"})]}),n.error&&a.jsxs("div",{className:"auth-error",children:[a.jsx("span",{className:"error-icon",children:""}),n.error]}),a.jsxs("form",{onSubmit:l,className:"auth-form",children:[a.jsx(Je,{type:"email",name:"email",label:"Email Address",value:r,onChange:h=>s(h.target.value),placeholder:"Enter your email address",required:!0,disabled:n.isLoading,autoFocus:!0}),a.jsx(le,{type:"submit",variant:"primary",size:"large",disabled:n.isLoading||!r,loading:n.isLoading,fullWidth:!0,children:"Send Reset Link"})]}),a.jsx("div",{className:"auth-footer",children:a.jsxs("p",{children:["Remember your password?"," ",a.jsx(dn,{to:"/login",className:"auth-link",children:"Back to Login"})]})})]})})};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),BD=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),F_=t=>{const e=BD(t);return e.charAt(0).toUpperCase()+e.slice(1)},mT=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),WD=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=P.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},u)=>P.createElement("svg",{ref:u,...qD,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:mT("lucide",s),...!i&&!WD(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,h])=>P.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=(t,e)=>{const n=P.forwardRef(({className:r,...s},i)=>P.createElement(HD,{ref:i,iconNode:e,className:mT(`lucide-${zD(F_(t))}`,`lucide-${t}`,r),...s}));return n.displayName=F_(t),n};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],yc=xe("book-open",GD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],QD=xe("calendar",KD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],XD=xe("check",YD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ZD=xe("circle-alert",JD);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],tL=xe("circle-check-big",eL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],U_=xe("clock",nL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],qn=xe("database",rL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],iL=xe("ellipsis-vertical",sL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],aL=xe("external-link",oL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],cL=xe("eye-off",lL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gT=xe("eye",uL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],hL=xe("funnel",dL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],$_=xe("globe",fL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],mL=xe("key",pL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],pi=xe("plus",gL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],yT=xe("refresh-cw",yL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],_L=xe("save",vL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Lf=xe("search",wL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vc=xe("settings",EL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],TL=xe("sparkles",xL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],fh=xe("square-pen",SL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],vT=xe("star-off",IL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Vf=xe("star",CL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],_c=xe("trash-2",RL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Mf=xe("trending-up",AL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],_T=xe("upload",kL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],bL=xe("users",NL);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_s=xe("x",PL);const wT=({onFileSelect:t,onFileRemove:e,onUploadProgress:n,onUploadComplete:r,onUploadError:s,maxFileSize:i=10*1024*1024,acceptedTypes:o=[".csv",".xlsx",".xls",".json",".pdf"],multiple:l=!1,disabled:u=!1,className:d=""})=>{const[h,m]=P.useState(!1),[p,_]=P.useState([]),[I,A]=P.useState({}),[b,w]=P.useState({}),v=P.useRef(null),x=P.useCallback(z=>{const H=[];z.size>i&&H.push(`File size exceeds ${(i/(1024*1024)).toFixed(1)}MB limit`);const W="."+z.name.split(".").pop().toLowerCase();return o.includes(W)||H.push(`File type ${W} is not supported. Accepted types: ${o.join(", ")}`),H},[i,o]),k=P.useCallback(z=>{const H=Array.from(z),W=[],U={};if(H.forEach(M=>{const G=x(M);G.length>0?U[M.name]=G:W.push({file:M,id:`${M.name}-${Date.now()}`,name:M.name,size:M.size,type:M.type||"application/octet-stream",status:"selected"})}),Object.keys(U).length>0&&(w(M=>({...M,...U})),s&&s(U)),W.length>0){const M=l?[...p,...W]:W;_(M),t&&t(W)}},[x,p,l,t,s]),D=P.useCallback(z=>{z.preventDefault(),z.stopPropagation(),u||m(!0)},[u]),V=P.useCallback(z=>{z.preventDefault(),z.stopPropagation(),z.currentTarget.contains(z.relatedTarget)||m(!1)},[]),E=P.useCallback(z=>{z.preventDefault(),z.stopPropagation()},[]),y=P.useCallback(z=>{if(z.preventDefault(),z.stopPropagation(),m(!1),!u){const H=z.dataTransfer.files;k(H)}},[u,k]),T=P.useCallback(z=>{const H=z.target.files;H&&H.length>0&&k(H),z.target.value=""},[k]),R=P.useCallback(z=>{const H=p.filter(W=>W.id!==z);_(H),A(W=>{const U={...W};return delete U[z],U}),w(W=>{const U={...W},M=p.find(G=>G.id===z);return M&&delete U[M.name],U}),e&&e(z)},[p,e]),j=P.useCallback(z=>{let H=0;const W=setInterval(()=>{if(H+=Math.random()*15,H>=100){if(H=100,clearInterval(W),A(U=>({...U,[z]:100})),_(U=>U.map(M=>M.id===z?{...M,status:"completed"}:M)),r){const U=p.find(M=>M.id===z);r(U)}}else A(U=>({...U,[z]:Math.floor(H)})),n&&n(z,Math.floor(H))},200);return W},[p,n,r]),O=P.useCallback(z=>{_(H=>H.map(W=>W.id===z?{...W,status:"uploading"}:W)),j(z)},[j]),N=z=>{if(z===0)return"0 Bytes";const H=1024,W=["Bytes","KB","MB","GB"],U=Math.floor(Math.log(z)/Math.log(H));return parseFloat((z/Math.pow(H,U)).toFixed(2))+" "+W[U]},ee=z=>{switch(z.split(".").pop().toLowerCase()){case"csv":return"";case"xlsx":case"xls":return"";case"json":return"";case"pdf":return"";default:return""}};return a.jsxs("div",{className:`file-upload-container ${d}`,children:[a.jsxs("div",{className:`file-upload-dropzone ${h?"active":""} ${u?"disabled":""}`,onDragEnter:D,onDragLeave:V,onDragOver:E,onDrop:y,onClick:()=>{var z;return!u&&((z=v.current)==null?void 0:z.click())},children:[a.jsxs("div",{className:"file-upload-content",children:[a.jsx(_T,{className:`file-upload-icon ${h?"bounce":""}`,size:48}),a.jsxs("div",{className:"file-upload-text",children:[a.jsx("h3",{children:h?"Drop files here...":"Drag & drop files here, or click to select"}),a.jsxs("p",{children:["Supports ",o.join(", ")," files up to ",(i/(1024*1024)).toFixed(1),"MB"]})]})]}),a.jsx("input",{ref:v,type:"file",accept:o.join(","),multiple:l,onChange:T,disabled:u,style:{display:"none"}})]}),p.length>0&&a.jsxs("div",{className:"file-upload-list",children:[a.jsx("h4",{children:"Selected Files"}),p.map(z=>a.jsxs("div",{className:"file-upload-item",children:[a.jsxs("div",{className:"file-info",children:[a.jsx("span",{className:"file-icon",children:ee(z.name)}),a.jsxs("div",{className:"file-details",children:[a.jsx("span",{className:"file-name",children:z.name}),a.jsx("span",{className:"file-size",children:N(z.size)})]})]}),a.jsxs("div",{className:"file-actions",children:[z.status==="selected"&&a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>O(z.id),disabled:u,children:"Upload"}),z.status==="uploading"&&a.jsxs("div",{className:"upload-progress",children:[a.jsx(yT,{className:"spin",size:16}),a.jsxs("span",{children:[I[z.id]||0,"%"]})]}),z.status==="completed"&&a.jsx(tL,{className:"text-success",size:20}),a.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>R(z.id),disabled:u&&z.status==="uploading",children:a.jsx(_s,{size:16})})]}),z.status==="uploading"&&a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill",style:{width:`${I[z.id]||0}%`}})})]},z.id))]}),Object.keys(b).length>0&&a.jsxs("div",{className:"file-upload-errors",children:[a.jsxs("h4",{className:"error-title",children:[a.jsx(ZD,{size:16}),"Upload Errors"]}),Object.entries(b).map(([z,H])=>a.jsxs("div",{className:"error-item",children:[a.jsxs("strong",{children:[z,":"]}),a.jsx("ul",{children:H.map((W,U)=>a.jsx("li",{children:W},U))})]},z))]})]})};wT.propTypes={onFileSelect:C.func,onFileRemove:C.func,onUploadProgress:C.func,onUploadComplete:C.func,onUploadError:C.func,maxFileSize:C.number,acceptedTypes:C.arrayOf(C.string),multiple:C.bool,disabled:C.bool,className:C.string};class jL{constructor(){this.supportedFormats=["csv","json","xlsx","xls"],this.requiredFields=["word","definition"],this.optionalFields=["pronunciation","partOfSpeech","koreanTranslation","example","examples","difficulty","category","categories","translation"]}async parseFile(e,n={}){try{const r=this.getFileExtension(e.name);let s;switch(r){case"csv":const o=await this.readFileContent(e);s=await this.parseCSV(o);break;case"json":const l=await this.readFileContent(e);s=await this.parseJSON(l);break;case"xlsx":case"xls":const u=await this.readFileContent(e);s=await this.parseExcel(u,e);break;default:throw new Error(`Unsupported file format: ${r}`)}const i=this.validateAndNormalizeData(s);return{success:!0,data:i,fileName:e.name,fileType:r,recordCount:i.length,detectedColumns:this.getDetectedColumns(i),sampleData:i.slice(0,5)}}catch(r){return console.error("File parsing error:",r),{success:!1,error:r.message,fileName:e.name}}}readFileContent(e){return new Promise((n,r)=>{const s=new FileReader;s.onload=i=>{n(i.target.result)},s.onerror=()=>{r(new Error("Failed to read file"))},e.name.endsWith(".xlsx")||e.name.endsWith(".xls")?s.readAsArrayBuffer(e):s.readAsText(e,"UTF-8")})}async parseCSV(e){try{const n=e.split(`
`).filter(i=>i.trim());if(n.length===0)throw new Error("CSV file is empty");const r=this.parseCSVLine(n[0]),s=[];for(let i=1;i<n.length;i++){const o=this.parseCSVLine(n[i]);if(o.length>0){const l={};r.forEach((u,d)=>{const h=u.trim().toLowerCase();l[h]=o[d]?o[d].trim():""}),s.push(l)}}return s}catch(n){throw new Error(`CSV parsing error: ${n.message}`)}}parseCSVLine(e){const n=[];let r="",s=!1;for(let i=0;i<e.length;i++){const o=e[i];o==='"'?s=!s:o===","&&!s?(n.push(r),r=""):r+=o}return n.push(r),n.map(i=>i.replace(/^"|"$/g,""))}async parseJSON(e){try{const n=JSON.parse(e);if(!Array.isArray(n))throw new Error("JSON must contain an array of vocabulary items");return n}catch(n){throw new Error(`JSON parsing error: ${n.message}`)}}async parseExcel(e,n){try{throw new Error("Excel files are not fully supported yet. Please convert to CSV format and try again.")}catch(r){throw new Error(`Excel parsing error: ${r.message}`)}}async parsePDF(e,n={}){try{console.log(" Starting PDF parsing for vocabulary import..."),this.pdfWorkerInitialized||await this.initializePDFWorker();const r=await e.arrayBuffer();console.log(` File loaded: ${Math.round(r.byteLength/1024)}KB`);const i=await pdfjsLib.getDocument({data:r,useWorkerFetch:!1,isEvalSupported:!1}).promise;console.log(` PDF loaded successfully. Pages: ${i.numPages}`);let o="";for(let u=1;u<=i.numPages;u++)try{const d=await i.getPage(u),m=(await d.getTextContent()).items.filter(p=>p.str&&p.str.trim()).map(p=>p.str).join(" ").replace(/\s+/g," ").trim();m&&(o+=m+`
`),d.cleanup(),n.progressCallback&&n.progressCallback({stage:"Extracting text from PDF",progress:u/i.numPages*100})}catch(d){console.warn(` Error processing page ${u}:`,d.message)}if(await i.destroy(),!o||o.trim().length===0)throw new Error("No text could be extracted from the PDF file");console.log(` PDF extraction completed! Text length: ${o.length} characters`);const l=this.convertTextToVocabulary(o,e.name);return console.log(` PDF parsing completed: ${l.length} vocabulary items found`),l}catch(r){throw console.error(" PDF parsing failed:",r),new Error(`PDF parsing error: ${r.message}`)}}convertTextToVocabulary(e,n){const r=e.split(/\n+/).map(i=>i.trim()).filter(i=>i.length>0);console.log(` Processing ${r.length} lines from PDF...`);const s=[this.parseStructuredVocabulary.bind(this),this.parseDefinitionList.bind(this),this.parseWordList.bind(this),this.parseTabSeparated.bind(this),this.parseSemiColonSeparated.bind(this)];for(const i of s)try{const o=i(r);if(o.length>0)return console.log(` Successfully parsed using strategy: ${i.name}`),o}catch(o){console.warn(` Strategy ${i.name} failed:`,o.message)}return console.log(" Falling back to simple text extraction..."),this.fallbackTextExtraction(e,n)}parseStructuredVocabulary(e){const n=[],r=[/^(.+?)\s*[-]\s*(.+)$/,/^(.+?)\s*:\s*(.+)$/,/^(.+?)\s*\|\s*(.+)$/,/^(.+?)\s*=\s*(.+)$/];for(const s of e)for(const i of r){const o=s.match(i);if(o){const[,l,u]=o;if(l.trim().length>0&&u.trim().length>0){n.push({word:l.trim().toLowerCase(),definition:u.trim()});break}}}return n}parseDefinitionList(e){const n=[];let r=null;for(const s of e)s.length<30&&!s.endsWith(".")&&!s.includes(" ")?r=s.toLowerCase():r&&s.length>10&&(n.push({word:r,definition:s}),r=null);return n}parseWordList(e){const n=[];for(const r of e)!r.includes(" ")&&r.length>2&&r.length<25&&n.push({word:r.toLowerCase(),definition:`Definition for ${r}`});return n}parseTabSeparated(e){const n=[];for(const r of e){const s=r.split("	").map(i=>i.trim());s.length>=2&&s[0].length>0&&s[1].length>0&&n.push({word:s[0].toLowerCase(),definition:s[1],pronunciation:s[2]||"",koreanTranslation:s[3]||""})}return n}parseSemiColonSeparated(e){const n=[];for(const r of e){const s=r.split(";").map(i=>i.trim());s.length>=2&&s[0].length>0&&s[1].length>0&&n.push({word:s[0].toLowerCase(),definition:s[1],example:s[2]||""})}return n}fallbackTextExtraction(e,n){var i;const r=((i=e.match(/\b[a-zA-Z]{4,}\b/g))==null?void 0:i.filter(o=>{const l=o.toLowerCase();return l.length>3&&l.length<20&&!["this","that","with","from","they","were","been","have","will","would","could","should"].includes(l)}))||[];return[...new Set(r.map(o=>o.toLowerCase()))].slice(0,100).map(o=>({word:o,definition:`Definition for ${o} (extracted from ${n})`,source:"pdf_extraction",requiresReview:!0}))}validateAndNormalizeData(e){if(!Array.isArray(e))throw new Error("Parsed data must be an array");if(e.length===0)throw new Error("No data found in file");const n=[],r=[];if(e.forEach((s,i)=>{try{const o=this.normalizeRecord(s,i);o&&n.push(o)}catch(o){r.push(`Row ${i+1}: ${o.message}`)}}),r.length>0&&n.length===0)throw new Error(`Data validation failed:
${r.join(`
`)}`);return r.length>0&&console.warn("Some rows had validation errors:",r),n}normalizeRecord(e,n){const r={};Object.keys(e).forEach(l=>{r[l.toLowerCase().trim()]=e[l]});const s=this.findFieldValue(r,["word","term","vocabulary","english"]);if(!s||s.trim()==="")throw new Error("Word field is required and cannot be empty");const i=this.findFieldValue(r,["definition","meaning","def","description"]);if(!i||i.trim()==="")throw new Error("Definition field is required and cannot be empty");return{word:s.trim().toLowerCase(),definitions:[{definition:i.trim()}],pronunciation:this.findFieldValue(r,["pronunciation","phonetic","sound"])||"",partOfSpeech:this.findFieldValue(r,["partofspeech","pos","type","part_of_speech"])||"",koreanTranslation:this.findFieldValue(r,["korean","translation","korean_translation","kor"])||"",examples:this.parseExamples(r),difficulty:this.normalizeDifficulty(this.findFieldValue(r,["difficulty","level","hard"])),categories:this.parseCategories(r),customFields:this.extractCustomFields(r)}}findFieldValue(e,n){for(const r of n)if(e[r]!==void 0&&e[r]!==null)return e[r].toString();return null}parseExamples(e){const n=[],r=this.findFieldValue(e,["example","sentence","usage","sample"]);r&&n.push({example:r.trim()});for(let i=1;i<=5;i++){const o=this.findFieldValue(e,[`example${i}`,`sentence${i}`,`sample${i}`]);o&&n.push({example:o.trim()})}const s=this.findFieldValue(e,["examples","sentences","usages"]);return s&&n.length===0&&s.split(",").map(o=>o.trim()).filter(o=>o).forEach(o=>n.push({example:o})),n}normalizeDifficulty(e){if(!e)return"medium";const n=e.toLowerCase().trim();return["easy","medium","hard"].includes(n)?n:["1","beginner","simple","basic"].includes(n)?"easy":["2","intermediate","normal","average"].includes(n)?"medium":["3","advanced","difficult","complex","challenging"].includes(n)?"hard":"medium"}parseCategories(e){const n=[],r=this.findFieldValue(e,["category","topic","subject","theme"]);if(r){const i=r.split(",").map(o=>o.trim()).filter(o=>o);n.push(...i)}const s=this.findFieldValue(e,["categories","topics","subjects","tags"]);if(s&&n.length===0){const i=s.split(",").map(o=>o.trim()).filter(o=>o);n.push(...i)}return n}extractCustomFields(e){const n={},r=["word","term","vocabulary","english","definition","meaning","def","description","pronunciation","phonetic","sound","partofspeech","pos","type","part_of_speech","korean","translation","korean_translation","kor","example","sentence","usage","sample","examples","sentences","usages","difficulty","level","hard","category","topic","subject","theme","categories","topics","subjects","tags"];return Object.keys(e).forEach(s=>{const i=s.toLowerCase().trim();!r.includes(i)&&!i.match(/^(example|sentence|sample)\d+$/)&&(n[s]=e[s])}),Object.keys(n).length>0?n:{}}getDetectedColumns(e){if(e.length===0)return[];const n=new Set;return e.forEach(r=>{Object.keys(r).forEach(s=>n.add(s))}),Array.from(n)}getFileExtension(e){return e.split(".").pop().toLowerCase()}isValidFormat(e){const n=this.getFileExtension(e);return this.supportedFormats.includes(n)}getColumnMappingSuggestions(e){const n={},r=["word","term","vocabulary","english"],s=e.find(u=>r.some(d=>u.toLowerCase().includes(d)));s&&(n.word=s);const i=["definition","meaning","def","description"],o=e.find(u=>i.some(d=>u.toLowerCase().includes(d)));o&&(n.definition=o);const l={pronunciation:["pronunciation","phonetic","sound"],partOfSpeech:["partofspeech","pos","type","part_of_speech"],koreanTranslation:["korean","translation","korean_translation","kor"],example:["example","sentence","usage","sample"],difficulty:["difficulty","level","hard"],category:["category","topic","subject","theme"]};return Object.keys(l).forEach(u=>{const d=e.find(h=>l[u].some(m=>h.toLowerCase().includes(m)));d&&(n[u]=d)}),n}}const OL=new jL;class DL{constructor(){this.cache=new Map,this.collectionsRef=lh(Cr,"custom_collections"),this.vocabulariesRef=lh(Cr,"custom_vocabularies"),this.progressRef=lh(Cr,"custom_progress")}async createCollection(e,n){try{const r={userId:e,name:n.name,description:n.description||"",source:n.source||"manual",originalFileName:n.originalFileName||null,fileUrl:n.fileUrl||null,wordCount:0,studiedCount:0,masteredCount:0,isPublic:n.isPublic||!1,tags:n.tags||[],metadata:n.metadata||{},isFavorite:!1,lastAccessed:sn(),createdAt:sn(),updatedAt:sn()},s=await j_(this.collectionsRef,r);return console.log("Collection created with ID:",s.id),this.clearCache(),{id:s.id,...r}}catch(r){throw console.error("Error creating collection:",r),r}}async getUserCollections(e,n={}){try{const{includeFavorites:r=!1,tags:s=[],sortBy:i="updatedAt",sortOrder:o="desc",limit:l=50}=n;let u=Qe(this.collectionsRef,pt("userId","==",e));s.length>0&&s.forEach(p=>{u=Qe(u,pt("tags","array-contains",p))}),r&&(u=Qe(u,pt("isFavorite","==",!0))),u=Qe(u,ch(i,o==="desc"?"desc":"asc")),u=Qe(u,uh(l));const h=await as(u),m=[];return h.forEach(p=>{m.push({id:p.id,...p.data()})}),m}catch(r){throw console.error("Error getting user collections:",r),r}}async getCollection(e,n){try{const r=ln(this.collectionsRef,e),s=await Wo(r);if(!s.exists())throw new Error(`Collection with ID ${e} not found`);const i={id:s.id,...s.data()};if(i.userId!==n&&!i.isPublic)throw new Error("Access denied to this collection");return await this.updateCollectionAccess(e),i}catch(r){throw console.error("Error getting collection:",r),r}}async updateCollection(e,n,r){try{const s=ln(this.collectionsRef,e),i=await Wo(s);if(!i.exists()||i.data().userId!==n)throw new Error("Collection not found or access denied");const o={...r,updatedAt:sn()};return await qo(s,o),this.clearCache(),await this.getCollection(e,n)}catch(s){throw console.error("Error updating collection:",s),s}}async deleteCollection(e,n){try{const r=O_(Cr),s=ln(this.collectionsRef,e),i=await Wo(s);if(!i.exists()||i.data().userId!==n)throw new Error("Collection not found or access denied");const o=Qe(this.vocabulariesRef,pt("collectionId","==",e));(await as(o)).forEach(m=>{r.delete(m.ref)});const u=Qe(this.progressRef,pt("collectionId","==",e));(await as(u)).forEach(m=>{r.delete(m.ref)}),r.delete(s);const h=i.data();if(h.fileUrl)try{const m=TD(kD,h.fileUrl);await xD(m)}catch(m){console.warn("Could not delete associated file:",m)}return await r.commit(),this.clearCache(),console.log("Collection and all associated data deleted successfully"),!0}catch(r){throw console.error("Error deleting collection:",r),r}}async toggleFavorite(e,n){try{const r=ln(this.collectionsRef,e),s=await Wo(r);if(!s.exists()||s.data().userId!==n)throw new Error("Collection not found or access denied");const i=s.data().isFavorite||!1;return await qo(r,{isFavorite:!i,updatedAt:sn()}),this.clearCache(),!i}catch(r){throw console.error("Error toggling favorite:",r),r}}async updateCollectionAccess(e){try{const n=ln(this.collectionsRef,e);await qo(n,{lastAccessed:sn()})}catch(n){console.warn("Could not update access time:",n)}}async addVocabulary(e,n,r){try{const s={collectionId:e,userId:n,word:r.word.toLowerCase().trim(),pronunciation:r.pronunciation||"",partOfSpeech:r.partOfSpeech||"",definitions:r.definitions||[],koreanTranslation:r.koreanTranslation||"",examples:r.examples||[],difficulty:r.difficulty||"medium",categories:r.categories||[],customFields:r.customFields||{},timesStudied:0,averageCorrectRate:0,masteryLevel:0,lastStudied:null,aiGenerated:r.aiGenerated||!1,createdAt:sn(),updatedAt:sn()},i=await j_(this.vocabulariesRef,s);return await this.updateCollectionStats(e),this.clearCache(),{id:i.id,...s}}catch(s){throw console.error("Error adding vocabulary:",s),s}}async addVocabulariesBatch(e,n,r){try{const s=O_(Cr),i=[];return r.forEach(o=>{const l=ln(this.vocabulariesRef),u={collectionId:e,userId:n,word:o.word.toLowerCase().trim(),pronunciation:o.pronunciation||"",partOfSpeech:o.partOfSpeech||"",definitions:o.definitions||[],koreanTranslation:o.koreanTranslation||"",examples:o.examples||[],difficulty:o.difficulty||"medium",categories:o.categories||[],customFields:o.customFields||{},timesStudied:0,averageCorrectRate:0,masteryLevel:0,lastStudied:null,aiGenerated:o.aiGenerated||!1,createdAt:sn(),updatedAt:sn()};s.set(l,u),i.push({id:l.id,...u})}),await s.commit(),await this.updateCollectionStats(e),this.clearCache(),console.log(`Added ${r.length} vocabulary items in batch`),i}catch(s){throw console.error("Error adding vocabularies in batch:",s),s}}async getCollectionVocabularies(e,n,r={}){try{const{page:s=1,limit:i=20,search:o=null,difficulty:l=null,category:u=null,sortBy:d="word",sortOrder:h="asc",lastDoc:m=null,onlyUnstudied:p=!1,masteryLevel:_=null}=r;let I=Qe(this.vocabulariesRef,pt("collectionId","==",e),pt("userId","==",n));l&&(I=Qe(I,pt("difficulty","==",l))),u&&(I=Qe(I,pt("categories","array-contains",u))),p&&(I=Qe(I,pt("timesStudied","==",0))),_!==null&&(I=Qe(I,pt("masteryLevel",">=",_))),I=Qe(I,ch(d,h==="desc"?"desc":"asc")),m&&(I=Qe(I,TO(m))),I=Qe(I,uh(i));const b=await as(I);let w=[],v=null;return b.forEach(x=>{var D,V;const k={id:x.id,...x.data()};if(o){const E=o.toLowerCase();(k.word.toLowerCase().includes(E)||((D=k.definitions)==null?void 0:D.some(T=>{var R;return(R=T.definition)==null?void 0:R.toLowerCase().includes(E)}))||((V=k.koreanTranslation)==null?void 0:V.toLowerCase().includes(E)))&&w.push(k)}else w.push(k);v=x}),{vocabularies:w,lastDoc:v,hasMore:w.length===i,currentPage:s,searchTerm:o}}catch(s){throw console.error("Error getting collection vocabularies:",s),s}}async updateCollectionStats(e){try{const n=Qe(this.vocabulariesRef,pt("collectionId","==",e)),r=await as(n);let s=0,i=0,o=0;r.forEach(u=>{const d=u.data();s++,d.timesStudied>0&&i++,d.masteryLevel>=80&&o++});const l=ln(this.collectionsRef,e);await qo(l,{wordCount:s,studiedCount:i,masteredCount:o,updatedAt:sn()})}catch(n){console.error("Error updating collection stats:",n)}}clearCache(){this.cache.clear()}async getCollectionPreview(e,n){var r,s;try{const i=await this.getCollection(e,n),o=Qe(i(this.db,"custom_vocabularies"),pt("collectionId","==",e),pt("userId","==",n),ch("createdAt","desc"),uh(6)),u=(await as(o)).docs.map(p=>p.data().word),d=Qe(i(this.db,"custom_vocabularies"),pt("collectionId","==",e),pt("userId","==",n)),h=await as(d),m=new Set;return h.forEach(p=>{const _=p.data();_.categories&&_.categories.forEach(I=>m.add(I))}),{wordCount:i.wordCount||0,studiedCount:i.studiedCount||0,masteredCount:i.masteredCount||0,categories:Array.from(m).slice(0,5),sampleWords:u.slice(0,4),lastModified:((r=i.updatedAt)==null?void 0:r.toDate())||((s=i.createdAt)==null?void 0:s.toDate()),difficulty:i.difficulty||"Mixed"}}catch(i){throw console.error("Error getting collection preview:",i),i}}async getCollectionStatistics(e,n){try{const r=await this.getCollection(e,n),s=await this.getCollectionVocabularies(e,n,{limit:1e3}),i={totalWords:r.wordCount,studiedWords:r.studiedCount,masteredWords:r.masteredCount,averageMastery:0,difficultyCounts:{},categoryCounts:{},recentActivity:[]};let o=0;return s.vocabularies.forEach(l=>{i.difficultyCounts[l.difficulty]=(i.difficultyCounts[l.difficulty]||0)+1,l.categories&&l.categories.forEach(u=>{i.categoryCounts[u]=(i.categoryCounts[u]||0)+1}),o+=l.masteryLevel||0}),i.averageMastery=s.vocabularies.length>0?o/s.vocabularies.length:0,i}catch(r){throw console.error("Error getting collection statistics:",r),r}}}const Mt=new DL;const LL=()=>{const{user:t}=Fn(),[e,n]=P.useState([]),[r,s]=P.useState({}),[i,o]=P.useState(null),[l,u]=P.useState(!1),[d,h]=P.useState(!1),[m,p]=P.useState(0),_=x=>{console.log("Files selected:",x),n(k=>[...k,...x])},I=x=>{console.log("File removed:",x),n(k=>k.filter(D=>D.id!==x))},A=(x,k)=>{console.log(`Upload progress for ${x}: ${k}%`),s(D=>({...D,[x]:k}))},b=async x=>{var k;console.log("Upload completed:",x);try{console.log(`Processing file: ${x.name}`);const D=await OL.parseFile(x.file,{progressCallback:V=>{console.log(`Parsing progress: ${V.stage} - ${V.progress}%`),p(V.progress)}});if(D.success)o({fileName:D.fileName,totalWords:D.recordCount,sampleWords:D.sampleData.map(V=>{var E,y;return{word:V.word,definition:((y=(E=V.definitions)==null?void 0:E[0])==null?void 0:y.definition)||V.definition||"No definition"}}),detectedColumns:D.detectedColumns,status:"ready_for_import",fileType:D.fileType,originalFile:x,parsedData:D.data}),u(!0);else{console.error("File parsing failed:",D.error);let V=D.error;(k=D.fileName)!=null&&k.toLowerCase().endsWith(".pdf")&&(V=`PDF    : ${D.error}
          
  :
 CSV    ( )
 Excel (.xlsx)    
 Word    CSV 
  PDF-to-CSV  

PDF         .`),w({[x.name]:[V]});return}}catch(D){console.error("Error processing file:",D),w({[x.name]:[D.message]})}},w=x=>{console.error("Upload errors:",x)},v=async()=>{if(!i||!(t!=null&&t.uid)){console.error("No parsed data or user not authenticated");return}h(!0),p(0);try{const x=i.fileName.replace(/\.[^/.]+$/,""),k=await Mt.createCollection({name:x,description:`Imported from ${i.fileName}`,wordCount:i.totalWords,userId:t.uid,createdAt:new Date,tags:[i.fileType]});console.log("Collection created:",k.id);const D=i.parsedData.map(y=>({...y,collectionId:k.id,userId:t.uid,createdAt:new Date,isCustom:!0}));let V=0;const E=10;for(let y=0;y<D.length;y+=E){const T=D.slice(y,y+E);await Promise.all(T.map(j=>Mt.addVocabularyItem(j))),V+=T.length;const R=Math.round(V/D.length*100);p(R),console.log(`Imported ${V}/${D.length} items (${R}%)`)}console.log("Import completed successfully"),n([]),o(null),u(!1),h(!1),p(0),alert(`Successfully imported ${D.length} vocabulary items!`)}catch(x){console.error("Import failed:",x),h(!1),alert("Import failed: "+x.message)}};return a.jsx("div",{className:"custom-vocabulary",children:a.jsxs("div",{className:"custom-vocabulary-container",children:[a.jsx("header",{className:"page-header",children:a.jsx("div",{className:"header-content",children:a.jsxs("div",{className:"header-title",children:[a.jsx(qn,{className:"header-icon"}),a.jsxs("div",{children:[a.jsx("h1",{children:"Custom Vocabulary Management"}),a.jsx("p",{children:"Upload and manage your own vocabulary collections"})]})]})})}),l?a.jsx("section",{className:"preview-section",children:a.jsxs("div",{className:"preview-container",children:[a.jsxs("div",{className:"preview-header",children:[a.jsx("h2",{children:"Preview Imported Data"}),a.jsx("p",{children:"Review the detected vocabulary items before importing"})]}),a.jsxs("div",{className:"preview-stats",children:[a.jsxs("div",{className:"stat",children:[a.jsx("span",{className:"stat-label",children:"File:"}),a.jsx("span",{className:"stat-value",children:i.fileName})]}),a.jsxs("div",{className:"stat",children:[a.jsx("span",{className:"stat-label",children:"Total Words:"}),a.jsx("span",{className:"stat-value",children:i.totalWords})]}),a.jsxs("div",{className:"stat",children:[a.jsx("span",{className:"stat-label",children:"File Type:"}),a.jsx("span",{className:"stat-value",children:i.fileType.toUpperCase()})]})]}),a.jsxs("div",{className:"preview-samples",children:[a.jsx("h3",{children:"Sample Words"}),a.jsx("div",{className:"sample-grid",children:i.sampleWords.map((x,k)=>a.jsxs("div",{className:"sample-card",children:[a.jsx("div",{className:"sample-word",children:x.word}),a.jsx("div",{className:"sample-definition",children:x.definition})]},k))})]}),a.jsxs("div",{className:"preview-actions",children:[a.jsx("button",{className:"btn btn-secondary",onClick:()=>{u(!1),o(null)},children:"Back to Upload"}),a.jsx("button",{className:"btn btn-primary",onClick:v,disabled:d,children:d?"Importing...":"Import to Database"})]}),d&&a.jsxs("div",{className:"import-progress",children:[a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill",style:{width:`${m}%`}})}),a.jsxs("p",{children:["Importing... ",m,"%"]})]})]})}):a.jsxs(a.Fragment,{children:[a.jsx("section",{className:"upload-section",children:a.jsxs("div",{className:"upload-container",children:[a.jsxs("div",{className:"upload-header",children:[a.jsx(_T,{className:"upload-icon"}),a.jsx("h2",{children:"Upload Vocabulary Files"}),a.jsx("p",{children:"Support for CSV, Excel, JSON, and PDF files"})]}),a.jsx(wT,{onFileSelect:_,onFileRemove:I,onUploadProgress:A,onUploadComplete:b,onUploadError:w,acceptedTypes:[".csv",".xlsx",".xls",".json",".pdf"],maxFileSize:50*1024*1024,multiple:!1,className:"custom-upload"})]})}),a.jsxs("section",{className:"quick-start",children:[a.jsx("h3",{children:"Quick Start Guide"}),a.jsxs("div",{className:"guide-steps",children:[a.jsxs("div",{className:"step",children:[a.jsx("div",{className:"step-number",children:"1"}),a.jsxs("div",{className:"step-content",children:[a.jsx("h4",{children:"Prepare Your File"}),a.jsx("p",{children:"Create a CSV, Excel, JSON, or PDF file with your vocabulary words and definitions."})]})]}),a.jsxs("div",{className:"step",children:[a.jsx("div",{className:"step-number",children:"2"}),a.jsxs("div",{className:"step-content",children:[a.jsx("h4",{children:"Upload & Preview"}),a.jsx("p",{children:"Drag and drop your file above, then review the detected words and columns."})]})]}),a.jsxs("div",{className:"step",children:[a.jsx("div",{className:"step-number",children:"3"}),a.jsxs("div",{className:"step-content",children:[a.jsx("h4",{children:"Import & Study"}),a.jsx("p",{children:"Import your words into a collection and start studying with our quiz system."})]})]})]})]}),a.jsxs("section",{className:"format-examples",children:[a.jsx("h3",{children:"Supported File Formats"}),a.jsxs("div",{className:"format-grid",children:[a.jsxs("div",{className:"format-card",children:[a.jsx("h4",{children:"CSV Format"}),a.jsx("pre",{children:`word,definition,example
abandon,to leave behind,He decided to abandon the project
abstract,theoretical concept,The idea was too abstract`})]}),a.jsxs("div",{className:"format-card",children:[a.jsx("h4",{children:"JSON Format"}),a.jsx("pre",{children:`[
  {
    "word": "abandon", 
    "definition": "to leave behind",
    "example": "He decided to abandon the project"
  }
]`})]}),a.jsxs("div",{className:"format-card",children:[a.jsx("h4",{children:"PDF Format"}),a.jsx("p",{children:"Upload PDF files with vocabulary lists. Our system will automatically extract words and definitions using advanced OCR technology."})]})]})]})]})]})})};class VL{constructor(){this.apiKey="your_openai_api_key_here",this.model="gpt-3.5-turbo",this.maxTokens=parseInt("150")||150,this.baseURL="https://api.openai.com/v1/chat/completions",this.rateLimit={requestsPerMinute:10,requests:[],getWaitTime:()=>this.calculateWaitTime()},this.cache=new Map,this.cacheMaxSize=500,this.cacheExpiry=24*60*60*1e3,this.initializeCacheCleanup()}calculateWaitTime(){const e=Date.now(),n=e-6e4;return this.rateLimit.requests=this.rateLimit.requests.filter(r=>r>n),this.rateLimit.requests.length>=this.rateLimit.requestsPerMinute?Math.min(...this.rateLimit.requests)+6e4-e:0}addRequestToRateLimit(){this.rateLimit.requests.push(Date.now())}generateCacheKey(e,n,r={}){const s=`${e.toLowerCase()}_${n.substring(0,50)}`,i=JSON.stringify(r);return`${s}_${btoa(i)}`}getCachedExample(e){const n=this.cache.get(e);if(!n)return null;const{data:r,timestamp:s}=n;return Date.now()-s>this.cacheExpiry?(this.cache.delete(e),null):r}setCachedExample(e,n){if(this.cache.size>=this.cacheMaxSize){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,{data:n,timestamp:Date.now()})}initializeCacheCleanup(){setInterval(()=>{const e=Date.now();for(const[n,{timestamp:r}]of this.cache.entries())e-r>this.cacheExpiry&&this.cache.delete(n)},60*60*1e3)}generatePrompt(e,n,r={}){const{difficulty:s="intermediate",context:i="academic",language:o="english",includeTranslation:l=!1}=r;return`Generate 2-3 clear, contextual example sentences for the vocabulary word "${e}".

Word: ${e}
Definition: ${n}
Difficulty Level: ${s}
Context: ${i}

Requirements:
1. Each sentence should clearly demonstrate the meaning of "${e}"
2. Use ${s}-level vocabulary and sentence structure
3. Make sentences relevant to ${i} contexts
4. Each sentence should be 10-20 words long
5. Separate each sentence with a line break

Format your response as:
1. [First example sentence]
2. [Second example sentence]
${l?"3. [Third example sentence]":""}

Focus on clarity and educational value. Avoid complex or ambiguous usage.`}async makeAPIRequest(e){var r;const n=await fetch(this.baseURL,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:this.model,messages:[{role:"system",content:"You are a helpful English vocabulary tutor. Generate clear, educational example sentences that help students understand word usage."},{role:"user",content:e}],max_tokens:this.maxTokens,temperature:.7,top_p:1,frequency_penalty:.5,presence_penalty:.3})});if(!n.ok){const s=await n.json().catch(()=>({}));throw new Error(`OpenAI API Error: ${n.status} - ${((r=s.error)==null?void 0:r.message)||"Unknown error"}`)}return n.json()}parseResponse(e){var n,r;try{const s=((r=(n=e.choices[0])==null?void 0:n.message)==null?void 0:r.content)||"",i=s.split(`
`).map(o=>o.trim()).filter(o=>o.match(/^\d+\./)).map(o=>o.replace(/^\d+\.\s*/,"").trim()).filter(o=>o.length>0);if(i.length===0){const o=s.split(/[.!?]/).map(l=>l.trim()).filter(l=>l.length>10).slice(0,3);return o.length>0?o:null}return i}catch(s){return console.error("Error parsing OpenAI response:",s),null}}generateFallbackExamples(e,n){return[`The word "${e}" means ${n.toLowerCase()}.`,`In this context, "${e}" refers to ${n.toLowerCase()}.`,`We can understand "${e}" as ${n.toLowerCase()}.`].slice(0,2)}async generateExampleSentences(e,n,r={}){try{if(!e||!n)throw new Error("Word and definition are required");if(!this.apiKey||this.apiKey==="your_openai_api_key_here")return console.warn("OpenAI API key not configured, using fallback examples"),{success:!0,examples:this.generateFallbackExamples(e,n),source:"fallback",cached:!1};const s=this.generateCacheKey(e,n,r),i=this.getCachedExample(s);if(i)return{success:!0,examples:i,source:"cache",cached:!0};const o=this.rateLimit.getWaitTime();if(o>0)throw new Error(`Rate limit exceeded. Please wait ${Math.ceil(o/1e3)} seconds.`);const l=this.generatePrompt(e,n,r);this.addRequestToRateLimit();const u=await this.makeAPIRequest(l),d=this.parseResponse(u);if(!d||d.length===0)throw new Error("Failed to generate valid examples");return this.setCachedExample(s,d),{success:!0,examples:d,source:"openai",cached:!1,usage:u.usage}}catch(s){return console.error("Error generating example sentences:",s),{success:!1,examples:this.generateFallbackExamples(e,n),source:"fallback",error:s.message,cached:!1}}}async regenerateExampleSentences(e,n,r={}){const s=this.generateCacheKey(e,n,r);return this.cache.delete(s),this.generateExampleSentences(e,n,r)}getServiceStats(){return{cacheSize:this.cache.size,maxCacheSize:this.cacheMaxSize,requestsInLastMinute:this.rateLimit.requests.length,rateLimitPerMinute:this.rateLimit.requestsPerMinute,apiKeyConfigured:!!(this.apiKey&&this.apiKey!=="your_openai_api_key_here")}}clearCache(){return this.cache.clear(),{message:"Cache cleared successfully"}}}const mi=new VL;const ET=({isOpen:t,onClose:e,item:n=null,onSave:r,onDelete:s,isLoading:i=!1})=>{const[o,l]=P.useState({word:"",definitions:[{definition:""}],pronunciation:"",partOfSpeech:"",koreanTranslation:"",examples:[{example:""}],difficulty:"medium",categories:[],customFields:{}}),[u,d]=P.useState({}),[h,m]=P.useState(!1),[p,_]=P.useState(!1);P.useEffect(()=>{var E,y;l(n?{word:n.word||"",definitions:((E=n.definitions)==null?void 0:E.length)>0?n.definitions:[{definition:""}],pronunciation:n.pronunciation||"",partOfSpeech:n.partOfSpeech||"",koreanTranslation:n.koreanTranslation||"",examples:((y=n.examples)==null?void 0:y.length)>0?n.examples:[{example:""}],difficulty:n.difficulty||"medium",categories:n.categories||[],customFields:n.customFields||{}}:{word:"",definitions:[{definition:""}],pronunciation:"",partOfSpeech:"",koreanTranslation:"",examples:[{example:""}],difficulty:"medium",categories:[],customFields:{}}),d({})},[n]);const I=(E,y)=>{l(T=>({...T,[E]:y})),u[E]&&d(T=>({...T,[E]:null}))},A=(E,y,T)=>{l(R=>({...R,[E]:R[E].map((j,O)=>O===y?{...j,[E.slice(0,-1)]:T}:j)}))},b=E=>{const y=E.slice(0,-1);l(T=>({...T,[E]:[...T[E],{[y]:""}]}))},w=(E,y)=>{o[E].length>1&&l(T=>({...T,[E]:T[E].filter((R,j)=>j!==y)}))},v=E=>{const y=E.split(",").map(T=>T.trim()).filter(T=>T);I("categories",y)},x=async(E=!1)=>{var y,T;if(!o.word.trim()){d(R=>({...R,aiGeneration:"Please enter a word first"}));return}if(!((T=(y=o.definitions[0])==null?void 0:y.definition)!=null&&T.trim())){d(R=>({...R,aiGeneration:"Please add at least one definition first"}));return}_(!0),d(R=>({...R,aiGeneration:null}));try{const R={difficulty:o.difficulty,context:"academic",language:"english"},j=E?await mi.regenerateExampleSentences(o.word,o.definitions[0].definition,R):await mi.generateExampleSentences(o.word,o.definitions[0].definition,R);if(j.examples&&j.examples.length>0){const O=j.examples.map(ee=>({example:ee}));l(ee=>({...ee,examples:O}));const N=j.source==="cache"?" (from cache)":j.source==="fallback"?" (fallback examples)":"";console.log(`Generated ${j.examples.length} examples${N}`)}else d(O=>({...O,aiGeneration:"Failed to generate examples. Please try again or add examples manually."}))}catch(R){console.error("Error generating AI examples:",R),d(j=>({...j,aiGeneration:`Failed to generate examples: ${R.message}`}))}finally{_(!1)}},k=()=>{var y,T;const E={};return o.word.trim()||(E.word="Word is required"),(T=(y=o.definitions[0])==null?void 0:y.definition)!=null&&T.trim()||(E.definitions="At least one definition is required"),d(E),Object.keys(E).length===0},D=async E=>{if(E.preventDefault(),!!k()){m(!0);try{const y={...o,word:o.word.trim().toLowerCase(),definitions:o.definitions.filter(T=>{var R;return(R=T.definition)==null?void 0:R.trim()}),examples:o.examples.filter(T=>{var R;return(R=T.example)==null?void 0:R.trim()}),categories:o.categories.filter(T=>T.trim())};await r(y),e()}catch(y){console.error("Error saving vocabulary item:",y),d({submit:"Failed to save vocabulary item. Please try again."})}finally{m(!1)}}},V=async()=>{if(!(!(n!=null&&n.id)||!window.confirm(`Are you sure you want to delete "${n.word}"? This action cannot be undone.`))){m(!0);try{await s(n.id),e()}catch(y){console.error("Error deleting vocabulary item:",y),d({submit:"Failed to delete vocabulary item. Please try again."})}finally{m(!1)}}};return t?a.jsx("div",{className:"modal-overlay",onClick:e,children:a.jsxs("div",{className:"vocabulary-editor-modal",onClick:E=>E.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:n?"Edit Vocabulary Item":"Add New Vocabulary Item"}),a.jsx("button",{className:"close-btn",onClick:e,children:a.jsx(_s,{size:20})})]}),a.jsxs("form",{className:"vocabulary-form",onSubmit:D,children:[a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"word",children:"Word *"}),a.jsx("input",{id:"word",type:"text",value:o.word,onChange:E=>I("word",E.target.value),className:u.word?"error":"",placeholder:"Enter the vocabulary word",disabled:h}),u.word&&a.jsx("span",{className:"error-text",children:u.word})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"pronunciation",children:"Pronunciation"}),a.jsx("input",{id:"pronunciation",type:"text",value:o.pronunciation,onChange:E=>I("pronunciation",E.target.value),placeholder:"e.g., /prnnsien/",disabled:h})]})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"partOfSpeech",children:"Part of Speech"}),a.jsxs("select",{id:"partOfSpeech",value:o.partOfSpeech,onChange:E=>I("partOfSpeech",E.target.value),disabled:h,children:[a.jsx("option",{value:"",children:"Select part of speech"}),a.jsx("option",{value:"noun",children:"Noun"}),a.jsx("option",{value:"verb",children:"Verb"}),a.jsx("option",{value:"adjective",children:"Adjective"}),a.jsx("option",{value:"adverb",children:"Adverb"}),a.jsx("option",{value:"preposition",children:"Preposition"}),a.jsx("option",{value:"conjunction",children:"Conjunction"}),a.jsx("option",{value:"interjection",children:"Interjection"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"difficulty",children:"Difficulty"}),a.jsxs("select",{id:"difficulty",value:o.difficulty,onChange:E=>I("difficulty",E.target.value),disabled:h,children:[a.jsx("option",{value:"easy",children:"Easy"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"hard",children:"Hard"})]})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"koreanTranslation",children:"Korean Translation"}),a.jsx("input",{id:"koreanTranslation",type:"text",value:o.koreanTranslation,onChange:E=>I("koreanTranslation",E.target.value),placeholder:" ",disabled:h})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Definitions *"}),o.definitions.map((E,y)=>a.jsxs("div",{className:"array-item",children:[a.jsx("input",{type:"text",value:E.definition,onChange:T=>A("definitions",y,T.target.value),placeholder:`Definition ${y+1}`,className:u.definitions?"error":"",disabled:h}),o.definitions.length>1&&a.jsx("button",{type:"button",className:"remove-btn",onClick:()=>w("definitions",y),disabled:h,children:a.jsx(_s,{size:16})})]},y)),a.jsxs("button",{type:"button",className:"add-btn",onClick:()=>b("definitions"),disabled:h,children:[a.jsx(pi,{size:16}),"Add Definition"]}),u.definitions&&a.jsx("span",{className:"error-text",children:u.definitions})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("div",{className:"form-label-with-actions",children:[a.jsx("label",{children:"Examples"}),a.jsxs("div",{className:"ai-actions",children:[a.jsxs("button",{type:"button",className:"btn btn-ai",onClick:()=>x(!1),disabled:h||p,title:"Generate examples using AI",children:[a.jsx(TL,{size:14}),p?"Generating...":"AI Generate"]}),o.examples.some(E=>{var y;return(y=E.example)==null?void 0:y.trim()})&&a.jsxs("button",{type:"button",className:"btn btn-ai btn-outline",onClick:()=>x(!0),disabled:h||p,title:"Regenerate examples using AI",children:[a.jsx(yT,{size:14}),"Regenerate"]})]})]}),u.aiGeneration&&a.jsx("div",{className:"ai-error-message",children:u.aiGeneration}),o.examples.map((E,y)=>a.jsxs("div",{className:"array-item",children:[a.jsx("input",{type:"text",value:E.example,onChange:T=>A("examples",y,T.target.value),placeholder:`Example sentence ${y+1}`,disabled:h}),o.examples.length>1&&a.jsx("button",{type:"button",className:"remove-btn",onClick:()=>w("examples",y),disabled:h,children:a.jsx(_s,{size:16})})]},y)),a.jsxs("button",{type:"button",className:"add-btn",onClick:()=>b("examples"),disabled:h,children:[a.jsx(pi,{size:16}),"Add Example"]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"categories",children:"Categories"}),a.jsx("input",{id:"categories",type:"text",value:o.categories.join(", "),onChange:E=>v(E.target.value),placeholder:"Enter categories separated by commas",disabled:h}),a.jsx("small",{className:"form-help",children:"Separate multiple categories with commas"})]}),u.submit&&a.jsx("div",{className:"error-message",children:u.submit}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("div",{className:"action-group",children:n&&a.jsxs("button",{type:"button",className:"btn btn-danger",onClick:V,disabled:h,children:[a.jsx(_c,{size:16}),"Delete"]})}),a.jsxs("div",{className:"action-group",children:[a.jsx("button",{type:"button",className:"btn btn-outline",onClick:e,disabled:h,children:"Cancel"}),a.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:h,children:[a.jsx(_L,{size:16}),h?"Saving...":"Save"]})]})]})]})]})}):null};ET.propTypes={isOpen:C.bool.isRequired,onClose:C.func.isRequired,item:C.object,onSave:C.func.isRequired,onDelete:C.func.isRequired,isLoading:C.bool};const xT=({isOpen:t,onClose:e})=>{const[n,r]=P.useState(""),[s,i]=P.useState(!1),[o,l]=P.useState("eloquent"),[u,d]=P.useState("having or showing the ability to use language clearly and effectively"),[h,m]=P.useState(!1),[p,_]=P.useState(null),[I,A]=P.useState(null);P.useEffect(()=>{t&&A(mi.getServiceStats())},[t]);const b=async()=>{if(!o.trim()||!u.trim()){_({success:!1,message:"Please provide both a test word and definition"});return}m(!0),_(null);try{const v=await mi.generateExampleSentences(o,u,{difficulty:"medium"});_({success:v.success,message:v.success?`Generated ${v.examples.length} examples (Source: ${v.source})`:`Failed: ${v.error}`,examples:v.examples,source:v.source})}catch(v){_({success:!1,message:`Test failed: ${v.message}`})}finally{m(!1)}},w=()=>{const v=mi.clearCache();A(mi.getServiceStats()),alert(v.message)};return t?a.jsx("div",{className:"modal-overlay",onClick:e,children:a.jsxs("div",{className:"openai-settings-modal",onClick:v=>v.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h2",{children:[a.jsx(vc,{size:20}),"OpenAI Settings"]}),a.jsx("button",{className:"close-btn",onClick:e,children:a.jsx(_s,{size:20})})]}),a.jsxs("div",{className:"settings-content",children:[a.jsxs("div",{className:"settings-section",children:[a.jsxs("h3",{children:[a.jsx(mL,{size:16}),"API Configuration"]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"apiKey",children:"OpenAI API Key"}),a.jsxs("div",{className:"api-key-input",children:[a.jsx("input",{id:"apiKey",type:s?"text":"password",value:n,onChange:v=>r(v.target.value),placeholder:"sk-proj-...",className:"api-key-field"}),a.jsx("button",{type:"button",className:"btn-icon",onClick:()=>i(!s),title:s?"Hide API key":"Show API key",children:s?a.jsx(cL,{size:16}):a.jsx(gT,{size:16})})]}),a.jsxs("div",{className:"form-help",children:[a.jsxs("p",{children:["Get your API key from ",a.jsxs("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",children:["OpenAI Platform ",a.jsx(aL,{size:12})]})]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Note:"})," API key changes require a page refresh to take effect."]})]})]})]}),a.jsxs("div",{className:"settings-section",children:[a.jsx("h3",{children:"Service Statistics"}),I&&a.jsxs("div",{className:"stats-grid",children:[a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:"API Key Status:"}),a.jsx("span",{className:`stat-value ${I.apiKeyConfigured?"success":"error"}`,children:I.apiKeyConfigured?"Configured":"Not Configured"})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:"Cache Size:"}),a.jsxs("span",{className:"stat-value",children:[I.cacheSize," / ",I.maxCacheSize]})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"stat-label",children:"Requests (Last Minute):"}),a.jsxs("span",{className:"stat-value",children:[I.requestsInLastMinute," / ",I.rateLimitPerMinute]})]})]}),a.jsx("button",{type:"button",className:"btn btn-outline",onClick:w,children:"Clear Cache"})]}),a.jsxs("div",{className:"settings-section",children:[a.jsx("h3",{children:"Test Connection"}),a.jsxs("div",{className:"test-inputs",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"testWord",children:"Test Word"}),a.jsx("input",{id:"testWord",type:"text",value:o,onChange:v=>l(v.target.value),placeholder:"Enter a word to test"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"testDefinition",children:"Test Definition"}),a.jsx("input",{id:"testDefinition",type:"text",value:u,onChange:v=>d(v.target.value),placeholder:"Enter the definition"})]})]}),a.jsx("button",{type:"button",className:"btn btn-primary",onClick:b,disabled:h,children:h?"Testing...":"Test Generation"}),p&&a.jsxs("div",{className:`test-result ${p.success?"success":"error"}`,children:[a.jsxs("div",{className:"result-header",children:[p.success?a.jsx(XD,{size:16}):a.jsx(_s,{size:16}),a.jsx("span",{children:p.message})]}),p.examples&&p.examples.length>0&&a.jsxs("div",{className:"result-examples",children:[a.jsx("h4",{children:"Generated Examples:"}),a.jsx("ul",{children:p.examples.map((v,x)=>a.jsx("li",{children:v},x))})]})]})]}),a.jsxs("div",{className:"settings-section",children:[a.jsx("h3",{children:"Usage Information"}),a.jsxs("div",{className:"usage-info",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Rate Limiting:"})," 10 requests per minute"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Caching:"})," Generated examples are cached for 24 hours"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Fallback:"})," Manual examples used when API is unavailable"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Cost:"})," Approximately $0.001-0.002 per example generation"]})]})]})]}),a.jsx("div",{className:"modal-actions",children:a.jsx("button",{type:"button",className:"btn btn-primary",onClick:e,children:"Close"})})]})}):null};xT.propTypes={isOpen:C.bool.isRequired,onClose:C.func.isRequired};const TT=({currentDatabase:t,onDatabaseChange:e,onClose:n,isOpen:r=!1,userId:s=null})=>{const[i,o]=P.useState([]),[l,u]=P.useState([]),[d,h]=P.useState([]),[m,p]=P.useState(""),[_,I]=P.useState(null),[A,b]=P.useState(null),[w,v]=P.useState(!1),[x,k]=P.useState(null),D={id:"system",type:"system",name:"System SAT Vocabulary",description:"Official SAT vocabulary database with 3000+ words",wordCount:3247,categories:["Academic","Advanced","Literary"],difficulty:"Mixed",createdAt:new Date("2024-01-01"),lastUsed:null,isFavorite:!1};P.useEffect(()=>{r&&V()},[r]),P.useEffect(()=>{t&&I(t)},[t]);const V=async()=>{try{if(v(!0),k(null),s){const M=await Mt.getUserCollections(s);o(M)}else o([]);E()}catch(M){console.error("Error loading database data:",M),k("Failed to load databases")}finally{v(!1)}},E=()=>{try{const M=JSON.parse(localStorage.getItem("vocabularyFavorites")||"[]"),G=JSON.parse(localStorage.getItem("vocabularyRecent")||"[]");u(M),h(G)}catch(M){console.error("Error loading user preferences:",M)}},y=(M,G)=>{try{localStorage.setItem("vocabularyFavorites",JSON.stringify(M||l)),localStorage.setItem("vocabularyRecent",JSON.stringify(G||d))}catch(ie){console.error("Error saving user preferences:",ie)}},T=M=>{const G=l.includes(M)?l.filter(ie=>ie!==M):[...l,M];u(G),y(G,d)},R=M=>{const G=[M.id,...d.filter(ie=>ie!==M.id)].slice(0,10);h(G),y(l,G)},j=async M=>{try{return M.type==="system"?{wordCount:M.wordCount,categories:M.categories,difficulty:M.difficulty,sampleWords:["eloquent","ubiquitous","pragmatic","audacious"],lastModified:M.createdAt,studiedCount:0,masteredCount:0}:await Mt.getCollectionPreview(M.id,s)}catch(G){return console.error("Error getting preview data:",G),null}},O=async M=>{I(M);const G=await j(M);b(G),R(M)},N=()=>{_&&e&&(e(_),n==null||n())},ee=()=>{const M=[D,...i];return m?M.filter(G=>{var ie;return G.name.toLowerCase().includes(m.toLowerCase())||((ie=G.description)==null?void 0:ie.toLowerCase().includes(m.toLowerCase()))}):M},z=()=>ee().filter(G=>l.includes(G.id)),H=()=>{const M=ee();return d.map(G=>M.find(ie=>ie.id===G)).filter(Boolean).slice(0,5)},W=M=>M?new Date(M).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Unknown",U=(M,G=!0)=>a.jsx("div",{className:`database-item ${(_==null?void 0:_.id)===M.id?"selected":""}`,onClick:()=>O(M),children:a.jsxs("div",{className:"database-info",children:[a.jsxs("div",{className:"database-header",children:[a.jsx("div",{className:"database-icon",children:M.type==="system"?a.jsx($_,{size:16}):a.jsx(qn,{size:16})}),a.jsx("h4",{className:"database-name",children:M.name}),G&&a.jsx("button",{className:"favorite-btn",onClick:ie=>{ie.stopPropagation(),T(M.id)},children:l.includes(M.id)?a.jsx(Vf,{size:14,className:"favorited"}):a.jsx(vT,{size:14})})]}),a.jsx("p",{className:"database-description",children:M.description}),a.jsxs("div",{className:"database-stats",children:[a.jsxs("span",{className:"stat",children:[a.jsx(yc,{size:12}),M.wordCount||0," words"]}),M.type!=="system"&&M.studiedCount!==void 0&&a.jsxs("span",{className:"stat",children:[a.jsx(Mf,{size:12}),M.studiedCount||0," studied"]}),a.jsxs("span",{className:"stat",children:[a.jsx(U_,{size:12}),W(M.lastUsed||M.createdAt)]})]}),M.type==="system"&&a.jsx("div",{className:"database-badge system",children:"Official"}),M.type!=="system"&&a.jsx("div",{className:"database-badge custom",children:"Custom"})]})},M.id);return r?a.jsx("div",{className:"modal-overlay",onClick:n,children:a.jsxs("div",{className:"database-selector-modal",onClick:M=>M.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h2",{children:[a.jsx(qn,{size:20}),"Select Vocabulary Database"]}),a.jsx("button",{className:"close-btn",onClick:n,children:a.jsx(_s,{size:20})})]}),a.jsxs("div",{className:"selector-content",children:[a.jsxs("div",{className:"selector-left",children:[a.jsx("div",{className:"search-section",children:a.jsxs("div",{className:"search-input",children:[a.jsx(Lf,{size:16}),a.jsx("input",{type:"text",placeholder:"Search databases...",value:m,onChange:M=>p(M.target.value)})]})}),w&&a.jsxs("div",{className:"loading-section",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Loading databases..."})]}),x&&a.jsxs("div",{className:"error-section",children:[a.jsx("p",{children:x}),a.jsx("button",{className:"btn btn-sm",onClick:V,children:"Retry"})]}),!w&&!x&&z().length>0&&a.jsxs("div",{className:"database-section",children:[a.jsxs("h3",{children:[a.jsx(Vf,{size:16}),"Favorites"]}),a.jsx("div",{className:"database-list",children:z().map(M=>U(M,!1))})]}),!w&&!x&&H().length>0&&a.jsxs("div",{className:"database-section",children:[a.jsxs("h3",{children:[a.jsx(U_,{size:16}),"Recently Used"]}),a.jsx("div",{className:"database-list",children:H().map(M=>U(M))})]}),!w&&!x&&a.jsxs("div",{className:"database-section",children:[a.jsxs("h3",{children:[a.jsx(qn,{size:16}),"All Databases"]}),a.jsx("div",{className:"database-list",children:ee().map(M=>U(M))})]}),!w&&!x&&ee().length===0&&a.jsxs("div",{className:"empty-state",children:[a.jsx(qn,{size:48}),a.jsx("h3",{children:"No Databases Found"}),a.jsx("p",{children:"No databases match your search criteria."})]})]}),a.jsx("div",{className:"selector-right",children:_?a.jsxs("div",{className:"preview-panel",children:[a.jsx("h3",{children:"Preview"}),a.jsxs("div",{className:"preview-header",children:[a.jsx("div",{className:"preview-icon",children:_.type==="system"?a.jsx($_,{size:24}):a.jsx(qn,{size:24})}),a.jsxs("div",{className:"preview-info",children:[a.jsx("h4",{children:_.name}),a.jsx("p",{children:_.description})]})]}),A&&a.jsxs("div",{className:"preview-stats",children:[a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"label",children:"Total Words:"}),a.jsx("span",{className:"value",children:A.wordCount||0})]}),A.studiedCount!==void 0&&a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"label",children:"Studied:"}),a.jsx("span",{className:"value",children:A.studiedCount})]}),A.masteredCount!==void 0&&a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"label",children:"Mastered:"}),a.jsx("span",{className:"value",children:A.masteredCount})]}),a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"label",children:"Last Modified:"}),a.jsx("span",{className:"value",children:W(A.lastModified)})]}),A.categories&&a.jsxs("div",{className:"stat-item",children:[a.jsx("span",{className:"label",children:"Categories:"}),a.jsx("span",{className:"value",children:A.categories.join(", ")})]}),A.sampleWords&&a.jsxs("div",{className:"preview-samples",children:[a.jsx("h5",{children:"Sample Words:"}),a.jsx("div",{className:"sample-words",children:A.sampleWords.slice(0,4).map((M,G)=>a.jsx("span",{className:"sample-word",children:M},G))})]})]})]}):a.jsxs("div",{className:"preview-placeholder",children:[a.jsx(qn,{size:48}),a.jsx("h4",{children:"Select a Database"}),a.jsx("p",{children:"Choose a database to see preview information"})]})})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",className:"btn btn-outline",onClick:n,children:"Cancel"}),a.jsx("button",{type:"button",className:"btn btn-primary",onClick:N,disabled:!_,children:"Select Database"})]})]})}):null};TT.propTypes={currentDatabase:C.object,onDatabaseChange:C.func.isRequired,onClose:C.func.isRequired,isOpen:C.bool,userId:C.string};const z_=()=>{const{user:t}=Fn(),e=Os(),[n,r]=P.useState([]),[s,i]=P.useState(null),[o,l]=P.useState([]),[u,d]=P.useState(!0),[h,m]=P.useState(null),[p,_]=P.useState("collections"),[I,A]=P.useState(""),[b,w]=P.useState({tags:[],difficulty:"",sortBy:"updatedAt",sortOrder:"desc"}),[v,x]=P.useState([]),[k,D]=P.useState(!1),[V,E]=P.useState(!1),[y,T]=P.useState(null),[R,j]=P.useState(!1),[O,N]=P.useState(!1),[ee,z]=P.useState(!1),[H,W]=P.useState({id:"system",type:"system",name:"System SAT Vocabulary",description:"Official SAT vocabulary database with 3000+ words"}),[U,M]=P.useState(1),[G,ie]=P.useState(20),[me,Ee]=P.useState(0);P.useEffect(()=>{t!=null&&t.uid&&Ct()},[t]);const Ct=async()=>{try{d(!0),m(null);const K=await Mt.getUserCollections(t.uid,{sortBy:b.sortBy,sortOrder:b.sortOrder,limit:50});r(K)}catch(K){console.error("Error loading collections:",K),m("Failed to load collections. Please try again.")}finally{d(!1)}},Ke=async(K,ae=1)=>{try{d(!0);const ue=await Mt.getCollectionVocabularies(K,t.uid,{page:ae,limit:G,search:I,difficulty:b.difficulty,sortBy:b.sortBy,sortOrder:b.sortOrder});l(ue.vocabularies),Ee(ue.vocabularies.length),M(ae)}catch(ue){console.error("Error loading vocabulary items:",ue),m("Failed to load vocabulary items.")}finally{d(!1)}},Ht=async K=>{i(K),_("vocabulary"),M(1),await Ke(K.id)},Lt=()=>{_("collections"),i(null),l([]),x([]),E(!1),T(null)},nd=async(K,ae)=>{try{await Mt.toggleFavorite(K,t.uid),r(ue=>ue.map(Ne=>Ne.id===K?{...Ne,isFavorite:!ae}:Ne))}catch(ue){console.error("Error toggling favorite:",ue),m("Failed to update favorite status.")}},rd=async K=>{if(window.confirm("Are you sure you want to delete this collection? This action cannot be undone."))try{await Mt.deleteCollection(K,t.uid),r(ae=>ae.filter(ue=>ue.id!==K)),(s==null?void 0:s.id)===K&&Lt()}catch(ae){console.error("Error deleting collection:",ae),m("Failed to delete collection.")}},ns=async K=>{A(K),p==="vocabulary"&&s&&await Ke(s.id,1)},zs=async K=>{w(ae=>({...ae,...K})),p==="collections"?await Ct():p==="vocabulary"&&s&&await Ke(s.id,1)},ro=K=>{x(ae=>{const ue=ae.includes(K)?ae.filter(Ne=>Ne!==K):[...ae,K];return D(ue.length>0),ue})},so=()=>{if(v.length===o.length)x([]),D(!1);else{const K=o.map(ae=>ae.id);x(K),D(!0)}},io=K=>{T(K),E(!0)},Bs=()=>{T(null),E(!0)},Ws=()=>{E(!1),T(null),j(!1)},el=async K=>{try{j(!0),y?await Mt.updateVocabulary(y.id,K):await Mt.addVocabulary(s.id,t.uid,K),await Ke(s.id,U),Ws()}catch(ae){throw console.error("Error saving vocabulary item:",ae),new Error("Failed to save vocabulary item. Please try again.")}finally{j(!1)}},sd=async K=>{if(window.confirm("Are you sure you want to delete this word? This action cannot be undone."))try{await Mt.deleteVocabulary(K),await Ke(s.id,U)}catch(ae){console.error("Error deleting vocabulary item:",ae),m("Failed to delete vocabulary item.")}},tl=async K=>{try{j(!0),await Mt.deleteVocabulary(K),await Ke(s.id,U),Ws()}catch(ae){throw console.error("Error deleting vocabulary item:",ae),new Error("Failed to delete vocabulary item. Please try again.")}finally{j(!1)}},nl=async()=>{if(!(v.length===0||!window.confirm(`Are you sure you want to delete ${v.length} selected word(s)? This action cannot be undone.`)))try{d(!0),await Promise.all(v.map(ae=>Mt.deleteVocabulary(ae))),x([]),D(!1),await Ke(s.id,U)}catch(ae){console.error("Error deleting vocabulary items:",ae),m("Failed to delete selected items.")}finally{d(!1)}},oo=async K=>{try{W(K),K.type==="system"?(_("collections"),i(null),l([]),console.log("Switched to system vocabulary database")):(_("collections"),i(null),l([]),await Ct(),console.log(`Switched to custom database: ${K.name}`))}catch(ae){console.error("Error switching database:",ae),m("Failed to switch database. Please try again.")}},ao=K=>K?(K.toDate?K.toDate():new Date(K)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Unknown",id=()=>a.jsxs("div",{className:"collections-view",children:[a.jsxs("div",{className:"collections-header",children:[a.jsxs("div",{className:"header-content",children:[a.jsxs("div",{className:"header-top",children:[a.jsx("h2",{children:"My Vocabulary Collections"}),a.jsxs("div",{className:"current-database",children:[a.jsx("span",{className:"database-label",children:"Current Database:"}),a.jsxs("button",{className:"database-selector-btn",onClick:()=>z(!0),title:"Switch vocabulary database",children:[a.jsx(qn,{size:16}),H.name,a.jsx(vc,{size:14})]})]})]}),a.jsx("p",{children:"Manage your custom vocabulary collections and study materials"})]}),a.jsxs("div",{className:"header-actions",children:[a.jsxs("button",{className:"btn btn-outline",onClick:()=>N(!0),title:"OpenAI Settings for AI example generation",children:[a.jsx(vc,{size:16}),"AI Settings"]}),a.jsxs("button",{className:"btn btn-primary",onClick:()=>e("/custom-vocabulary"),children:[a.jsx(pi,{size:16}),"Upload Collection"]})]})]}),a.jsxs("div",{className:"controls-section",children:[a.jsxs("div",{className:"search-controls",children:[a.jsxs("div",{className:"search-input",children:[a.jsx(Lf,{size:16}),a.jsx("input",{type:"text",placeholder:"Search collections...",value:I,onChange:K=>ns(K.target.value)})]}),a.jsxs("button",{className:"btn btn-outline",children:[a.jsx(hL,{size:16}),"Filters"]})]}),a.jsx("div",{className:"sort-controls",children:a.jsxs("select",{value:`${b.sortBy}-${b.sortOrder}`,onChange:K=>{const[ae,ue]=K.target.value.split("-");zs({sortBy:ae,sortOrder:ue})},children:[a.jsx("option",{value:"updatedAt-desc",children:"Recently Updated"}),a.jsx("option",{value:"createdAt-desc",children:"Recently Created"}),a.jsx("option",{value:"name-asc",children:"Name A-Z"}),a.jsx("option",{value:"name-desc",children:"Name Z-A"}),a.jsx("option",{value:"wordCount-desc",children:"Most Words"})]})})]}),a.jsx("div",{className:"collections-grid",children:n.map(K=>{var ae;return a.jsxs("div",{className:"collection-card",children:[a.jsxs("div",{className:"collection-header",children:[a.jsxs("div",{className:"collection-title",children:[a.jsx("h3",{children:K.name}),a.jsx("button",{className:`favorite-btn ${K.isFavorite?"active":""}`,onClick:()=>nd(K.id,K.isFavorite),children:K.isFavorite?a.jsx(Vf,{size:16}):a.jsx(vT,{size:16})})]}),a.jsxs("div",{className:"collection-actions",children:[a.jsxs("button",{className:"btn btn-sm btn-outline",onClick:()=>Ht(K),children:[a.jsx(gT,{size:14}),"View"]}),a.jsxs("div",{className:"dropdown",children:[a.jsx("button",{className:"btn btn-sm btn-ghost",children:a.jsx(iL,{size:14})}),a.jsxs("div",{className:"dropdown-menu",children:[a.jsxs("button",{onClick:()=>Ht(K),children:[a.jsx(fh,{size:14}),"Edit"]}),a.jsxs("button",{onClick:()=>rd(K.id),className:"danger",children:[a.jsx(_c,{size:14}),"Delete"]})]})]})]})]}),a.jsx("div",{className:"collection-description",children:a.jsx("p",{children:K.description||"No description available"})}),a.jsxs("div",{className:"collection-stats",children:[a.jsxs("div",{className:"stat",children:[a.jsx(yc,{size:14}),a.jsxs("span",{children:[K.wordCount||0," words"]})]}),a.jsxs("div",{className:"stat",children:[a.jsx(Mf,{size:14}),a.jsxs("span",{children:[K.studiedCount||0," studied"]})]}),a.jsxs("div",{className:"stat",children:[a.jsx(QD,{size:14}),a.jsx("span",{children:ao(K.updatedAt)})]})]}),a.jsx("div",{className:"collection-tags",children:(ae=K.tags)==null?void 0:ae.map(ue=>a.jsx("span",{className:"tag",children:ue},ue))})]},K.id)})}),n.length===0&&!u&&a.jsxs("div",{className:"empty-state",children:[a.jsx(qn,{size:48}),a.jsx("h3",{children:"No Collections Yet"}),a.jsx("p",{children:"Create your first custom vocabulary collection to get started."}),a.jsxs("button",{className:"btn btn-primary",onClick:()=>e("/custom-vocabulary"),children:[a.jsx(pi,{size:16}),"Upload Collection"]})]})]}),lo=()=>a.jsxs("div",{className:"vocabulary-view",children:[a.jsxs("div",{className:"vocabulary-header",children:[a.jsxs("div",{className:"breadcrumb",children:[a.jsx("button",{className:"btn btn-ghost",onClick:Lt,children:" Back to Collections"}),a.jsx("span",{children:"/"}),a.jsx("h2",{children:s==null?void 0:s.name})]}),a.jsx("div",{className:"collection-info",children:a.jsxs("div",{className:"collection-stats",children:[a.jsxs("div",{className:"stat",children:[a.jsx(yc,{size:16}),a.jsxs("span",{children:[(s==null?void 0:s.wordCount)||0," total words"]})]}),a.jsxs("div",{className:"stat",children:[a.jsx(Mf,{size:16}),a.jsxs("span",{children:[(s==null?void 0:s.studiedCount)||0," studied"]})]}),a.jsxs("div",{className:"stat",children:[a.jsx(bL,{size:16}),a.jsxs("span",{children:[Math.round(((s==null?void 0:s.masteredCount)||0)/((s==null?void 0:s.wordCount)||1)*100),"% mastered"]})]})]})})]}),a.jsxs("div",{className:"vocabulary-controls",children:[a.jsxs("div",{className:"search-input",children:[a.jsx(Lf,{size:16}),a.jsx("input",{type:"text",placeholder:"Search vocabulary...",value:I,onChange:K=>ns(K.target.value)})]}),a.jsxs("div",{className:"control-buttons",children:[a.jsx("button",{className:"btn btn-outline",onClick:so,children:v.length===o.length?"Deselect All":"Select All"}),a.jsxs("button",{className:"btn btn-primary",onClick:Bs,children:[a.jsx(pi,{size:16}),"Add Word"]})]})]}),k&&a.jsxs("div",{className:"batch-actions",children:[a.jsxs("span",{children:[v.length," selected"]}),a.jsxs("div",{className:"actions",children:[a.jsxs("button",{className:"btn btn-sm btn-outline",children:[a.jsx(fh,{size:14}),"Edit Selected"]}),a.jsxs("button",{className:"btn btn-sm btn-outline",children:[a.jsx(vc,{size:14}),"Change Difficulty"]}),a.jsxs("button",{className:"btn btn-sm btn-danger",onClick:nl,children:[a.jsx(_c,{size:14}),"Delete Selected"]})]})]}),a.jsx("div",{className:"vocabulary-list",children:o.map(K=>{var ae,ue,Ne;return a.jsxs("div",{className:"vocabulary-item",children:[a.jsx("div",{className:"item-checkbox",children:a.jsx("input",{type:"checkbox",checked:v.includes(K.id),onChange:()=>ro(K.id)})}),a.jsxs("div",{className:"item-content",children:[a.jsxs("div",{className:"item-header",children:[a.jsx("h4",{className:"word",children:K.word}),a.jsx("span",{className:`difficulty ${K.difficulty}`,children:K.difficulty})]}),a.jsx("div",{className:"item-definition",children:a.jsx("p",{children:((ue=(ae=K.definitions)==null?void 0:ae[0])==null?void 0:ue.definition)||"No definition"})}),K.koreanTranslation&&a.jsxs("div",{className:"item-translation",children:[a.jsx("span",{className:"label",children:"Korean:"}),a.jsx("span",{children:K.koreanTranslation})]}),((Ne=K.examples)==null?void 0:Ne.length)>0&&a.jsxs("div",{className:"item-examples",children:[a.jsx("span",{className:"label",children:"Example:"}),a.jsx("span",{children:K.examples[0].example})]}),a.jsxs("div",{className:"item-stats",children:[a.jsxs("span",{children:["Studied: ",K.timesStudied||0]}),a.jsxs("span",{children:["Mastery: ",K.masteryLevel||0,"%"]}),K.lastStudied&&a.jsxs("span",{children:["Last: ",ao(K.lastStudied)]})]})]}),a.jsxs("div",{className:"item-actions",children:[a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:()=>io(K),title:"Edit word",children:a.jsx(fh,{size:14})}),a.jsx("button",{className:"btn btn-sm btn-ghost",onClick:()=>sd(K.id),title:"Delete word",children:a.jsx(_c,{size:14})})]})]},K.id)})}),o.length===0&&!u&&a.jsxs("div",{className:"empty-state",children:[a.jsx(yc,{size:48}),a.jsx("h3",{children:"No Words in Collection"}),a.jsx("p",{children:"This collection doesn't have any vocabulary words yet."}),a.jsxs("button",{className:"btn btn-primary",onClick:Bs,children:[a.jsx(pi,{size:16}),"Add First Word"]})]})]});return a.jsxs("div",{className:"vocabulary-management",children:[u&&a.jsxs("div",{className:"loading-state",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Loading..."})]}),h&&a.jsx("div",{className:"error-state",children:a.jsxs("div",{className:"error-message",children:[a.jsx("h3",{children:"Error"}),a.jsx("p",{children:h}),a.jsx("button",{className:"btn btn-primary",onClick:()=>{m(null),p==="collections"?Ct():s&&Ke(s.id,U)},children:"Try Again"})]})}),!u&&!h&&a.jsxs(a.Fragment,{children:[p==="collections"&&id(),p==="vocabulary"&&lo()]}),V&&a.jsx(ET,{isOpen:V,onClose:Ws,item:y,onSave:el,onDelete:tl,isLoading:R}),ee&&a.jsx(TT,{isOpen:ee,currentDatabase:H,onDatabaseChange:oo,onClose:()=>z(!1),userId:t==null?void 0:t.uid}),O&&a.jsx(xT,{isOpen:O,onClose:()=>N(!1)})]})};function ML(){return a.jsx(du,{children:a.jsx(rT,{children:a.jsx(JR,{children:a.jsxs("div",{className:"app",children:[a.jsx(PD,{}),a.jsx("main",{className:"main-content",children:a.jsx(du,{title:"Page Error",message:"There was an error loading this page.",children:a.jsxs(RR,{children:[a.jsx(Gt,{path:"/",element:a.jsx(OD,{})}),a.jsx(Gt,{path:"/login",element:a.jsx(FD,{})}),a.jsx(Gt,{path:"/register",element:a.jsx(UD,{})}),a.jsx(Gt,{path:"/forgot-password",element:a.jsx($D,{})}),a.jsx(Gt,{path:"/about",element:a.jsx(MD,{})}),a.jsx(Gt,{path:"/dashboard",element:a.jsx(Ys,{children:a.jsx(DD,{})})}),a.jsx(Gt,{path:"/quiz",element:a.jsx(Ys,{children:a.jsx(LD,{})})}),a.jsx(Gt,{path:"/custom-vocabulary",element:a.jsx(Ys,{children:a.jsx(LL,{})})}),a.jsx(Gt,{path:"/vocabulary",element:a.jsx(Ys,{children:a.jsx(z_,{})})}),a.jsx(Gt,{path:"/vocabulary-management",element:a.jsx(Ys,{children:a.jsx(z_,{})})}),a.jsx(Gt,{path:"/profile",element:a.jsx(Ys,{children:a.jsx(VD,{})})})]})})})]})})})})}ph.createRoot(document.getElementById("root")).render(a.jsx(pn.StrictMode,{children:a.jsx(ML,{})}));
